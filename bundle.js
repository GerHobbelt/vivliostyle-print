!function(){"use strict";var t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e,n=(function(e,n){var i;i=function(e){e=e||{};var n,i="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r="undefined"!=typeof window&&window===this?this:void 0!==t?t:this;function o(){o=function(){},r.Symbol||(r.Symbol=u)}var a=0;function u(t){return"jscomp_symbol_"+(t||"")+a++}function s(){o();var t=r.Symbol.iterator;t||(t=r.Symbol.iterator=r.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&i(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return h(this)}}),s=function(){}}function h(t){var e=0;return function(t){return s(),(t={next:t})[r.Symbol.iterator]=function(){return this},t}(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})}function l(t){s();var e=t[Symbol.iterator];return e?e.call(t):h(t)}function f(t){if(!(t instanceof Array)){t=l(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}function c(t,e){if(e){for(var n=r,o=t.split("."),a=0;a<o.length-1;a++){var u=o[a];u in n||(n[u]={}),n=n[u]}(u=e(a=n[o=o[o.length-1]]))!=a&&null!=u&&i(n,o,{configurable:!0,writable:!0,value:u})}}c("Array.from",function(t){return t||function(t,e,n){s(),e=e||function(t){return t};var i=[];if("function"==typeof(r=t[Symbol.iterator]))for(t=r.call(t);!(r=t.next()).done;)i.push(e.call(n,r.value));else for(var r=t.length,o=0;o<r;o++)i.push(e.call(n,t[o]));return i}}),c("Object.assign",function(t){return t||function(t,e){for(var n=arguments,i=1;i<arguments.length;i++){var r=n[i];if(r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}}),c("Array.prototype.values",function(t){return t||function(){return function(t,e){s(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i}(this,function(t,e){return e})}}),c("String.prototype.includes",function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==(this+"").indexOf(t,e||0)}}),c("Array.prototype.findIndex",function(t){return t||function(t,e){var n;t:{(n=this)instanceof String&&(n=String(n));for(var i=n.length,r=0;r<i;r++)if(t.call(e,n[r],r,n)){n=r;break t}n=-1}return n}});var p=this;function b(t,n){var i,r=void 0!==e&&e?e:window,o=t.split(".");r=r||p;o[0]in r||!r.execScript||r.execScript("var "+o[0]);for(;o.length&&(i=o.shift());)o.length||void 0===n?r=r[i]?r[i]:r[i]={}:r[i]=n}function d(t,e){function n(){}n.prototype=e.prototype,t.mg=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.mh=function(t,n,i){for(var r=arguments,o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=r[a];return e.prototype[n].apply(t,o)}}function g(t){if(Error.captureStackTrace)Error.captureStackTrace(this,g);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function v(t,e){e.unshift(t),g.call(this,function(t,e){for(var n=t.split("%s"),i="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join("%s")}.apply(null,e)),e.shift()}function w(t,e){throw new v("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function m(t){var e=t.error,n=e&&(e.frameTrace||e.stack);return t=[].concat(t.messages),e&&(0<t.length&&(t=t.concat(["\n"])),t=t.concat([e.toString()]),n&&(t=t.concat(["\n"]).concat(n))),t}function y(t){var e=null;return(t=Array.from(t))[0]instanceof Error&&(e=t.shift()),{error:e,messages:t}}function E(t){this.f=t,this.Lb={}}function x(t,e,n){(t=t.Lb[e])&&t.forEach(function(t){t(n)})}function S(t,e){var n=C,i=n.Lb[t];i||(i=n.Lb[t]=[]),i.push(e)}d(g,Error),g.prototype.name="CustomError",d(v,g),v.prototype.name="AssertionError",E.prototype.debug=function(t){var e=y(arguments),n=m(e);this.f?this.f.debug?this.f.debug.apply(this.f,[].concat(f(n))):this.f.log.apply(this.f,[].concat(f(n))):console.debug.apply(console,[].concat(f(n))),x(this,1,e)},E.prototype.g=function(t){var e=y(arguments),n=m(e);this.f?this.f.info?this.f.info.apply(this.f,[].concat(f(n))):this.f.log.apply(this.f,[].concat(f(n))):console.info.apply(console,[].concat(f(n))),x(this,2,e)},E.prototype.b=function(t){var e=y(arguments),n=m(e);this.f?this.f.warn?this.f.warn.apply(this.f,[].concat(f(n))):this.f.log.apply(this.f,[].concat(f(n))):console.warn.apply(console,[].concat(f(n))),x(this,3,e)},E.prototype.error=function(t){var e=y(arguments),n=m(e);this.f?this.f.error?this.f.error.apply(this.f,[].concat(f(n))):this.f.log.apply(this.f,[].concat(f(n))):console.error.apply(console,[].concat(f(n))),x(this,4,e)};var C=new E;function k(t){var e=t.match(/^([^#]*)/);return e?e[1]:t}var A=window.location.href,T=window.location.href;function N(t,e){var n;if(!e||t.match(/^\w{2,}:/))return t.toLowerCase().match("^javascript:")?"#":((n=/^(https?:)\/\/github\.com\/([^\/]+\/[^\/]+)\/(blob\/|tree\/|raw\/)?(.*)$/.exec(t))?t=n[1]+"//raw.githubusercontent.com/"+n[2]+"/"+(n[3]?"":"master/")+n[4]:(n=/^(https?:)\/\/www\.aozora\.gr\.jp\/(cards\/[^\/]+\/files\/[^\/.]+\.html)$/.exec(t))?t=n[1]+"//raw.githubusercontent.com/aozorabunko/aozorabunko/master/"+n[2]:(n=/^(https?:)\/\/gist\.github\.com\/([^\/]+\/\w+)(\/|$)(raw(\/|$))?(.*)$/.exec(t))&&(t=n[1]+"//gist.githubusercontent.com/"+n[2]+"/raw/"+n[6]),t);if(e.match(/^\w{2,}:\/\/[^\/]+$/)&&(e+="/"),t.match(/^\/\//))return(n=e.match(/^(\w{2,}:)\/\//))?n[1]+t:t;if(t.match(/^\//))return(n=e.match(/^(\w{2,}:\/\/[^\/]+)\//))?n[1]+t:t;t.match(/^\.(\/|$)/)&&(t=t.substr(1));var i=(n=e).match(/^([^#?]*)/);if(e=i?i[1]:n,t.match(/^\#/))return e+t;if(0>(n=e.lastIndexOf("/")))return t;for(i=e.substr(0,n+1)+t;!(0>=(n=i.indexOf("/../")));){var r=i.lastIndexOf("/",n-1);if(0>=r)break;i=i.substr(0,r)+i.substr(n+3)}return i.replace(/\/(\.\/)+/g,"/")}function I(t){return t=new RegExp("#(.*&)?"+G(t)+"=([^#&]*)"),(t=window.location.href.match(t))?t[2]:null}function _(t){return null==t?t:t.toString()}function L(){this.b=[null]}L.prototype.length=function(){return this.b.length-1};var j=" -webkit- -moz- -ms- -o- -epub-".split(" "),O={};function R(t,e){if("writing-mode"===e){var n=document.createElement("span");return"-ms-"===t?(n.style.setProperty(t+e,"tb-rl"),"tb-rl"===n.style["writing-mode"]):(n.style.setProperty(t+e,"vertical-rl"),"vertical-rl"===n.style[t+e])}return"string"==typeof document.documentElement.style[function(t,e){return t&&(e="-"+e,"moz"===(t=t.replace(/-/g,""))&&(t="Moz")),t+e.replace(/-[a-z]/g,function(t){return t.substr(1).toUpperCase()})}(t,e)]}function F(t){if((e=O[t])||null===e)return e;switch(t){case"writing-mode":if(R("-ms-","writing-mode"))return O[t]=["-ms-writing-mode"],["-ms-writing-mode"];break;case"filter":if(R("-webkit-","filter"))return O[t]=["-webkit-filter"],["-webkit-filter"];break;case"clip-path":if(R("-webkit-","clip-path"))return O[t]=["-webkit-clip-path","clip-path"];break;case"margin-inline-start":if(R("-webkit-","margin-start"))return O[t]=["-webkit-margin-start"],["-webkit-margin-start"];break;case"margin-inline-end":if(R("-webkit-","margin-end"))return O[t]=["-webkit-margin-end"],["-webkit-margin-end"];case"padding-inline-start":if(R("-webkit-","padding-start"))return O[t]=["-webkit-padding-start"],["-webkit-padding-start"];break;case"padding-inline-end":if(R("-webkit-","padding-end"))return O[t]=["-webkit-padding-end"],["-webkit-padding-end"]}for(var e,n=(e=l(j)).next();!n.done;n=e.next())if(R(n=n.value,t))return e=n+t,O[t]=[e],[e];return C.b("Property not supported by the browser: ",t),O[t]=null}function P(t,e,n){try{var i=F(e);i&&i.forEach(function(e){if("-ms-writing-mode"===e)switch(n){case"horizontal-tb":n="lr-tb";break;case"vertical-rl":n="tb-rl";break;case"vertical-lr":n="tb-lr"}t&&t.style&&t.style.setProperty(e,n)})}catch(t){C.b(t)}}function D(t,e,n){try{var i=O[e];return t.style.getPropertyValue(i?i[0]:e)}catch(t){}return n||""}function M(t){var e=t.getAttributeNS("http://www.w3.org/XML/1998/namespace","lang");return e||"http://www.w3.org/1999/xhtml"!=t.namespaceURI||(e=t.getAttribute("lang")),e}function B(){this.b=[]}function U(t){return"\\"+t.charCodeAt(0).toString(16)+" "}function z(t){return t.replace(/[^-_a-zA-Z0-9\u0080-\uFFFF]/g,U)}function V(t){return t.replace(/[\u0000-\u001F"]/g,U)}function X(t){return t.replace(/[\s+&?=#\u007F-\uFFFF]+/g,encodeURIComponent)}function H(t){return!!t.match(/^[a-zA-Z\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u024F\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]$/)}function G(t,e){return t.replace(/[^-a-zA-Z0-9_]/g,function(t){return("string"==typeof e?e:"\\u")+(65536|t.charCodeAt(0)).toString(16).substr(1)})}function Y(t){if(!t)throw"Assert failed"}function K(t,e){for(var n=0,i=t;;){if(Y(n<=i),Y(!n||!e(n-1)),Y(i==t||e(i)),n==i)return n;var r=n+i>>1;e(r)?i=r:n=r+1}}function W(t,e){return t-e}function $(t,e){for(var n={},i=l(t),r=i.next();!r.done;r=i.next()){var o=e(r=r.value);o&&!n[o]&&(n[o]=r)}return n}B.prototype.append=function(t){return this.b.push(t),this},B.prototype.toString=function(){var t=this.b.join("");return this.b=[t],t};var J={};function Z(t,e){for(var n={},i=l(t),r=i.next();!r.done;r=i.next()){var o=e(r=r.value);o&&(n[o]?n[o].push(r):n[o]=[r])}return n}function q(t,e){for(var n=Array(t.length),i=0;i<t.length;i++)n[i]=e(t[i],i);return n}function Q(){this.Lb={}}function tt(t,e){var n=t.Lb[e.type];if(n){e.target=t,e.currentTarget=t;for(var i=0;i<n.length;i++)n[i](e)}}Q.prototype.addEventListener=function(t,e,n){n||((n=this.Lb[t])?n.push(e):this.Lb[t]=[e])},Q.prototype.removeEventListener=function(t,e,n){!n&&(t=this.Lb[t])&&(0<=(e=t.indexOf(e))&&t.splice(e,1))};var et=null,nt=null,it=null,rt=null;function ot(t){return 1==t.nodeType&&(t=t.getAttribute("id"))&&t.match(/^[-a-zA-Z_0-9.\u007F-\uFFFF]+$/)?t:null}function at(t){return"^"+t}function ut(t){return t.substr(1)}function st(t){return t?t.replace(/\^[\[\]\(\),=;^]/g,ut):t}function ht(t){for(var e={};t;){var n=t.match(/^;([^;=]+)=(([^;]|\^;)*)/);if(!n)break;var i,r=n[1];t:{i=n[2];var o=[];do{var a=i.match(/^(\^,|[^,])*/),u=st(a[0]);if(!(i=i.substr(a[0].length+1))&&!o.length){i=u;break t}o.push(u)}while(i);i=o}e[r]=i,t=t.substr(n[0].length)}return e}function lt(){}function ft(t,e,n){this.index=t,this.id=e,this.Fb=n}function ct(t,e,n,i){this.offset=t,this.f=e,this.b=n,this.Fb=i}function pt(){this.pa=null}function bt(t,e){for(var n={node:e.documentElement,offset:0,K:!1,Fb:null,pd:null},i=0;i<t.pa.length;i++)if(!t.pa[i].h(n)){n.pd=new pt,n.pd.pa=t.pa.slice(i+1);break}return n}function dt(t,e,n){for(var i=!1,r=null,o=[],a=e.parentNode,u="",s="";e;){switch(e.nodeType){case 3:case 4:case 5:var h=e.textContent,l=h.length;i?(n+=l,u||(u=h)):(n>l&&(n=l),i=!0,u=h.substr(0,n),s=h.substr(n)),e=e.previousSibling;continue;case 8:e=e.previousSibling;continue}break}for((0<n||u||s)&&(u=t.trim(u,!1),s=t.trim(s,!0),o.push(new ct(n,u,s,r)),r=null);a&&a&&9!=a.nodeType;){for(n=i?null:ot(e),i=i?1:0;e;)1==e.nodeType&&(i+=2),e=e.previousSibling;o.push(new ft(i,n,r)),r=null,e=a,a=a.parentNode,i=!1}o.reverse(),t.pa?(o.push(new lt),t.pa=o.concat(t.pa)):t.pa=o}function gt(t){return{fontFamily:t.fontFamily,lineHeight:t.lineHeight,margin:t.margin,ve:t.ve,ne:t.ne,ue:t.ue,Ge:t.Ge,tb:t.tb,zc:t.zc,$e:Object.assign({},t.$e),rc:t.rc?Object.assign({},t.rc):void 0}}lt.prototype.g=function(t){t.append("!")},lt.prototype.h=function(){return!1},ft.prototype.g=function(t){t.append("/"),t.append(this.index.toString()),(this.id||this.Fb)&&(t.append("["),this.id&&t.append(this.id),this.Fb&&(t.append(";s="),t.append(this.Fb)),t.append("]"))},ft.prototype.h=function(t){if(1!=t.node.nodeType)throw Error("E_CFI_NOT_ELEMENT");var e=t.node,n=e.children,i=n.length,r=Math.floor(this.index/2)-1;if(0>r||!i?(n=e.firstChild,t.node=n||e):(n=n[Math.min(r,i-1)],1&this.index&&((e=n.nextSibling)&&1!=e.nodeType?n=e:t.K=!0),t.node=n),this.id&&(t.K||this.id!=ot(t.node)))throw Error("E_CFI_ID_MISMATCH");return t.Fb=this.Fb,!0},ct.prototype.h=function(t){if(0<this.offset&&!t.K){for(var e=this.offset,n=t.node;;){var i=n.nodeType;if(1==i)break;var r=n.nextSibling;if(3<=i&&5>=i){if(e<=(i=n.textContent.length))break;if(!r){e=i;break}e-=i}if(!r){e=0;break}n=r}t.node=n,t.offset=e}return t.Fb=this.Fb,!0},ct.prototype.g=function(t){t.append(":"),t.append(this.offset.toString()),(this.f||this.b||this.Fb)&&(t.append("["),(this.f||this.b)&&(this.f&&t.append(this.f.replace(/[\[\]\(\),=;^]/g,at)),t.append(","),this.b&&t.append(this.b.replace(/[\[\]\(\),=;^]/g,at))),this.Fb&&(t.append(";s="),t.append(this.Fb)),t.append("]"))},pt.prototype.trim=function(t,e){return t.replace(/\s+/g," ").match(e?/^[ -\uD7FF\uE000-\uFFFF]{0,8}/:/[ -\uD7FF\uE000-\uFFFF]{0,8}$/)[0].replace(/^\s/,"").replace(/\s$/,"")},pt.prototype.toString=function(){if(!this.pa)return"";var t=new B;t.append("epubcfi(");for(var e=0;e<this.pa.length;e++)this.pa[e].g(t);return t.append(")"),t.toString()};var vt={fontFamily:"serif",lineHeight:1.25,margin:8,ve:!1,ne:25,ue:!1,Ge:!1,tb:!1,zc:1,$e:{vivliostyle:!0,print:!0},rc:void 0},wt={};function mt(t,e,n,i){return"matrix("+(t=Math.min((t-0)/n,(e-0)/i))+",0,0,"+t+",0,0)"}function yt(t){return'"'+V(""+t)+'"'}function Et(t){return z(""+t)}function xt(t,e){return t?z(t)+"."+z(e):z(e)}var St=0;function Ct(t,e){if(this.parent=t,this.u="S"+St++,this.children=[],this.b=new le(this,0),this.f=new le(this,1),this.j=new le(this,!0),this.h=new le(this,!1),t&&t.children.push(this),this.values={},this.D={},this.A={},this.l=e,!t){var n=this.A;n.floor=Math.floor,n.ceil=Math.ceil,n.round=Math.round,n.sqrt=Math.sqrt,n.min=Math.min,n.max=Math.max,n.letterbox=mt,n["css-string"]=yt,n["css-name"]=Et,n.typeof=function(t){return typeof t},kt(this,"page-width",function(){return this.gc()}),kt(this,"page-height",function(){return this.fc()}),kt(this,"pref-font-family",function(){return this.$.fontFamily}),kt(this,"pref-night-mode",function(){return this.$.Ge}),kt(this,"pref-hyphenate",function(){return this.$.ve}),kt(this,"pref-margin",function(){return this.$.margin}),kt(this,"pref-line-height",function(){return this.$.lineHeight}),kt(this,"pref-column-width",function(){return this.$.ne*this.fontSize}),kt(this,"pref-horizontal",function(){return this.$.ue}),kt(this,"pref-spread-view",function(){return this.$.tb})}}function kt(t,e,n){t.values[e]=new ue(t,n,e)}var At={px:1,in:96,pt:4/3,pc:16,cm:96/2.54,mm:96/25.4,q:96/2.54/40,em:16,rem:16,ex:8,dppx:1,dpi:1/96,dpcm:2.54/96};function Tt(t){switch(t){case"q":case"rem":return!0;default:return!1}}function Nt(t,e,n,i){this.eb=e,this.Ib=n,this.R=null,this.gc=function(){return this.R?this.R:this.$.tb?Math.floor(e/2)-this.$.zc:e},this.N=null,this.fc=function(){return this.N?this.N:n},this.u=i,this.ta=null,this.fontSize=function(){return this.ta?this.ta:i},this.$=vt,this.H={}}function It(t,e){t.H[e.u]={};for(var n=0;n<e.children.length;n++)It(t,e.children[n])}function _t(t,e,n){return"vw"==e?t.gc()/100:"vh"==e?t.fc()/100:"em"==e||"rem"==e?n?t.u:t.fontSize():"ex"==e?At.ex*(n?t.u:t.fontSize())/At.em:At[e]}function Lt(t,e,n){do{var i=e.values[n];if(i||e.l&&(i=e.l.call(t,n,!1)))return i;e=e.parent}while(e);throw Error("Name '"+n+"' is undefined")}function jt(t,e,n,i,r){do{var o=e.D[n];if(o||e.l&&(o=e.l.call(t,n,!0)))return o;if(o=e.A[n]){if(r)return e.b;for(n=Array(i.length),r=0;r<i.length;r++)n[r]=i[r].evaluate(t);return new le(e,o.apply(t,n))}e=e.parent}while(e);throw Error("Function '"+n+"' is undefined")}function Ot(t){this.b=t,this.g="_"+St++}function Rt(t,e,n,i){var r=i[t.g];return null!=r?r!==wt&&r:(i[t.g]=wt,e=t.sc(e,n,i),i[t.g]=e)}function Ft(t,e){Ot.call(this,t),this.f=e}function Pt(t,e,n){Ot.call(this,t),this.f=e,this.h=n}function Dt(t,e,n){Pt.call(this,t,e,n)}function Mt(t,e,n){Pt.call(this,t,e,n)}function Bt(t,e,n){Pt.call(this,t,e,n)}function Ut(t,e,n){Pt.call(this,t,e,n)}function zt(t,e){Ft.call(this,t,e)}function Vt(t,e){Ft.call(this,t,e)}function Xt(t,e,n){Pt.call(this,t,e,n)}function Ht(t,e,n){Pt.call(this,t,e,n)}function Gt(t,e,n){Pt.call(this,t,e,n)}function Yt(t,e,n){Pt.call(this,t,e,n)}function Kt(t,e,n){Pt.call(this,t,e,n)}function Wt(t,e,n){Pt.call(this,t,e,n)}function $t(t,e,n){Pt.call(this,t,e,n)}function Jt(t,e,n){Pt.call(this,t,e,n)}function Zt(t,e,n){Pt.call(this,t,e,n)}function qt(t,e,n){Pt.call(this,t,e,n)}function Qt(t,e,n){Pt.call(this,t,e,n)}function te(t,e,n){Pt.call(this,t,e,n)}function ee(t,e,n){Pt.call(this,t,e,n)}function ne(t,e,n){Pt.call(this,t,e,n)}function ie(t,e,n){Pt.call(this,t,e,n)}function re(t,e,n){Ot.call(this,t),this.L=e,this.ka=n.toLowerCase()}function oe(t,e){Ot.call(this,t),this.f=e}function ae(t,e,n){Ot.call(this,t),this.f=e,this.name=n}function ue(t,e,n){Ot.call(this,t),this.Mc=e,this.Uc=n}function se(t,e,n){Ot.call(this,t),this.h=e,this.f=n}function he(t,e,n,i){Ot.call(this,t),this.f=e,this.j=n,this.h=i}function le(t,e){Ot.call(this,t),this.f=e}function fe(t,e,n){Ot.call(this,t),this.name=e,this.value=n}function ce(t,e){Ot.call(this,t),this.index=e}function pe(t,e,n){return e===t.h||e===t.b||n==t.h||n==t.b?t.h:e===t.j||e===t.f?n:n===t.j||n===t.f?e:new Xt(t,e,n)}function be(t,e,n){return e===t.b?n:n===t.b?e:new Qt(t,e,n)}function de(t,e,n){return e===t.b?new Vt(t,n):n===t.b?e:new te(t,e,n)}function ge(t,e,n){return e===t.b||n===t.b?t.b:e===t.f?n:n===t.f?e:new ee(t,e,n)}function ve(t,e,n){return e===t.b?t.b:n===t.f?e:new ne(t,e,n)}(n=Ot.prototype).toString=function(){var t=new B;return this.Ga(t,0),t.toString()},n.Ga=function(){throw Error("F_ABSTRACT")},n.vb=function(){throw Error("F_ABSTRACT")},n.lb=function(){return this},n.sc=function(t){return t===this},n.evaluate=function(t){var e;if(void 0!==(e=(e=t.H[this.b.u])?e[this.g]:void 0))return e;e=this.vb(t);var n=this.g,i=this.b,r=t.H[i.u];return r||(r={},t.H[i.u]=r),r[n]=e},n.ff=function(){return!1},d(Ft,Ot),(n=Ft.prototype).Ue=function(){throw Error("F_ABSTRACT")},n.af=function(){throw Error("F_ABSTRACT")},n.vb=function(t){return t=this.f.evaluate(t),this.af(t)},n.sc=function(t,e,n){return t===this||Rt(this.f,t,e,n)},n.Ga=function(t,e){10<e&&t.append("("),t.append(this.Ue()),this.f.Ga(t,10),10<e&&t.append(")")},n.lb=function(t,e){var n=this.f.lb(t,e);return n===this.f?this:new this.constructor(this.b,n)},d(Pt,Ot),(n=Pt.prototype).Ad=function(){throw Error("F_ABSTRACT")},n.gb=function(){throw Error("F_ABSTRACT")},n.Eb=function(){throw Error("F_ABSTRACT")},n.vb=function(t){var e=this.f.evaluate(t);return t=this.h.evaluate(t),this.Eb(e,t)},n.sc=function(t,e,n){return t===this||Rt(this.f,t,e,n)||Rt(this.h,t,e,n)},n.Ga=function(t,e){var n=this.Ad();n<=e&&t.append("("),this.f.Ga(t,n),t.append(this.gb()),this.h.Ga(t,n),n<=e&&t.append(")")},n.lb=function(t,e){var n=this.f.lb(t,e),i=this.h.lb(t,e);return n===this.f&&i===this.h?this:new this.constructor(this.b,n,i)},d(Dt,Pt),Dt.prototype.Ad=function(){return 1},d(Mt,Pt),Mt.prototype.Ad=function(){return 2},d(Bt,Pt),Bt.prototype.Ad=function(){return 3},d(Ut,Pt),Ut.prototype.Ad=function(){return 4},d(zt,Ft),zt.prototype.Ue=function(){return"!"},zt.prototype.af=function(t){return!t},d(Vt,Ft),Vt.prototype.Ue=function(){return"-"},Vt.prototype.af=function(t){return-t},d(Xt,Dt),Xt.prototype.gb=function(){return"&&"},Xt.prototype.vb=function(t){return this.f.evaluate(t)&&this.h.evaluate(t)},d(Ht,Xt),Ht.prototype.gb=function(){return" and "},d(Gt,Dt),Gt.prototype.gb=function(){return"||"},Gt.prototype.vb=function(t){return this.f.evaluate(t)||this.h.evaluate(t)},d(Yt,Gt),Yt.prototype.gb=function(){return", "},d(Kt,Mt),Kt.prototype.gb=function(){return"<"},Kt.prototype.Eb=function(t,e){return t<e},d(Wt,Mt),Wt.prototype.gb=function(){return"<="},Wt.prototype.Eb=function(t,e){return t<=e},d($t,Mt),$t.prototype.gb=function(){return">"},$t.prototype.Eb=function(t,e){return t>e},d(Jt,Mt),Jt.prototype.gb=function(){return">="},Jt.prototype.Eb=function(t,e){return t>=e},d(Zt,Mt),Zt.prototype.gb=function(){return"=="},Zt.prototype.Eb=function(t,e){return t==e},d(qt,Mt),qt.prototype.gb=function(){return"!="},qt.prototype.Eb=function(t,e){return t!=e},d(Qt,Bt),Qt.prototype.gb=function(){return"+"},Qt.prototype.Eb=function(t,e){return t+e},d(te,Bt),te.prototype.gb=function(){return" - "},te.prototype.Eb=function(t,e){return t-e},d(ee,Ut),ee.prototype.gb=function(){return"*"},ee.prototype.Eb=function(t,e){return t*e},d(ne,Ut),ne.prototype.gb=function(){return"/"},ne.prototype.Eb=function(t,e){return t/e},d(ie,Ut),ie.prototype.gb=function(){return"%"},ie.prototype.Eb=function(t,e){return t%e},d(re,Ot),re.prototype.Ga=function(t){t.append(this.L.toString()),t.append(z(this.ka))},re.prototype.vb=function(t){return this.L*_t(t,this.ka,!1)},d(oe,Ot),oe.prototype.Ga=function(t){t.append(this.f)},oe.prototype.vb=function(t){return Lt(t,this.b,this.f).evaluate(t)},oe.prototype.sc=function(t,e,n){return t===this||Rt(Lt(e,this.b,this.f),t,e,n)},d(ae,Ot),ae.prototype.Ga=function(t){this.f&&t.append("not "),t.append(z(this.name))},ae.prototype.vb=function(t){var e=this.name;return t="all"===e||!!t.$.$e[e],this.f?!t:t},ae.prototype.sc=function(t,e,n){return t===this||Rt(this.value,t,e,n)},ae.prototype.ff=function(){return!0},d(ue,Ot),ue.prototype.Ga=function(t){t.append(this.Uc)},ue.prototype.vb=function(t){return this.Mc.call(t)},d(se,Ot),se.prototype.Ga=function(t){t.append(this.h);var e=this.f;t.append("(");for(var n=0;n<e.length;n++)n&&t.append(","),e[n].Ga(t,0);t.append(")")},se.prototype.vb=function(t){return jt(t,this.b,this.h,this.f,!1).lb(t,this.f).evaluate(t)},se.prototype.sc=function(t,e,n){if(t===this)return!0;for(var i=0;i<this.f.length;i++)if(Rt(this.f[i],t,e,n))return!0;return Rt(jt(e,this.b,this.h,this.f,!0),t,e,n)},se.prototype.lb=function(t,e){for(var n=this.f,i=n,r=0;r<n.length;r++){var o=n[r].lb(t,e);if(n!==i)i[r]=o;else if(o!==n[r]){i=Array(n.length);for(var a=0;a<r;a++)i[a]=n[a];i[r]=o}}return(n=i)===this.f?this:new se(this.b,this.h,n)},d(he,Ot),he.prototype.Ga=function(t,e){0<e&&t.append("("),this.f.Ga(t,0),t.append("?"),this.j.Ga(t,0),t.append(":"),this.h.Ga(t,0),0<e&&t.append(")")},he.prototype.vb=function(t){return this.f.evaluate(t)?this.j.evaluate(t):this.h.evaluate(t)},he.prototype.sc=function(t,e,n){return t===this||Rt(this.f,t,e,n)||Rt(this.j,t,e,n)||Rt(this.h,t,e,n)},he.prototype.lb=function(t,e){var n=this.f.lb(t,e),i=this.j.lb(t,e),r=this.h.lb(t,e);return n===this.f&&i===this.j&&r===this.h?this:new he(this.b,n,i,r)},d(le,Ot),le.prototype.Ga=function(t){switch(typeof this.f){case"number":case"boolean":t.append(this.f.toString());break;case"string":t.append('"'),t.append(V(this.f)),t.append('"');break;default:throw Error("F_UNEXPECTED_STATE")}},le.prototype.vb=function(){return this.f},d(fe,Ot),fe.prototype.Ga=function(t){t.append("("),t.append(V(this.name.name)),t.append(":"),this.value.Ga(t,0),t.append(")")},fe.prototype.vb=function(t){return function(t,e,n){var i="",r=e.match(/^(min|max)-(.*)$/);r&&(i=r[1],e=r[2]);var o=r=null;switch(e){case"width":case"height":case"device-width":case"device-height":case"color":n&&(r=n.evaluate(t))}switch(e){case"width":o=t.gc();break;case"height":o=t.fc();break;case"device-width":o=window.screen.availWidth;break;case"device-height":o=window.screen.availHeight;break;case"color":o=window.screen.pixelDepth}if(null!=o&&null!=r)switch(i){case"min":return o>=r;case"max":return o<=r;default:return o==r}else if(null!=o&&!n)return!!o;return!1}(t,this.name.name,this.value)},fe.prototype.sc=function(t,e,n){return t===this||Rt(this.value,t,e,n)},fe.prototype.lb=function(t,e){var n=this.value.lb(t,e);return n===this.value?this:new fe(this.b,this.name,n)},d(ce,Ot),ce.prototype.Ga=function(t){t.append("$"),t.append(this.index.toString())},ce.prototype.lb=function(t,e){var n=e[this.index];if(!n)throw Error("Parameter missing: "+this.index);return n};var we={};function me(){}function ye(){}function Ee(){}function xe(){if(Se)throw Error("E_INVALID_CALL")}(n=me.prototype).nc=function(t){for(var e=0;e<t.length;e++)t[e].fa(this)},n.Qe=function(){throw Error("E_CSS_EMPTY_NOT_ALLOWED")},n.Re=function(){throw Error("E_CSS_SLASH_NOT_ALLOWED")},n.xd=function(){throw Error("E_CSS_STR_NOT_ALLOWED")},n.mc=function(){throw Error("E_CSS_IDENT_NOT_ALLOWED")},n.Yc=function(){throw Error("E_CSS_NUMERIC_NOT_ALLOWED")},n.Xc=function(){throw Error("E_CSS_NUM_NOT_ALLOWED")},n.Wc=function(t){return this.Xc(t)},n.fe=function(){throw Error("E_CSS_COLOR_NOT_ALLOWED")},n.Zc=function(){throw Error("E_CSS_URL_NOT_ALLOWED")},n.Qb=function(){throw Error("E_CSS_LIST_NOT_ALLOWED")},n.lc=function(){throw Error("E_CSS_COMMA_NOT_ALLOWED")},n.Tb=function(){throw Error("E_CSS_FUNC_NOT_ALLOWED")},n.Vc=function(){throw Error("E_CSS_EXPR_NOT_ALLOWED")},d(ye,me),(n=ye.prototype).nc=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.fa(this);if(e)e[n]=r;else if(i!==r){for(e=Array(t.length),i=0;i<n;i++)e[i]=t[i];e[n]=r}}return e||t},n.xd=function(t){return t},n.mc=function(t){return t},n.Re=function(t){return t},n.Yc=function(t){return t},n.Xc=function(t){return t},n.Wc=function(t){return t},n.fe=function(t){return t},n.Zc=function(t){return t},n.Qb=function(t){var e=this.nc(t.values);return e===t.values?t:new Fe(e)},n.lc=function(t){var e=this.nc(t.values);return e===t.values?t:new Pe(e)},n.Tb=function(t){var e=this.nc(t.values);return e===t.values?t:new De(t.name,e)},n.Vc=function(t){return t},(n=Ee.prototype).toString=function(){var t=new B;return this.Za(t,!0),t.toString()},n.stringValue=function(){var t=new B;return this.Za(t,!1),t.toString()},n.Aa=function(){throw Error("F_ABSTRACT")},n.Za=function(t){t.append("[error]")},n.df=function(){return!1},n.wc=function(){return!1},n.gf=function(){return!1},n.Uf=function(){return!1},n.Rd=function(){return!1},d(xe,Ee),xe.prototype.Aa=function(t){return new le(t,"")},xe.prototype.Za=function(){},xe.prototype.fa=function(t){return t.Qe(this)};var Se=new xe;function Ce(){if(ke)throw Error("E_INVALID_CALL")}d(Ce,Ee),Ce.prototype.Aa=function(t){return new le(t,"/")},Ce.prototype.Za=function(t){t.append("/")},Ce.prototype.fa=function(t){return t.Re(this)};var ke=new Ce;function Ae(t){this.Uc=t}function Te(t){if(this.name=t,we[t])throw Error("E_INVALID_CALL");we[t]=this}function Ne(t){var e=we[t];return e||(e=new Te(t)),e}function Ie(t,e){this.L=t,this.ka=e.toLowerCase()}function _e(t){this.L=t}function Le(t){this.L=t}function je(t){this.b=t}function Oe(t){this.url=t}function Re(t,e,n,i){var r=e.length;e[0].Za(t,i);for(var o=1;o<r;o++)t.append(n),e[o].Za(t,i)}function Fe(t){this.values=t}function Pe(t){this.values=t}function De(t,e){this.name=t,this.values=e}function Me(t){this.Jc=t}function Be(t,e){if(t){if(t.wc())return _t(e,t.ka,!1)*t.L;if(t.gf())return t.L}return 0}d(Ae,Ee),Ae.prototype.Aa=function(t){return new le(t,this.Uc)},Ae.prototype.Za=function(t,e){e?(t.append('"'),t.append(V(this.Uc)),t.append('"')):t.append(this.Uc)},Ae.prototype.fa=function(t){return t.xd(this)},d(Te,Ee),Te.prototype.Aa=function(t){return new le(t,this.name)},Te.prototype.Za=function(t,e){e?t.append(z(this.name)):t.append(this.name)},Te.prototype.fa=function(t){return t.mc(this)},Te.prototype.Uf=function(){return!0},d(Ie,Ee),Ie.prototype.Aa=function(t,e){return this.L?e&&"%"==this.ka?100==this.L?e:new ee(t,e,new le(t,this.L/100)):new re(t,this.L,this.ka):t.b},Ie.prototype.Za=function(t){t.append(this.L.toString()),t.append(this.ka)},Ie.prototype.fa=function(t){return t.Yc(this)},Ie.prototype.wc=function(){return!0},d(_e,Ee),_e.prototype.Aa=function(t){return this.L?1==this.L?t.f:new le(t,this.L):t.b},_e.prototype.Za=function(t){t.append(this.L.toString())},_e.prototype.fa=function(t){return t.Xc(this)},_e.prototype.gf=function(){return!0},d(Le,_e),Le.prototype.fa=function(t){return t.Wc(this)},d(je,Ee),je.prototype.Za=function(t){t.append("#");var e=this.b.toString(16);t.append("000000".substr(e.length)),t.append(e)},je.prototype.fa=function(t){return t.fe(this)},d(Oe,Ee),Oe.prototype.Za=function(t){t.append('url("'),t.append(V(this.url)),t.append('")')},Oe.prototype.fa=function(t){return t.Zc(this)},d(Fe,Ee),Fe.prototype.Za=function(t,e){Re(t,this.values," ",e)},Fe.prototype.fa=function(t){return t.Qb(this)},Fe.prototype.Rd=function(){return!0},d(Pe,Ee),Pe.prototype.Za=function(t,e){Re(t,this.values,",",e)},Pe.prototype.fa=function(t){return t.lc(this)},d(De,Ee),De.prototype.Za=function(t,e){t.append(z(this.name)),t.append("("),Re(t,this.values,",",e),t.append(")")},De.prototype.fa=function(t){return t.Tb(this)},d(Me,Ee),Me.prototype.Aa=function(){return this.Jc},Me.prototype.Za=function(t){t.append("-epubx-expr("),this.Jc.Ga(t,0),t.append(")")},Me.prototype.fa=function(t){return t.Vc(this)},Me.prototype.df=function(){return!0};var Ue=Ne("absolute"),ze=Ne("all"),Ve=Ne("always"),Xe=Ne("auto");Ne("avoid");var He=Ne("balance"),Ge=Ne("balance-all"),Ye=Ne("block"),Ke=Ne("block-end"),We=Ne("block-start"),$e=Ne("both"),Je=Ne("bottom"),Ze=Ne("border-box"),qe=Ne("break-all"),Qe=Ne("break-word"),tn=Ne("crop"),en=Ne("cross");Ne("column");var nn=Ne("exclusive"),rn=Ne("false"),on=Ne("fixed"),an=Ne("flex"),un=Ne("footnote"),sn=Ne("footer"),hn=Ne("header");Ne("hidden");var ln=Ne("horizontal-tb"),fn=Ne("inherit"),cn=Ne("inline"),pn=Ne("inline-block"),bn=Ne("inline-end"),dn=Ne("inline-start"),gn=Ne("landscape"),vn=Ne("left"),wn=Ne("line"),mn=Ne("list-item"),yn=Ne("ltr");Ne("manual");var En=Ne("none"),xn=Ne("normal"),Sn=Ne("oeb-page-foot"),Cn=Ne("oeb-page-head"),kn=Ne("page"),An=Ne("relative"),Tn=Ne("right"),Nn=Ne("same"),In=Ne("scale"),_n=Ne("snap-block");Ne("spread");var Ln=Ne("static"),jn=Ne("rtl"),On=Ne("table"),Rn=Ne("table-caption"),Fn=Ne("table-cell"),Pn=Ne("table-footer-group"),Dn=Ne("table-header-group");Ne("table-row");var Mn=Ne("top"),Bn=Ne("transparent"),Un=Ne("vertical-lr"),zn=Ne("vertical-rl"),Vn=Ne("visible"),Xn=Ne("true"),Hn=new Ie(100,"%"),Gn=new Ie(100,"vw"),Yn=new Ie(100,"vh"),Kn=new Ie(0,"px"),Wn={"font-size":1,color:2};function $n(t,e){return(Wn[t]||Number.MAX_VALUE)-(Wn[e]||Number.MAX_VALUE)}var Jn={SIMPLE_PROPERTY:"SIMPLE_PROPERTY",PREPROCESS_SINGLE_DOCUMENT:"PREPROCESS_SINGLE_DOCUMENT",PREPROCESS_TEXT_CONTENT:"PREPROCESS_TEXT_CONTENT",PREPROCESS_ELEMENT_STYLE:"PREPROCESS_ELEMENT_STYLE",POLYFILLED_INHERITED_PROPS:"POLYFILLED_INHERITED_PROPS",CONFIGURATION:"CONFIGURATION",RESOLVE_TEXT_NODE_BREAKER:"RESOLVE_TEXT_NODE_BREAKER",RESOLVE_FORMATTING_CONTEXT:"RESOLVE_FORMATTING_CONTEXT",RESOLVE_LAYOUT_PROCESSOR:"RESOLVE_LAYOUT_PROCESSOR",POST_LAYOUT_BLOCK:"POST_LAYOUT_BLOCK"},Zn={};function qn(t,e){if(Jn[t]){var n=Zn[t];n||(n=Zn[t]=[]),n.push(e)}else C.b(Error("Skipping unknown plugin hook '"+t+"'."))}function Qn(t){return Zn[t]||[]}b("vivliostyle.plugin.registerHook",qn),b("vivliostyle.plugin.removeHook",function(t,e){if(Jn[t]){var n=Zn[t];if(n){var i=n.indexOf(e);0<=i&&n.splice(i,1)}}else C.b(Error("Ignoring unknown plugin hook '"+t+"'."))});var ti=null,ei=null;function ni(t){if(!ti)throw Error("E_TASK_NO_CONTEXT");ti.name||(ti.name=t);var e=ti;return t=new gi(e,e.top,t),e.top=t,t.b=oi,t}function ii(t){return new bi(t)}function ri(t,e,n){(t=ni(t)).j=n;try{e(t)}catch(e){pi(t.f,e,t)}return t.result()}var oi=1;function ai(){}function ui(t){this.g=t,this.h=1,this.slice=25,this.l=0,this.f=new L,this.b=this.u=null,this.j=!1,this.order=0,ei||(ei=this)}function si(t){if(!t.j){var e=t.f.b[1].b,n=t.g.currentTime();if(null!=t.b){if(n+t.h>t.u)return;clearTimeout(t.b)}(e-=n)<=t.h&&(e=t.h),t.u=n+e,t.b=function(t,e){return setTimeout(t,e)}(function(){t.b=null,null!=t.b&&(clearTimeout(t.b),t.b=null),t.j=!0;try{var e=t.g.currentTime();for(t.l=e+t.slice;t.f.length();){var n=t.f.b[1];if(n.b>e)break;var i=t.f,r=i.b.pop(),o=i.b.length;if(1<o){for(var a=1;;){var u=2*a;if(u>=o)break;if(0<fi(i.b[u],r))u+1<o&&0<fi(i.b[u+1],i.b[u])&&u++;else{if(!(u+1<o&&0<fi(i.b[u+1],r)))break;u++}i.b[a]=i.b[u],a=u}i.b[a]=r}if(!n.g){var s=n.f;n.f=null,s&&s.b==n&&(s.b=null,a=ti,ti=s,wi(s.top,n.result),ti=a)}if((e=t.g.currentTime())>=t.l)break}}catch(t){C.error(t)}t.j=!1,t.f.length()&&si(t)},e)}}function hi(t,e,n){var i=new ci(t,n||"");return i.top=new gi(i,null,"bootstrap"),i.top.b=oi,i.top.then(function(){function t(){i.j=!1;for(var t=l(i.h),e=t.next();!e.done;e=t.next()){e=e.value;try{e()}catch(t){C.error(t)}}}try{e().then(function(e){i.result=e,t()})}catch(e){pi(i,e),t()}}),n=ti,ti=i,t.sb(Si(i.top,"bootstrap")),ti=n,i}function li(t){this.f=t,this.order=this.b=0,this.result=null,this.g=!1}function fi(t,e){return e.b-t.b||e.order-t.order}function ci(t,e){this.f=t,this.name=e,this.h=[],this.g=null,this.j=!0,this.b=this.top=this.l=this.result=null}function pi(t,e,n){if(!(i=e.frameTrace)){for(var i=e.stack?e.stack+"\n\t---- async ---\n":"",r=t.top;r;r=r.parent)i+="\t",i+=r.name,i+="\n";e.frameTrace=i}if(n){for(i=t.top;i&&i!=n;)i=i.parent;i==n&&(t.top=i)}for(t.g=e;t.top&&!t.top.j;)t.top=t.top.parent;t.top?(e=t.g,t.g=null,t.top.j(t.top,e)):t.g&&C.error(t.g,"Unhandled exception in task",t.name)}function bi(t){this.value=t}function di(t){this.b=t}function gi(t,e,n){this.f=t,this.parent=e,this.name=n,this.g=null,this.b=0,this.j=this.h=null}function vi(t){if(!ti)throw Error("F_TASK_NO_CONTEXT");if(t!==ti.top)throw Error("F_TASK_NOT_TOP_FRAME")}function wi(t,e){vi(t),ti.g||(t.g=e),t.b=2;var n=t.parent;if(ti.top=n,t.h){try{t.h(e)}catch(e){pi(t.f,e,n)}t.b=3}}function mi(){var t=ni("Frame.timeSlice"),e=t.f.f;return e.g.currentTime()>=e.l?(C.debug("-- time slice --"),Si(t).sb(!0)):wi(t,!0),t.result()}function yi(t){var e=ni("Frame.sleep");return Si(e).sb(!0,t),e.result()}function Ei(t){var e=ni("Frame.loop");return function n(i){try{for(;i;){var r=t();if(r.Xa())return void r.then(n);r.then(function(t){i=t})}wi(e,!0)}catch(t){pi(e.f,t,e)}}(!0),e.result()}function xi(t){var e=ti;if(!e)throw Error("E_TASK_NO_CONTEXT");return Ei(function(){var n;do{n=new Ci(e,e.top),e.top=n,n.b=oi,t(n),n=n.result()}while(!n.Xa()&&n.get());return n})}function Si(t,e){if(vi(t),t.f.b)throw Error("E_TASK_ALREADY_SUSPENDED");var n=new li(t.f);return t.f.b=n,ti=null,t.f.l=e||null,n}function Ci(t,e){gi.call(this,t,e,"loop")}function ki(t){wi(t,!0)}function Ai(t){wi(t,!1)}function Ti(t,e){this.fetch=t,this.name=e,this.f=!1,this.b=this.h=null,this.g=[]}function Ni(t){if(!t.length)return ii(!0);if(1==t.length)return t[0].get().Ec(!0);var e=ni("waitForFetches"),n=0;return Ei(function(){for(;n<t.length;){var e=t[n++];if(!e.f)return e.get().Ec(!0)}return ii(!1)}).then(function(){wi(e,!0)}),e.result()}function Ii(t,e){var n=null,i=null;"img"==t.localName&&(n=t.getAttribute("width"),i=t.getAttribute("height"));var r=new Ti(function(){function r(e){u||(u=!0,"img"==t.localName&&(n||t.removeAttribute("width"),i||t.removeAttribute("height")),a.sb(e?e.type:"timeout"))}var o=ni("loadImage"),a=Si(o,t),u=!1;return t.addEventListener("load",r,!1),t.addEventListener("error",r,!1),t.addEventListener("abort",r,!1),"http://www.w3.org/2000/svg"==t.namespaceURI?(t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),setTimeout(r,300)):t.src=e,o.result()},"loadElement "+e);return r.start(),r}function _i(t){return(t=t.substr(1)).match(/^[^0-9a-fA-F\n\r]$/)?t:(t=parseInt(t,16),isNaN(t)?"":65535>=t?String.fromCharCode(t):1114111>=t?String.fromCharCode(55296|t>>10&1023,56320|1023&t):"�")}function Li(t){return t.replace(/\\([0-9a-fA-F]{0,6}(\r\n|[ \n\r\t\f])?|[^0-9a-fA-F\n\r])/g,_i)}function ji(){this.type=0,this.b=!1,this.L=0,this.text="",this.position=0}function Oi(t,e){var n,i=Array(128);for(n=0;128>n;n++)i[n]=t;for(i.NaN=35==t?35:72,n=0;n<e.length;n+=2)i[e[n]]=e[n+1];return i}ai.prototype.currentTime=function(){return(new Date).valueOf()},ui.prototype.sb=function(t,e){var n=this.g.currentTime();t.order=this.order++,t.b=n+(e||0);t:{for(var i=(n=this.f).b.length;1<i;){var r=Math.floor(i/2),o=n.b[r];if(0<fi(o,t)){n.b[i]=t;break t}n.b[i]=o,i=r}n.b[1]=t}si(this)},li.prototype.sb=function(t,e){this.result=t,this.f.f.sb(this,e)},ci.prototype.join=function(){var t=ni("Task.join");if(this.j){var e=Si(t,this),n=this;!function(t,e){t.h.push(e)}(this,function(){e.sb(n.result)})}else wi(t,this.result);return t.result()},(n=bi.prototype).then=function(t){t(this.value)},n.ea=function(t){return t(this.value)},n.Ec=function(t){return new bi(t)},n.La=function(t){wi(t,this.value)},n.Xa=function(){return!1},n.get=function(){return this.value},(n=di.prototype).then=function(t){this.b.then(t)},n.ea=function(t){if(this.Xa()){var e=new gi(this.b.f,this.b.parent,"AsyncResult.thenAsync");return e.b=oi,this.b.parent=e,this.b.then(function(n){t(n).then(function(t){wi(e,t)})}),e.result()}return t(this.b.g)},n.Ec=function(t){return this.Xa()?this.ea(function(){return new bi(t)}):new bi(t)},n.La=function(t){this.Xa()?this.then(function(e){wi(t,e)}):wi(t,this.b.g)},n.Xa=function(){return this.b.b==oi},n.get=function(){if(this.Xa())throw Error("Result is pending");return this.b.g},gi.prototype.result=function(){return new di(this)},gi.prototype.then=function(t){switch(this.b){case oi:if(this.h)throw Error("F_TASK_FRAME_ALREADY_HAS_CALLBACK");this.h=t;break;case 2:var e=this.f,n=this.parent;try{t(this.g),this.b=3}catch(t){this.b=3,pi(e,t,n)}break;case 3:throw Error("F_TASK_DEAD_FRAME");default:throw Error("F_TASK_UNEXPECTED_FRAME_STATE "+this.b)}},d(Ci,gi),Ti.prototype.start=function(){if(!this.b){var t=this;this.b=hi(ti.f,function(){var e=ni("Fetcher.run");return t.fetch().then(function(n){var i=t.g;if(t.f=!0,t.h=n,t.b=null,t.g=[],i)for(var r=0;r<i.length;r++)try{i[r](n)}catch(t){C.error(t,"Error:")}wi(e,n)}),e.result()},this.name)}},Ti.prototype.get=function(){return this.f?ii(this.h):(this.start(),this.b.join())};var Ri=[72,72,72,72,72,72,72,72,72,1,1,72,1,1,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,1,4,34,6,7,8,9,33,10,11,12,13,14,15,16,17,2,2,2,2,2,2,2,2,2,2,18,19,20,21,22,23,24,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,25,29,26,30,3,72,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,27,31,28,32,72];Ri.NaN=80;var Fi=[43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,43,52,43,43,43,43,39,43,43,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43,43,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,44,43,43,39,43,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,43,43,43,43,43];Fi.NaN=43;var Pi=[72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,72,78,59,72,59,59,59,59,59,59,59,59,59,59,72,72,72,72,72,72,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,61,72,72,78,72,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,78,72,72,72,72,72];Fi.NaN=43;var Di=[35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,35,57,59,35,58,58,58,58,58,58,58,58,58,58,35,35,35,35,35,35,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,61,35,35,60,35,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,35,35,35,35,35];Di.NaN=35;var Mi=[45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,73,45,45,45,45,45,45,45,53,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45,45,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,44,45,45,39,45,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,39,45,45,45,45,45];Mi.NaN=45;var Bi=[37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,41,37,37,37,37,37,37,37,37,42,37,39,39,39,39,39,39,39,39,39,39,37,37,37,37,37,37,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,40,37,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,37,37,37,37,37];Bi.NaN=37;var Ui=[38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,38,41,38,38,38,38,38,38,38,38,38,38,39,39,39,39,39,39,39,39,39,39,38,38,38,38,38,38,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,40,38,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,40,38,38,38,38,38];Ui.NaN=38;var zi=Oi(35,[61,36]),Vi=Oi(35,[58,77]),Xi=Oi(35,[61,36,124,50]),Hi=Oi(35,[38,51]),Gi=Oi(35,[42,54]),Yi=Oi(39,[42,55]),Ki=Oi(54,[42,55,47,56]),Wi=Oi(62,[62,56]),$i=Oi(35,[61,36,33,70]),Ji=Oi(62,[45,71]),Zi=Oi(63,[45,56]),qi=Oi(76,[9,72,10,72,13,72,32,72]),Qi=Oi(39,[39,46,10,72,13,72,92,48]),tr=Oi(39,[34,46,10,72,13,72,92,49]),er=Oi(39,[39,47,10,74,13,74,92,48]),nr=Oi(39,[34,47,10,74,13,74,92,49]),ir=Oi(64,[9,39,32,39,34,66,39,65,41,72,10,39,13,39]),rr=Oi(39,[41,67,9,79,10,79,13,79,32,79,92,75,40,72,91,72,93,72,123,72,125,72,NaN,67]),or=Oi(39,[39,68,10,74,13,74,92,75,NaN,67]),ar=Oi(39,[34,68,10,74,13,74,92,75,NaN,67]),ur=Oi(72,[9,39,10,39,13,39,32,39,41,69]);function sr(t,e){this.l=e,this.g=15,this.u=t,this.j=Array(this.g+1),this.b=-1;for(var n=this.position=this.f=this.h=0;n<=this.g;n++)this.j[n]=new ji}function hr(t){return t.h==t.f&&pr(t),t.j[t.f]}function lr(t,e){return(t.h-t.f&t.g)<=e&&pr(t),t.j[t.f+e&t.g]}function fr(t){t.f=t.f+1&t.g}function cr(t){if(0>t.b)throw Error("F_CSSTOK_BAD_CALL reset");t.f=t.b,t.b=-1}function pr(t){var e=t.h,n=0<=t.b?t.b:t.f,i=t.g;if(e>=n?n+=i:n--,n==e){if(0>t.b)throw Error("F_CSSTOK_INTERNAL");e=2*(t.g+1)-1,n=Array(e+1),i=t.b;for(var r=0;i!=t.h;)n[r]=t.j[i],i==t.f&&(t.f=r),i=i+1&t.g,r++;for(t.b=0,t.h=r,t.g=e,t.j=n;r<=e;)n[r++]=new ji;e=t.h,n=i=t.g}r=Ri;for(var o=t.u,a=t.position,u=t.j,s=0,h=0,l="",f=0,c=!1,p=u[e],b=-9;;){var d=o.charCodeAt(a);switch(r[d]||r[65]){case 72:s=51,l=isNaN(d)?"E_CSS_UNEXPECTED_EOF":"E_CSS_UNEXPECTED_CHAR",a++;break;case 1:a++,c=!0;continue;case 2:h=a++,r=Bi;continue;case 3:s=1,h=a++,r=Fi;continue;case 4:h=a++,s=31,r=zi;continue;case 33:s=2,h=++a,r=Qi;continue;case 34:s=2,h=++a,r=tr;continue;case 6:h=++a,s=7,r=Fi;continue;case 7:h=a++,s=32,r=zi;continue;case 8:h=a++,s=21;break;case 9:h=a++,s=32,r=Hi;continue;case 10:h=a++,s=10;break;case 11:h=a++,s=11;break;case 12:h=a++,s=36,r=zi;continue;case 13:h=a++,s=23;break;case 14:h=a++,s=16;break;case 15:s=24,h=a++,r=Di;continue;case 16:h=a++,r=Pi;continue;case 78:h=a++,s=9,r=Fi;continue;case 17:h=a++,s=19,r=Gi;continue;case 18:h=a++,s=18,r=Vi;continue;case 77:a++,s=50;break;case 19:h=a++,s=17;break;case 20:h=a++,s=38,r=$i;continue;case 21:h=a++,s=39,r=zi;continue;case 22:h=a++,s=37,r=zi;continue;case 23:h=a++,s=22;break;case 24:h=++a,s=20,r=Fi;continue;case 25:h=a++,s=14;break;case 26:h=a++,s=15;break;case 27:h=a++,s=12;break;case 28:h=a++,s=13;break;case 29:b=h=a++,s=1,r=qi;continue;case 30:h=a++,s=33,r=zi;continue;case 31:h=a++,s=34,r=Xi;continue;case 32:h=a++,s=35,r=zi;continue;case 35:break;case 36:a++,s=s+41-31;break;case 37:s=5,f=parseInt(o.substring(h,a),10);break;case 38:s=4,f=parseFloat(o.substring(h,a));break;case 39:a++;continue;case 40:s=3,f=parseFloat(o.substring(h,a)),h=a++,r=Fi;continue;case 41:s=3,f=parseFloat(o.substring(h,a)),l="%",h=a++;break;case 42:a++,r=Ui;continue;case 43:l=o.substring(h,a);break;case 44:b=a++,r=qi;continue;case 45:l=Li(o.substring(h,a));break;case 46:l=o.substring(h,a),a++;break;case 47:l=Li(o.substring(h,a)),a++;break;case 48:b=a,a+=2,r=er;continue;case 49:b=a,a+=2,r=nr;continue;case 50:a++,s=25;break;case 51:a++,s=26;break;case 52:if(l=o.substring(h,a),1==s){if(a++,"url"==l.toLowerCase()){r=ir;continue}s=6}break;case 53:if(l=Li(o.substring(h,a)),1==s){if(a++,"url"==l.toLowerCase()){r=ir;continue}s=6}break;case 54:r=Yi,a++;continue;case 55:r=Ki,a++;continue;case 56:r=Ri,a++;continue;case 57:r=Wi,a++;continue;case 58:s=5,r=Bi,a++;continue;case 59:s=4,r=Ui,a++;continue;case 60:s=1,r=Fi,a++;continue;case 61:s=1,r=qi,b=a++;continue;case 62:a--;break;case 63:a-=2;break;case 64:h=a++,r=rr;continue;case 65:h=++a,r=or;continue;case 66:h=++a,r=ar;continue;case 67:s=8,l=Li(o.substring(h,a)),a++;break;case 69:a++;break;case 70:r=Ji,a++;continue;case 71:r=Zi,a++;continue;case 79:if(8>a-b&&o.substring(b+1,a+1).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])|[ \t]$/)){a++;continue}case 68:s=8,l=Li(o.substring(h,a)),a++,r=ur;continue;case 74:if(9>++a-b&&o.substring(b+1,a).match(/^[0-9a-fA-F]{0,6}(\r\n|[\n\r])$/))continue;s=51,l="E_CSS_UNEXPECTED_NEWLINE";break;case 73:if(9>a-b&&o.substring(b+1,a+1).match(/^[0-9a-fA-F]{0,6}[ \t]$/)){a++;continue}l=Li(o.substring(h,a));break;case 75:b=a++;continue;case 76:a++,r=Mi;continue;default:r!==Ri?(s=51,l="E_CSS_UNEXPECTED_STATE"):(h=a,s=0)}if(p.type=s,p.b=c,p.L=f,p.text=l,p.position=h,++e>=n)break;r=Ri,c=!1,p=u[e&i]}t.position=a,t.h=e&i}function br(t,e,n,i,r){var o=ni("ajax"),a=new XMLHttpRequest,u=Si(o,a),s={status:0,url:t,contentType:null,responseText:null,responseXML:null,Wd:null};a.open(n||"GET",t,!0),e&&(a.responseType=e),a.onreadystatechange=function(){if(4===a.readyState){if(s.status=a.status,200==s.status||!s.status)if(e&&"document"!==e||!a.responseXML||"parsererror"==a.responseXML.documentElement.localName)if((!e||"document"===e)&&a.response instanceof HTMLDocument)s.responseXML=a.response,s.contentType=a.response.contentType;else{var n=a.response;e&&"text"!==e||"string"!=typeof n?n?s.Wd="string"==typeof n?dr([n]):n:C.b("Unexpected empty success response for",t):s.responseText=n,(n=a.getResponseHeader("Content-Type"))&&(s.contentType=n.replace(/(.*);.*$/,"$1"))}else s.responseXML=a.responseXML,s.contentType=a.responseXML.contentType;u.sb(s)}};try{i?(a.setRequestHeader("Content-Type",r||"text/plain; charset=UTF-8"),a.send(i)):(/^file:|^https?:\/\/[^\/]+\.githubusercontent\.com/.test(t)&&(/\/aozorabunko\/[^\/]+\/cards\/[^\/]+\/files\/[^\/.]+\.html$/.test(t)?a.overrideMimeType("text/html; charset=Shift_JIS"):/\.(html|htm)$/.test(t)?a.overrideMimeType("text/html; charset=UTF-8"):/\.(xhtml|xht|xml|opf)$/.test(t)?a.overrideMimeType("application/xml; charset=UTF-8"):/\.(txt|css)$/.test(t)?a.overrideMimeType("text/plain; charset=UTF-8"):a.overrideMimeType("text/html; charset=UTF-8")),a.send(null))}catch(e){C.b(e,"Error fetching "+t),u.sb(s)}return o.result()}function dr(t){if(e=window.WebKitBlobBuilder||window.MSBlobBuilder){for(var e=new e,n=0;n<t.length;n++)e.append(t[n]);return e.getBlob("application/octet-stream")}return new Blob(t,{type:"application/octet-stream"})}function gr(t,e){this.ca=t,this.type=e,this.h={},this.j={}}function vr(t){return ii((t=t.responseText)?JSON.parse(t):null)}function wr(t){var e=parseInt(t,16);if(isNaN(e))throw Error("E_CSS_COLOR");if(6==t.length)return new je(e);if(3==t.length)return new je(15&e|(15&e)<<4|(240&e)<<4|(240&e)<<8|(3840&e)<<8|(3840&e)<<12);throw Error("E_CSS_COLOR")}function mr(t){this.f=t,this.pb="Author"}function yr(t){switch(t.pb){case"UA":return 0;case"User":return 100663296;default:return 83886080}}function Er(t){switch(t.pb){case"UA":return 0;case"User":return 16777216;default:return 33554432}}function xr(){mr.call(this,null),this.g=[],this.b=null}function Sr(t,e){t.g.push(t.b),t.b=e}function Cr(t,e,n){mr.call(this,t),this.N=n,this.J=0,(this.oa=e)&&(this.pb=e.pb)}function kr(t,e,n){Cr.call(this,t,e,n)}function Ar(t,e){t.error(e,t.fd())}function Tr(t,e){Ar(t,e),Sr(t.oa,new Cr(t.f,t.oa,!1))}sr.prototype.error=function(t,e,n){this.l&&this.l.error(n,e)},gr.prototype.load=function(t,e,n){t=k(t);var i=this.h[t];return void 0!==i?ii(i):this.fetch(t,e,n).get()},gr.prototype.fetch=function(t,e,n){if(t=k(t),this.h[t])return null;if(!(r=this.j[t])){var i=this,r=new Ti(function(){return function(t,e,n,i){var r=ni("fetch");return br(e,t.type).then(function(o){if(n&&400<=o.status)throw Error(i||"Failed to fetch required resource: "+e);t.ca(o,t).then(function(n){delete t.j[e],t.h[e]=n,wi(r,n)})}),r.result()}(i,t,e,n)},"Fetch "+t);i.j[t]=r,r.start()}return r},gr.prototype.get=function(t){return this.h[k(t)]},(n=mr.prototype).fd=function(){return null},n.ma=function(){return this.f},n.error=function(){},n.Tc=function(t){this.pb=t},n.Sb=function(){},n.me=function(){},n.nd=function(){},n.od=function(){},n.xe=function(){},n.Dd=function(){},n.$b=function(){},n.le=function(){},n.ke=function(){},n.re=function(){},n.Pc=function(){},n.Pb=function(){},n.Zd=function(){},n.rd=function(){},n.ce=function(){},n.Xd=function(){},n.be=function(){},n.Sc=function(){},n.Oe=function(){},n.Cc=function(){},n.Yd=function(){},n.ae=function(){},n.$d=function(){},n.vd=function(){},n.ud=function(){},n.Ka=function(){},n.Mb=function(){},n.ac=function(){},n.sd=function(){},n.Kd=function(){},d(xr,mr),(n=xr.prototype).fd=function(){return null},n.ma=function(){return this.b.ma()},n.error=function(t,e){this.b.error(t,e)},n.Tc=function(t){mr.prototype.Tc.call(this,t),0<this.g.length&&(this.b=this.g[0],this.g=[]),this.b.Tc(t)},n.Sb=function(t,e){this.b.Sb(t,e)},n.me=function(t){this.b.me(t)},n.nd=function(t,e){this.b.nd(t,e)},n.od=function(t,e){this.b.od(t,e)},n.xe=function(t){this.b.xe(t)},n.Dd=function(t,e,n,i){this.b.Dd(t,e,n,i)},n.$b=function(){this.b.$b()},n.le=function(){this.b.le()},n.ke=function(){this.b.ke()},n.re=function(){this.b.re()},n.Pc=function(){this.b.Pc()},n.Pb=function(){this.b.Pb()},n.Zd=function(){this.b.Zd()},n.rd=function(t){this.b.rd(t)},n.ce=function(){this.b.ce()},n.Xd=function(){this.b.Xd()},n.be=function(){this.b.be()},n.Sc=function(){this.b.Sc()},n.Oe=function(t){this.b.Oe(t)},n.Cc=function(t){this.b.Cc(t)},n.Yd=function(t){this.b.Yd(t)},n.ae=function(){this.b.ae()},n.$d=function(t,e,n){this.b.$d(t,e,n)},n.vd=function(t,e,n){this.b.vd(t,e,n)},n.ud=function(t,e,n){this.b.ud(t,e,n)},n.Ka=function(){this.b.Ka()},n.Mb=function(t,e,n){this.b.Mb(t,e,n)},n.ac=function(){this.b.ac()},n.sd=function(t){this.b.sd(t)},n.Kd=function(){this.b.Kd()},d(Cr,mr),Cr.prototype.fd=function(){return this.oa.fd()},Cr.prototype.error=function(t){C.b(t)},Cr.prototype.Ka=function(){this.J++},Cr.prototype.ac=function(){if(!--this.J&&!this.N){var t=this.oa;t.b=t.g.pop()}},d(kr,Cr),(n=kr.prototype).Pb=function(){Tr(this,"E_CSS_UNEXPECTED_SELECTOR")},n.Zd=function(){Tr(this,"E_CSS_UNEXPECTED_FONT_FACE")},n.rd=function(){Tr(this,"E_CSS_UNEXPECTED_FOOTNOTE")},n.ce=function(){Tr(this,"E_CSS_UNEXPECTED_VIEWPORT")},n.Xd=function(){Tr(this,"E_CSS_UNEXPECTED_DEFINE")},n.be=function(){Tr(this,"E_CSS_UNEXPECTED_REGION")},n.Sc=function(){Tr(this,"E_CSS_UNEXPECTED_PAGE")},n.Cc=function(){Tr(this,"E_CSS_UNEXPECTED_WHEN")},n.Yd=function(){Tr(this,"E_CSS_UNEXPECTED_FLOW")},n.ae=function(){Tr(this,"E_CSS_UNEXPECTED_PAGE_TEMPLATE")},n.$d=function(){Tr(this,"E_CSS_UNEXPECTED_PAGE_MASTER")},n.vd=function(){Tr(this,"E_CSS_UNEXPECTED_PARTITION")},n.ud=function(){Tr(this,"E_CSS_UNEXPECTED_PARTITION_GROUP")},n.sd=function(){Tr(this,"E_CSS_UNEXPECTED_SELECTOR_FUNC")},n.Kd=function(){Tr(this,"E_CSS_UNEXPECTED_END_SELECTOR_FUNC")},n.Mb=function(){this.error("E_CSS_UNEXPECTED_PROPERTY",this.fd())};var Nr=[],Ir=[],_r=[],Lr=[],jr=[],Or=[],Rr=[],Fr=[],Pr=[],Dr=[],Mr=[],Br=[],Ur=[];function zr(t,e,n,i){this.b=t,this.f=e,this.u=n,this.Z=i,this.F=[],this.N={},this.g=this.H=null,this.D=!1,this.j=2,this.result=null,this.G=!1,this.A=this.J=null,this.l=[],this.h=[],this.R=this.Y=!1}function Vr(t,e){for(var n=[],i=t.F;n.push(i[e++]),e!=i.length;)if(","!=i[e++])throw Error("Unexpected state");return n}function Xr(t,e,n){var i,r=t.F,o=r.length;do{i=r[--o]}while(void 0!==i&&"string"!=typeof i);var a=r.length-(o+1);if(1<a&&r.splice(o+1,a,new Fe(r.slice(o+1,r.length))),","==e)return null;o++;do{i=r[--o]}while(void 0!==i&&("string"!=typeof i||","==i));return a=r.length-(o+1),"("==i?")"!=e?(t.u.error("E_CSS_MISMATCHED_C_PAR",n),t.b=Mr,null):(t=new De(r[o-1],Vr(t,o+1)),r.splice(o-1,a+2,t),null):";"!=e||0<=o?(t.u.error("E_CSS_UNEXPECTED_VAL_END",n),t.b=Mr,null):1<a?new Pe(Vr(t,o+1)):r[0]}function Hr(t,e,n){t.b=t.g?Mr:Dr,t.u.error(e,n)}function Gr(t,e,n){for(var i,r=t.F,o=t.u,a=r.pop();;){var u=r.pop();if(11==e){for(i=[a];16==u;)i.unshift(r.pop()),u=r.pop();if("string"==typeof u){if("{"==u){for(;2<=i.length;)t=i.shift(),n=i.shift(),t=new Yt(o.ma(),t,n),i.unshift(t);return r.push(new Me(i[0])),!0}if("("==u){e=r.pop(),a=r.pop(),a=new se(o.ma(),xt(a,e),i),e=0;continue}}if(10==u){a.ff()&&(a=new fe(o.ma(),a,null)),e=0;continue}}else if("string"==typeof u){r.push(u);break}if(0>u)if(-31==u)a=new zt(o.ma(),a);else{if(-24!=u)return Hr(t,"F_UNEXPECTED_STATE",n),!1;a=new Vt(o.ma(),a)}else{if(Ur[e]>Ur[u]){r.push(u);break}switch(i=r.pop(),u){case 26:a=new Xt(o.ma(),i,a);break;case 52:a=new Ht(o.ma(),i,a);break;case 25:a=new Gt(o.ma(),i,a);break;case 38:a=new Kt(o.ma(),i,a);break;case 37:a=new $t(o.ma(),i,a);break;case 48:a=new Wt(o.ma(),i,a);break;case 47:a=new Jt(o.ma(),i,a);break;case 39:case 49:a=new Zt(o.ma(),i,a);break;case 41:a=new qt(o.ma(),i,a);break;case 23:a=new Qt(o.ma(),i,a);break;case 24:a=new te(o.ma(),i,a);break;case 36:a=new ee(o.ma(),i,a);break;case 19:a=new ne(o.ma(),i,a);break;case 21:a=new ie(o.ma(),i,a);break;case 18:if(!(1<r.length))return Hr(t,"E_CSS_EXPR_COND",n),!1;switch(r[r.length-1]){case 22:r.pop(),a=new he(o.ma(),r.pop(),i,a);break;case 10:if(!i.ff())return Hr(t,"E_CSS_MEDIA_TEST",n),!1;a=new fe(o.ma(),i,a)}break;case 22:if(18!=e)return Hr(t,"E_CSS_EXPR_COND",n),!1;case 10:return r.push(i),r.push(u),r.push(a),!1;default:return Hr(t,"F_UNEXPECTED_STATE",n),!1}}}return r.push(a),!1}function Yr(t){for(var e=[];;){var n=hr(t.f);switch(n.type){case 1:e.push(n.text);break;case 23:e.push("+");break;case 4:case 5:e.push(n.L);break;default:return e}fr(t.f)}}function Kr(t){var e=!1;if(23===(i=hr(t.f)).type)e=!0,fr(t.f),i=hr(t.f);else if(1===i.type&&("even"===i.text||"odd"===i.text))return fr(t.f),[2,"odd"===i.text?1:0];switch(i.type){case 3:if(e&&0>i.L)break;case 1:if(e&&"-"===i.text.charAt(0))break;if("n"===i.text||"-n"===i.text){if(e&&i.b)break;e="-n"===i.text?-1:1,3===i.type&&(e=i.L);var n=0;fr(t.f);var i,r=24===(i=hr(t.f)).type,o=23===i.type||r;if(o&&(fr(t.f),i=hr(t.f)),5===i.type){if(1/(n=i.L)==-1/0){if(n=0,o)break}else if(0>n){if(o)break}else if(0<=n&&!o)break;fr(t.f)}else if(o)break;return[e,r&&0<n?-n:n]}if("n-"===i.text||"-n-"===i.text){if(!(e&&i.b||(e="-n-"===i.text?-1:1,3===i.type&&(e=i.L),fr(t.f),5!==(i=hr(t.f)).type||0>i.L||1/i.L==-1/0)))return fr(t.f),[e,i.L]}else{if(n=i.text.match(/^n(-[0-9]+)$/)){if(e&&i.b)break;return fr(t.f),[3===i.type?i.L:1,parseInt(n[1],10)]}if(n=i.text.match(/^-n(-[0-9]+)$/))return fr(t.f),[-1,parseInt(n[1],10)]}break;case 5:if(!e||!(i.b||0>i.L))return fr(t.f),[0,i.L]}return null}function Wr(t){switch(t.h[t.h.length-1]){case"[selector]":case"font-face":case"-epubx-flow":case"-epubx-viewport":case"-epubx-define":case"-adapt-footnote-area":return!0}return!1}function $r(t,e,n,i,r,o){var a,u,s,h,l=t.u,f=t.f,c=t.F;r&&(t.j=2,t.F.push("{"));t:for(;0<e;--e)switch(a=hr(f),t.b[a.type]){case 28:if(18!=lr(f,1).type){Wr(t)?(l.error("E_CSS_COLON_EXPECTED",lr(f,1)),t.b=Mr):(t.b=Or,l.Pb());continue}if(!((u=lr(f,2)).b||1!=u.type&&6!=u.type)){if(0<=f.b)throw Error("F_CSSTOK_BAD_CALL mark");f.b=f.f}t.g=a.text,t.D=!1,fr(f),fr(f),t.b=Rr,c.splice(0,c.length);continue;case 46:if(18!=lr(f,1).type){t.b=Mr,l.error("E_CSS_COLON_EXPECTED",lr(f,1));continue}t.g=a.text,t.D=!1,fr(f),fr(f),t.b=Rr,c.splice(0,c.length);continue;case 29:t.b=Or,l.Pb();continue;case 1:if(!a.b){t.b=Br,l.error("E_CSS_SPACE_EXPECTED",a);continue}l.$b();case 2:if(34==lr(f,1).type)if(fr(f),fr(f),null!=(s=t.N[a.text]))switch((a=hr(f)).type){case 1:l.Sb(s,a.text),t.b=o?Lr:_r,fr(f);break;case 36:l.Sb(s,null),t.b=o?Lr:_r,fr(f);break;default:t.b=Dr,l.error("E_CSS_NAMESPACE",a)}else t.b=Dr,l.error("E_CSS_UNDECLARED_PREFIX",a);else l.Sb(t.H,a.text),t.b=o?Lr:_r,fr(f);continue;case 3:if(!a.b){t.b=Br,l.error("E_CSS_SPACE_EXPECTED",a);continue}l.$b();case 4:if(34==lr(f,1).type)switch(fr(f),fr(f),(a=hr(f)).type){case 1:l.Sb(null,a.text),t.b=o?Lr:_r,fr(f);break;case 36:l.Sb(null,null),t.b=o?Lr:_r,fr(f);break;default:t.b=Dr,l.error("E_CSS_NAMESPACE",a)}else l.Sb(t.H,null),t.b=o?Lr:_r,fr(f);continue;case 5:a.b&&l.$b();case 6:l.xe(a.text),t.b=o?Lr:_r,fr(f);continue;case 7:a.b&&l.$b();case 8:l.me(a.text),t.b=o?Lr:_r,fr(f);continue;case 55:a.b&&l.$b();case 14:fr(f);e:switch((a=hr(f)).type){case 1:l.nd(a.text,null),fr(f),t.b=o?Lr:_r;continue;case 6:switch(u=a.text,fr(f),u){case"not":t.b=Or,l.sd("not"),$r(t,Number.POSITIVE_INFINITY,!1,!1,!1,!0)?t.b=_r:t.b=Br;break t;case"lang":case"href-epub-type":if(1===(a=hr(f)).type){s=[a.text],fr(f);break}break e;case"nth-child":case"nth-of-type":case"nth-last-child":case"nth-last-of-type":if(s=Kr(t))break;break e;default:s=Yr(t)}if(11==(a=hr(f)).type){l.nd(u,s),fr(f),t.b=o?Lr:_r;continue}}l.error("E_CSS_PSEUDOCLASS_SYNTAX",a),t.b=Dr;continue;case 42:switch(fr(f),(a=hr(f)).type){case 1:l.od(a.text,null),t.b=o?Lr:_r,fr(f);continue;case 6:if(u=a.text,fr(f),"nth-fragment"==u){if(!(s=Kr(t)))break}else s=Yr(t);if(11==(a=hr(f)).type){l.od(u,s),t.b=o?Lr:_r,fr(f);continue}}l.error("E_CSS_PSEUDOELEM_SYNTAX",a),t.b=Dr;continue;case 9:a.b&&l.$b();case 10:if(fr(f),1==(a=hr(f)).type)u=a.text,fr(f);else if(36==a.type)u=null,fr(f);else{if(34!=a.type){t.b=Br,l.error("E_CSS_ATTR",a),fr(f);continue}u=""}if(34==(a=hr(f)).type){if(null==(s=u?t.N[u]:u)){t.b=Br,l.error("E_CSS_UNDECLARED_PREFIX",a),fr(f);continue}if(fr(f),1!=(a=hr(f)).type){t.b=Br,l.error("E_CSS_ATTR_NAME_EXPECTED",a);continue}u=a.text,fr(f),a=hr(f)}else s="";switch(a.type){case 39:case 45:case 44:case 43:case 42:case 46:case 50:h=a.type,fr(f),a=hr(f);break;case 15:l.Dd(s,u,0,null),t.b=o?Lr:_r,fr(f);continue;default:t.b=Br,l.error("E_CSS_ATTR_OP_EXPECTED",a);continue}switch(a.type){case 1:case 2:l.Dd(s,u,h,a.text),fr(f),a=hr(f);break;default:t.b=Br,l.error("E_CSS_ATTR_VAL_EXPECTED",a);continue}if(15!=a.type){t.b=Br,l.error("E_CSS_ATTR",a);continue}t.b=o?Lr:_r,fr(f);continue;case 11:l.le(),t.b=jr,fr(f);continue;case 12:l.ke(),t.b=jr,fr(f);continue;case 56:l.re(),t.b=jr,fr(f);continue;case 13:t.Y?(t.h.push("-epubx-region"),t.Y=!1):t.R?(t.h.push("page"),t.R=!1):t.h.push("[selector]"),l.Ka(),t.b=Nr,fr(f);continue;case 41:l.Pc(),t.b=Or,fr(f);continue;case 15:c.push(Ne(a.text)),fr(f);continue;case 16:try{c.push(wr(a.text))}catch(e){l.error("E_CSS_COLOR",a),t.b=Dr}fr(f);continue;case 17:c.push(new _e(a.L)),fr(f);continue;case 18:c.push(new Le(a.L)),fr(f);continue;case 19:c.push(new Ie(a.L,a.text)),fr(f);continue;case 20:c.push(new Ae(a.text)),fr(f);continue;case 21:c.push(new Oe(N(a.text,t.Z))),fr(f);continue;case 22:Xr(t,",",a),c.push(","),fr(f);continue;case 23:c.push(ke),fr(f);continue;case 24:"-epubx-expr"==(u=a.text.toLowerCase())?(t.b=Fr,t.j=0,c.push("{")):(c.push(u),c.push("(")),fr(f);continue;case 25:Xr(t,")",a),fr(f);continue;case 47:if(fr(f),a=hr(f),u=lr(f,1),1==a.type&&"important"==a.text.toLowerCase()&&(17==u.type||0==u.type||13==u.type)){fr(f),t.D=!0;continue}Hr(t,"E_CSS_SYNTAX",a);continue;case 54:switch((u=lr(f,1)).type){case 4:case 3:case 5:if(!u.b){fr(f);continue}}t.b===Rr&&0<=f.b?(cr(f),t.b=Or,l.Pb()):Hr(t,"E_CSS_UNEXPECTED_PLUS",a);continue;case 26:fr(f);case 48:f.b=-1,(u=Xr(t,";",a))&&t.g&&l.Mb(t.g,u,t.D),t.b=i?Ir:Nr;continue;case 44:if(fr(f),f.b=-1,u=Xr(t,";",a),n)return t.result=u,!0;if(t.g&&u&&l.Mb(t.g,u,t.D),i)return!0;Hr(t,"E_CSS_SYNTAX",a);continue;case 31:9==(u=lr(f,1)).type?(10!=lr(f,2).type||lr(f,2).b?(c.push(new oe(l.ma(),xt(a.text,u.text))),t.b=Pr):(c.push(a.text,u.text,"("),fr(f)),fr(f)):(2==t.j||3==t.j?"not"==a.text.toLowerCase()?(fr(f),c.push(new ae(l.ma(),!0,u.text))):("only"==a.text.toLowerCase()&&(fr(f),a=u),c.push(new ae(l.ma(),!1,a.text))):c.push(new oe(l.ma(),a.text)),t.b=Pr),fr(f);continue;case 38:c.push(null,a.text,"("),fr(f);continue;case 32:c.push(new le(l.ma(),a.L)),fr(f),t.b=Pr;continue;case 33:"%"==(u=a.text)&&(u=t.g&&t.g.match(/height|^(top|bottom)$/)?"vh":"vw"),c.push(new re(l.ma(),a.L,u)),fr(f),t.b=Pr;continue;case 34:c.push(new le(l.ma(),a.text)),fr(f),t.b=Pr;continue;case 35:fr(f),5!=(a=hr(f)).type||a.b?Hr(t,"E_CSS_SYNTAX",a):(c.push(new ce(l.ma(),a.L)),fr(f),t.b=Pr);continue;case 36:c.push(-a.type),fr(f);continue;case 37:t.b=Fr,Gr(t,a.type,a),c.push(a.type),fr(f);continue;case 45:"and"==a.text.toLowerCase()?(t.b=Fr,Gr(t,52,a),c.push(52),fr(f)):Hr(t,"E_CSS_SYNTAX",a);continue;case 39:Gr(t,a.type,a)&&(t.g?t.b=Rr:Hr(t,"E_CSS_UNBALANCED_PAR",a)),fr(f);continue;case 43:Gr(t,11,a)&&(t.g||3==t.j?Hr(t,"E_CSS_UNEXPECTED_BRC",a):(1==t.j?l.Cc(c.pop()):(a=c.pop(),l.Cc(a)),t.h.push("media"),l.Ka(),t.b=Nr)),fr(f);continue;case 49:if(Gr(t,11,a)){if(!t.g&&3==t.j)return t.A=c.pop(),t.G=!0,t.b=Nr,fr(f),!1;Hr(t,"E_CSS_UNEXPECTED_SEMICOL",a)}fr(f);continue;case 40:c.push(a.type),fr(f);continue;case 27:t.b=Nr,fr(f),l.ac(),t.h.length&&t.h.pop();continue;case 30:switch(u=a.text.toLowerCase()){case"import":if(fr(f),2==(a=hr(f)).type||8==a.type){if(t.J=a.text,fr(f),17==(a=hr(f)).type||0==a.type)return t.G=!0,fr(f),!1;t.g=null,t.j=3,t.b=Fr,c.push("{");continue}l.error("E_CSS_IMPORT_SYNTAX",a),t.b=Dr;continue;case"namespace":switch(fr(f),(a=hr(f)).type){case 1:if(u=a.text,fr(f),(2==(a=hr(f)).type||8==a.type)&&17==lr(f,1).type){t.N[u]=a.text,fr(f),fr(f);continue}break;case 2:case 8:if(17==lr(f,1).type){t.H=a.text,fr(f),fr(f);continue}}l.error("E_CSS_NAMESPACE_SYNTAX",a),t.b=Dr;continue;case"charset":if(fr(f),2==(a=hr(f)).type&&17==lr(f,1).type){"utf-8"!=(u=a.text.toLowerCase())&&"utf-16"!=u&&l.error("E_CSS_UNEXPECTED_CHARSET "+u,a),fr(f),fr(f);continue}l.error("E_CSS_CHARSET_SYNTAX",a),t.b=Dr;continue;case"font-face":case"-epubx-page-template":case"-epubx-define":case"-epubx-viewport":if(12==lr(f,1).type){switch(fr(f),fr(f),u){case"font-face":l.Zd();break;case"-epubx-page-template":l.ae();break;case"-epubx-define":l.Xd();break;case"-epubx-viewport":l.ce()}t.h.push(u),l.Ka();continue}break;case"-adapt-footnote-area":switch(fr(f),(a=hr(f)).type){case 12:fr(f),l.rd(null),t.h.push(u),l.Ka();continue;case 50:if(fr(f),1==(a=hr(f)).type&&12==lr(f,1).type){u=a.text,fr(f),fr(f),l.rd(u),t.h.push("-adapt-footnote-area"),l.Ka();continue}}break;case"-epubx-region":fr(f),l.be(),t.Y=!0,t.b=Or;continue;case"page":fr(f),l.Sc(),t.R=!0,t.b=jr;continue;case"top-left-corner":case"top-left":case"top-center":case"top-right":case"top-right-corner":case"right-top":case"right-middle":case"right-bottom":case"bottom-right-corner":case"bottom-right":case"bottom-center":case"bottom-left":case"bottom-left-corner":case"left-bottom":case"left-middle":case"left-top":if(fr(f),12==(a=hr(f)).type){fr(f),l.Oe(u),t.h.push(u),l.Ka();continue}break;case"-epubx-when":fr(f),t.g=null,t.j=1,t.b=Fr,c.push("{");continue;case"media":fr(f),t.g=null,t.j=2,t.b=Fr,c.push("{");continue;case"-epubx-flow":if(1==lr(f,1).type&&12==lr(f,2).type){l.Yd(lr(f,1).text),fr(f),fr(f),fr(f),t.h.push(u),l.Ka();continue}break;case"-epubx-page-master":case"-epubx-partition":case"-epubx-partition-group":fr(f),h=s=null;var p=[];for(1==(a=hr(f)).type&&(s=a.text,fr(f),a=hr(f)),18==a.type&&1==lr(f,1).type&&(h=lr(f,1).text,fr(f),fr(f),a=hr(f));6==a.type&&"class"==a.text.toLowerCase()&&1==lr(f,1).type&&11==lr(f,2).type;)p.push(lr(f,1).text),fr(f),fr(f),fr(f),a=hr(f);if(12==a.type){switch(fr(f),u){case"-epubx-page-master":l.$d(s,h,p);break;case"-epubx-partition":l.vd(s,h,p);break;case"-epubx-partition-group":l.ud(s,h,p)}t.h.push(u),l.Ka();continue}break;case"":l.error("E_CSS_UNEXPECTED_AT"+u,a),t.b=Br;continue;default:l.error("E_CSS_AT_UNKNOWN "+u,a),t.b=Dr;continue}l.error("E_CSS_AT_SYNTAX "+u,a),t.b=Dr;continue;case 50:if(n||i)return!0;t.l.push(a.type+1),fr(f);continue;case 52:if(n||i)return!0;if(!t.l.length){t.b=Nr;continue}case 51:0<t.l.length&&t.l[t.l.length-1]==a.type&&t.l.pop(),t.l.length||13!=a.type||(t.b=Nr),fr(f);continue;case 53:if(n||i)return!0;t.l.length||(t.b=Nr),fr(f);continue;case 200:return o&&(fr(f),l.Kd()),!0;default:if(n||i)return!0;if(r)return!!Gr(t,11,a)&&(t.result=c.pop(),!0);if(o)return 51==a.type?l.error(a.text,a):l.error("E_CSS_SYNTAX",a),!1;t.b===Rr&&0<=f.b?(cr(f),t.b=Or,l.Pb()):t.b!==Dr&&t.b!==Br&&t.b!==Mr?(51==a.type?l.error(a.text,a):l.error("E_CSS_SYNTAX",a),t.b=Wr(t)?Mr:Br):fr(f)}return!1}function Jr(t){mr.call(this,null),this.f=t}function Zr(t,e,n,i,r){var o=ni("parseStylesheet"),a=new zr(Nr,t,e,n),u=null;return r&&(u=function(t,e,n){return $r(t=new zr(Fr,t,e,n),Number.POSITIVE_INFINITY,!1,!1,!0,!1),t.result}(new sr(r,e),e,n)),(u=function(t,e,n){if(!(t=t.u.ma()))return null;if(n=n||t.j,e)for(var i=(e=l(e=e.split(/\s+/))).next();!i.done;i=e.next())switch(i.value){case"vertical":n=pe(t,n,new zt(t,new oe(t,"pref-horizontal")));break;case"horizontal":n=pe(t,n,new oe(t,"pref-horizontal"));break;case"day":n=pe(t,n,new zt(t,new oe(t,"pref-night-mode")));break;case"night":n=pe(t,n,new oe(t,"pref-night-mode"));break;default:n=t.h}return n===t.j?null:new Me(n)}(a,i,u&&u.Aa()))&&(e.Cc(u),e.Ka()),Ei(function(){for(var t={};!$r(a,100,!1,!1,!1,!1);){if(a.G){var i=N(a.J,n);return a.A&&(e.Cc(a.A),e.Ka()),t.Ae=ni("parseStylesheet.import"),Qr(i,e,null,null).then(function(t){return function(){a.A&&e.ac(),a.G=!1,a.J=null,a.A=null,wi(t.Ae,!0)}}(t)),t.Ae.result()}if((i=mi()).Xa)return i;t={Ae:t.Ae}}return ii(!1)}).then(function(){u&&e.ac(),wi(o,!0)}),o.result()}function qr(t,e,n,i,r){return ri("parseStylesheetFromText",function(o){Zr(new sr(t,e),e,n,i,r).La(o)},function(e,n){C.b(n,"Failed to parse stylesheet text: "+t),wi(e,!1)})}function Qr(t,e,n,i){return ri("parseStylesheetFromURL",function(r){br(t).then(function(o){o.responseText?qr(o.responseText,e,t,n,i).then(function(e){e||C.b("Failed to parse stylesheet from "+t),wi(r,!0)}):wi(r,!0)})},function(e,n){C.b(n,"Exception while fetching and parsing:",t),wi(e,!0)})}function to(t,e){var n=new zr(Rr,e,new Jr(t),"");return $r(n,Number.POSITIVE_INFINITY,!0,!1,!1,!1),n.result}Nr[1]=28,Nr[36]=29,Nr[7]=29,Nr[9]=29,Nr[14]=29,Nr[18]=29,Nr[20]=30,Nr[13]=27,Nr[0]=200,Ir[1]=46,Ir[0]=200,Or[1]=2,Or[36]=4,Or[7]=6,Or[9]=8,Or[14]=10,Or[18]=14,_r[37]=11,_r[23]=12,_r[35]=56,_r[1]=1,_r[36]=3,_r[7]=5,_r[9]=7,_r[14]=9,_r[12]=13,_r[18]=55,_r[50]=42,_r[16]=41,Lr[1]=1,Lr[36]=3,Lr[7]=5,Lr[9]=7,Lr[14]=9,Lr[11]=200,Lr[18]=55,jr[1]=2,jr[36]=4,jr[7]=6,jr[9]=8,jr[18]=14,jr[50]=42,jr[14]=10,jr[12]=13,Rr[1]=15,Rr[7]=16,Rr[4]=17,Rr[5]=18,Rr[3]=19,Rr[2]=20,Rr[8]=21,Rr[16]=22,Rr[19]=23,Rr[6]=24,Rr[11]=25,Rr[17]=26,Rr[13]=48,Rr[31]=47,Rr[23]=54,Rr[0]=44,Fr[1]=31,Fr[4]=32,Fr[5]=32,Fr[3]=33,Fr[2]=34,Fr[10]=40,Fr[6]=38,Fr[31]=36,Fr[24]=36,Fr[32]=35,Pr[1]=45,Pr[16]=37,Pr[37]=37,Pr[38]=37,Pr[47]=37,Pr[48]=37,Pr[39]=37,Pr[49]=37,Pr[26]=37,Pr[25]=37,Pr[23]=37,Pr[24]=37,Pr[19]=37,Pr[21]=37,Pr[36]=37,Pr[18]=37,Pr[22]=37,Pr[11]=39,Pr[12]=43,Pr[17]=49,Dr[0]=200,Dr[12]=50,Dr[13]=51,Dr[14]=50,Dr[15]=51,Dr[10]=50,Dr[11]=51,Dr[17]=53,Mr[0]=200,Mr[12]=50,Mr[13]=52,Mr[14]=50,Mr[15]=51,Mr[10]=50,Mr[11]=51,Mr[17]=53,Br[0]=200,Br[12]=50,Br[13]=51,Br[14]=50,Br[15]=51,Br[10]=50,Br[11]=51,Ur[11]=0,Ur[16]=0,Ur[22]=1,Ur[18]=1,Ur[26]=2,Ur[25]=2,Ur[38]=3,Ur[37]=3,Ur[48]=3,Ur[47]=3,Ur[39]=3,Ur[49]=3,Ur[41]=3,Ur[23]=4,Ur[24]=4,Ur[36]=5,Ur[19]=5,Ur[21]=5,Ur[0]=6,Ur[52]=2,d(Jr,mr),Jr.prototype.error=function(t){throw Error(t)},Jr.prototype.ma=function(){return this.f};var eo={"z-index":!0,"column-count":!0,"flow-linger":!0,opacity:!0,page:!0,"flow-priority":!0,utilization:!0};function no(t,e,n){if(e.df())t:{switch(typeof(t=(e=e.Jc).evaluate(t))){case"number":n=eo[n]?t==Math.round(t)?new Le(t):new _e(t):new Ie(t,"px");break t;case"string":n=t?to(e.b,new sr(t,null)):Se;break t;case"boolean":n=t?Xn:rn;break t;case"undefined":n=Se;break t}throw Error("E_UNEXPECTED")}else n=e;return n}function io(t,e,n,i){this.V=t,this.T=e,this.U=n,this.P=i}function ro(t,e){this.f=t,this.b=e}function oo(){this.bottom=this.right=this.top=this.left=0}function ao(t,e,n,i){this.b=t,this.f=e,this.h=n,this.g=i}function uo(t,e,n,i){this.T=t,this.P=e,this.V=n,this.U=i,this.right=this.left=null}function so(t,e){return t.b.b-e.b.b||t.b.f-e.b.f}function ho(t){this.b=t}function lo(t,e,n){for(var i=(t=t.b).length,r=t[i-1],o=0;o<i;o++){var a=t[o];e.push(r.b<a.b?new ao(r,a,1,n):new ao(a,r,-1,n)),r=a}}function fo(t,e,n,i){for(var r=[],o=0;20>o;o++){var a=2*o*Math.PI/20;r.push(new ro(t+n*Math.sin(a),e+i*Math.cos(a)))}return new ho(r)}function co(t,e,n,i){return new ho([new ro(t,e),new ro(n,e),new ro(n,i),new ro(t,i)])}function po(t,e,n,i){this.f=t,this.h=e,this.b=n,this.g=i}function bo(t,e){var n=t.b.f+(t.f.f-t.b.f)*(e-t.b.b)/(t.f.b-t.b.b);if(isNaN(n))throw Error("Bad intersection");return n}function go(t,e,n,i){var r,o;e.f.b<n&&C.b("Error: inconsistent segment (1)"),e.b.b<=n?(n=bo(e,n),r=e.h):(n=e.b.f,r=0),e.f.b>=i?(i=bo(e,i),o=e.h):(i=e.f.f,o=0),n<i?(t.push(new po(n,r,e.g,-1)),t.push(new po(i,o,e.g,1))):(t.push(new po(i,o,e.g,-1)),t.push(new po(n,r,e.g,1)))}function vo(t,e,n){n=e+n;for(var i=Array(n),r=Array(n),o=0;o<=n;o++)i[o]=0,r[o]=0;for(var a=[],u=!1,s=t.length,h=0;h<s;h++){var l=t[h];i[l.b]+=l.h,r[l.b]+=l.g;var f=!1;for(o=0;o<e;o++)if(i[o]&&!r[o]){f=!0;break}if(f)for(o=e;o<=n;o++)if(i[o]||r[o]){f=!1;break}u!=f&&(a.push(l.f),u=f)}return a}function wo(t,e){return e?Math.ceil(t/e)*e:t}function mo(t,e){return e?Math.floor(t/e)*e:t}function yo(t){return new ro(t.b,-t.f)}function Eo(t){return new io(t.T,-t.U,t.P,-t.V)}function xo(t){return new ho(q(t.b,yo))}function So(t,e){for(var n=e.length-1,i=new uo(t.P,t.P,t.V,t.U);0<=n;){var r=i;(1>(i=e[n]).P-i.T||i.V==r.V&&i.U==r.U)&&(r.T=i.T,e.splice(n,1),i=r),n--}}function Co(t,e){for(var n=0,i=t.length;n<i;){var r=Math.floor((n+i)/2);e>=t[r].P?n=r+1:i=r}return n}function ko(t,e){if(!t.length)return e;for(var n,i=e.T,r=0;r<t.length&&!((n=t[r]).P>e.T&&n.V-.1<=e.V&&n.U+.1>=e.U);r++)i=Math.max(i,n.P);for(var o=i;r<t.length&&!((n=t[r]).T>=e.P||n.V-.1>e.V||n.U+.1<e.U);r++)o=n.P;return(o=r===t.length?e.P:Math.min(o,e.P))<=i?null:new io(e.V,i,e.U,o)}function Ao(t,e){if(!t.length)return e;for(var n,i=e.P,r=t.length-1;0<=r&&(n=t[r],!(r===t.length-1&&n.P<e.P))&&!(n.T<e.P&&n.V-.1<=e.V&&n.U+.1>=e.U);r--)i=Math.min(i,n.T);for(var o=Math.min(i,n.P);0<=r&&!((n=t[r]).P<=e.T||n.V-.1>e.V||n.U+.1<e.U);r--)o=n.T;return i<=(o=Math.max(o,e.T))?null:new io(e.V,o,e.U,i)}function To(){this.b={}}function No(t){this.value=t}function Io(t,e){if(t){var n=new No(e);try{return t.fa(n),n.value}catch(t){C.b(t,"toInt: ")}}return e}function _o(){this.b=!1,this.f=[],this.name=null}function Lo(t,e,n,i,r,o){if(t){var a=new _o;try{return t.fa(a),function(t,e,n,i,r,o){if(0<t.f.length){var a=[];switch(t.f.forEach(function(e,n){if("%"==e.ka){var u=n%2?r:i;3==n&&"circle"==t.name&&(u=Math.sqrt((i*i+r*r)/2)),a.push(e.L*u/100)}else a.push(e.L*_t(o,e.ka,!1))}),t.name){case"polygon":if(!(a.length%2)){for(var u=[],s=0;s<a.length;s+=2)u.push(new ro(e+a[s],n+a[s+1]));return new ho(u)}break;case"rectangle":if(4==a.length)return co(e+a[0],n+a[1],e+a[0]+a[2],n+a[1]+a[3]);break;case"ellipse":if(4==a.length)return fo(e+a[0],n+a[1],a[2],a[3]);break;case"circle":if(3==a.length)return fo(e+a[0],n+a[1],a[2],a[2])}}return null}(a,e,n,i,r,o)}catch(t){C.b(t,"toShape:")}}return co(e,n,e+i,n+r)}function jo(t){this.f=t,this.b={},this.name=null}function Oo(t,e){var n=new jo(e);try{t.fa(n)}catch(t){C.b(t,"toCounters:")}return n.b}function Ro(t,e){this.b=t,this.f=e}function Fo(t){this.f=this.g=null,this.b=0,this.cb=t}function Po(t,e){this.b=-1,this.f=t,this.g=e}function Do(){this.X=[],this.b=[],this.match=[],this.f=[],this.error=[],this.g=!0}function Mo(t,e,n,i){var r=t.X.length,o=new Fo(Ho);o.b=0<=i?n?2*i+1:2*i+2:n?-1:-2,t.X.push(o),t.connect(e,r),n=new Po(r,!0),r=new Po(r,!1),e.push(t.b.length),t.b.push(r),e.push(t.b.length),t.b.push(n)}function Bo(t){return 1==t.X.length&&!t.X[0].b&&t.X[0].cb instanceof Xo}function Uo(t,e,n){if(e.X.length){var i=t.X.length;if(4==n&&1==i&&Bo(e)&&Bo(t)){n=t.X[0].cb,e=e.X[0].cb;i={};var r,o={};for(r in n.f)i[r]=n.f[r];for(r in e.f)i[r]=e.f[r];for(var a in n.g)o[a]=n.g[a];for(a in e.g)o[a]=e.g[a];t.X[0].cb=new Xo(n.b|e.b,i,o)}else{for(r=0;r<e.X.length;r++)t.X.push(e.X[r]);for(4==n?(t.g=!0,t.connect(t.f,i)):t.connect(t.match,i),a=t.b.length,r=0;r<e.b.length;r++)(o=e.b[r]).f+=i,0<=o.b&&(o.b+=i),t.b.push(o);for(r=0;r<e.match.length;r++)t.match.push(e.match[r]+a);if(3==n&&t.connect(t.match,i),2==n||3==n)for(r=0;r<e.f.length;r++)t.match.push(e.f[r]+a);else if(t.g){for(r=0;r<e.f.length;r++)t.f.push(e.f[r]+a);t.g=e.g}else for(r=0;r<e.f.length;r++)t.error.push(e.f[r]+a);for(r=0;r<e.error.length;r++)t.error.push(e.error[r]+a);e.X=null,e.b=null}}}d(To,me),To.prototype.mc=function(t){return this.b[t.name]=!0,t},To.prototype.Qb=function(t){return this.nc(t.values),t},d(No,me),No.prototype.Wc=function(t){return this.value=t.L,t},d(_o,me),_o.prototype.Yc=function(t){return this.b&&this.f.push(t),null},_o.prototype.Xc=function(t){return this.b&&!t.L&&this.f.push(new Ie(0,"px")),null},_o.prototype.Qb=function(t){return this.nc(t.values),null},_o.prototype.Tb=function(t){return this.b||(this.b=!0,this.nc(t.values),this.b=!1,this.name=t.name.toLowerCase()),null},d(jo,me),jo.prototype.mc=function(t){return this.name=t.toString(),this.b[this.name]=this.f?0:(this.b[this.name]||0)+1,t},jo.prototype.Wc=function(t){return this.name&&(this.b[this.name]+=t.L-(this.f?0:1)),t},jo.prototype.Qb=function(t){return this.nc(t.values),t},d(Ro,ye),Ro.prototype.Zc=function(t){return new Oe(this.f.kc(t.url,this.b))},Do.prototype.connect=function(t,e){for(var n=0;n<t.length;n++)this.b[t[n]].b=e;t.splice(0,t.length)},Do.prototype.clone=function(){for(var t=new Do,e=0;e<this.X.length;e++){var n=this.X[e],i=new Fo(n.cb);i.b=n.b,t.X.push(i)}for(e=0;e<this.b.length;e++)(i=new Po((n=this.b[e]).f,n.g)).b=n.b,t.b.push(i);return t.match.push.apply(t.match,[].concat(f(this.match))),t.f.push.apply(t.f,[].concat(f(this.f))),t.error.push.apply(t.error,[].concat(f(this.error))),t};var zo={};function Vo(){}function Xo(t,e,n){this.b=t,this.f=e,this.g=n}d(Vo,me),Vo.prototype.h=function(t,e){var n=t[e].fa(this);return n?[n]:null},d(Xo,Vo),(n=Xo.prototype).Qe=function(t){return 1&this.b?t:null},n.Re=function(t){return 2048&this.b?t:null},n.xd=function(t){return 2&this.b?t:null},n.mc=function(t){var e=this.f[t.name.toLowerCase()];return e||(4&this.b?t:null)},n.Yc=function(t){return t.L||512&this.b?0>t.L&&!(256&this.b)?null:this.g[t.ka]?t:null:"%"==t.ka&&1024&this.b?t:null},n.Xc=function(t){return t.L?0>=t.L&&!(256&this.b)?null:16&this.b?t:null:512&this.b?t:null},n.Wc=function(t){return t.L?0>=t.L&&!(256&this.b)?null:48&this.b?t:(t=this.f[""+t.L])?t:null:512&this.b?t:null},n.fe=function(t){return 64&this.b?t:null},n.Zc=function(t){return 128&this.b?t:null},n.Qb=function(){return null},n.lc=function(){return null},n.Tb=function(){return null},n.Vc=function(){return null};var Ho=new Xo(0,zo,zo);function Go(t){this.b=new Fo(null);var e=this.g=new Fo(null),n=t.X.length;t.X.push(this.b),t.X.push(e),t.connect(t.match,n),t.connect(t.f,n+1),t.connect(t.error,n+1);for(var i=(e=l(t.b)).next();!i.done;i=e.next())(i=i.value).g?t.X[i.f].g=t.X[i.b]:t.X[i.f].f=t.X[i.b];for(e=0;e<n;e++)if(!t.X[e].f||!t.X[e].g)throw Error("Invalid validator state");this.f=t.X[0]}function Yo(t,e,n,i){for(var r=n?[]:e,o=t.f,a=i,u=null,s=null;o!==t.b&&o!==t.g;)if(a>=e.length)o=o.f;else{var h,l=e[a];if(o.b)h=!0,-1==o.b?(u?u.push(s):u=[s],s=[]):-2==o.b?s=0<u.length?u.pop():null:0<o.b&&!(o.b%2)?s[Math.floor((o.b-1)/2)]="taken":h=null==s[Math.floor((o.b-1)/2)],o=h?o.g:o.f;else{if(!a&&!n&&o.cb instanceof Ko&&t instanceof Ko){if(h=new Fe(e).fa(o.cb)){a=e.length,o=o.g;continue}}else if(!a&&!n&&o.cb instanceof Wo&&t instanceof Ko){if(h=new Pe(e).fa(o.cb)){a=e.length,o=o.g;continue}}else h=l.fa(o.cb);if(h){if(h!==l&&e===r)for(r=[],l=0;l<a;l++)r[l]=e[l];e!==r&&(r[a-i]=h),a++,o=o.g}else o=o.f}}return o===t.b&&(n?0<r.length:a==e.length)?r:null}function Ko(t){Go.call(this,t)}function Wo(t){Go.call(this,t)}function $o(t,e){Go.call(this,e),this.name=t}function Jo(){}function Zo(t,e){this.name=e,this.cb=t.g[this.name]}function qo(t,e){Zo.call(this,t,e[0]),this.g=e}function Qo(t,e){this.X=t,this.rf=e}function ta(){this.f=this.xb=null,this.error=!1,this.values={},this.b=null}function ea(t,e){return t.Fc([e]),null}function na(){ta.call(this)}function ia(){ta.call(this)}function ra(){ta.call(this)}function oa(){ta.call(this)}function aa(){ta.call(this)}d(Go,Vo),(n=Go.prototype).Bb=function(t){for(var e=null,n=this.f;n!==this.b&&n!==this.g;)t?n.b?n=n.g:(e=t.fa(n.cb))?(t=null,n=n.g):n=n.f:n=n.f;return n===this.b?e:null},n.Qe=function(t){return this.Bb(t)},n.Re=function(t){return this.Bb(t)},n.xd=function(t){return this.Bb(t)},n.mc=function(t){return this.Bb(t)},n.Yc=function(t){return this.Bb(t)},n.Xc=function(t){return this.Bb(t)},n.Wc=function(t){return this.Bb(t)},n.fe=function(t){return this.Bb(t)},n.Zc=function(t){return this.Bb(t)},n.Qb=function(){return null},n.lc=function(){return null},n.Tb=function(t){return this.Bb(t)},n.Vc=function(){return null},d(Ko,Go),Ko.prototype.Qb=function(t){var e=Yo(this,t.values,!1,0);return e===t.values?t:e?new Fe(e):null},Ko.prototype.lc=function(t){for(var e=this.f,n=!1;e;){if(e.cb instanceof Wo){n=!0;break}e=e.f}return n?(e=Yo(this,t.values,!1,0))===t.values?t:e?new Pe(e):null:null},Ko.prototype.h=function(t,e){return Yo(this,t,!0,e)},d(Wo,Go),Wo.prototype.Qb=function(t){return this.Bb(t)},Wo.prototype.lc=function(t){var e=Yo(this,t.values,!1,0);return e===t.values?t:e?new Pe(e):null},Wo.prototype.h=function(t,e){for(var n,i=this.f;i!==this.g;){if(n=i.cb.h(t,e))return n;i=i.f}return null},d($o,Go),$o.prototype.Bb=function(){return null},$o.prototype.Tb=function(t){if(t.name.toLowerCase()!=this.name)return null;var e=Yo(this,t.values,!1,0);return e===t.values?t:e?new De(t.name,e):null},Jo.prototype.b=function(t,e){return e},Jo.prototype.f=function(){},d(Zo,Jo),Zo.prototype.b=function(t,e,n){if(n.values[this.name])return e;if(t=this.cb.h(t,e)){var i=t.length;return this.f(1<i?new Fe(t):t[0],n),e+i}return e},Zo.prototype.f=function(t,e){e.values[this.name]=t},d(qo,Zo),qo.prototype.f=function(t,e){for(var n=0;n<this.g.length;n++)e.values[this.g[n]]=t},d(Qo,Jo),Qo.prototype.b=function(t,e,n){var i=e;if(this.rf){if(t[e]!=ke)return i;if(++e==t.length)return i}var r=this.X[0].b(t,e,n);if(r==e)return i;for(e=r,i=1;i<this.X.length&&e<t.length&&(r=this.X[i].b(t,e,n))!=e;i++)e=r;return e},(n=ta.prototype).clone=function(){var t=new this.constructor;return t.xb=this.xb,t.f=this.f,t.b=this.b,t},n.Te=function(t,e){this.xb=t,this.f=e},n.Fc=function(){return this.error=!0,0},n.Qe=function(t){return ea(this,t)},n.xd=function(t){return ea(this,t)},n.mc=function(t){return ea(this,t)},n.Yc=function(t){return ea(this,t)},n.Xc=function(t){return ea(this,t)},n.Wc=function(t){return ea(this,t)},n.fe=function(t){return ea(this,t)},n.Zc=function(t){return ea(this,t)},n.Qb=function(t){return this.Fc(t.values),null},n.lc=function(){return this.error=!0,null},n.Tb=function(t){return ea(this,t)},n.Vc=function(){return this.error=!0,null},d(na,ta),na.prototype.Fc=function(t){for(var e=0,n=0;e<t.length;){var i=this.xb[n].b(t,e,this);if(i>e)e=i,n=0;else if(++n==this.xb.length){this.error=!0;break}}return e},d(ia,ta),ia.prototype.Fc=function(t){if(t.length>this.xb.length||!t.length)return this.error=!0,0;for(var e=0;e<this.xb.length;e++){for(var n=e;n>=t.length;)n=1==n?0:n-2;if(this.xb[e].b(t,n,this)!=n+1)return this.error=!0,0}return t.length},d(ra,ta),ra.prototype.Fc=function(t){for(var e=t.length,n=0;n<t.length;n++)if(t[n]===ke){e=n;break}if(e>this.xb.length||!t.length)return this.error=!0,0;for(n=0;n<this.xb.length;n++){for(var i=n;i>=e;)i=1==i?0:i-2;var r;if(e+1<t.length)for(r=e+n+1;r>=t.length;)r-=r==e+2?1:2;else r=i;if(2!=this.xb[n].b([t[i],t[r]],0,this))return this.error=!0,0}return t.length},d(oa,na),oa.prototype.lc=function(t){for(var e={},n=0;n<t.values.length;n++){if(this.values={},t.values[n]instanceof Pe)this.error=!0;else{t.values[n].fa(this);for(var i=this.values,r=l(this.f),o=r.next();!o.done;o=r.next()){var a=i[o=o.value]||this.b.l[o],u=e[o];u||(u=[],e[o]=u),u.push(a)}this.values["background-color"]&&n!=t.values.length-1&&(this.error=!0)}if(this.error)return null}for(var s in this.values={},e)this.values[s]="background-color"==s?e[s].pop():new Pe(e[s]);return null},d(aa,na),aa.prototype.Te=function(t,e){na.prototype.Te.call(this,t,e),this.f.push("font-family","line-height","font-size")},aa.prototype.Fc=function(t){var e=na.prototype.Fc.call(this,t);if(e+2>t.length)return this.error=!0,e;this.error=!1;var n=this.b.g;if(!t[e].fa(n["font-size"]))return this.error=!0,e;if(this.values["font-size"]=t[e++],t[e]===ke){if(++e+2>t.length||!t[e].fa(n["line-height"]))return this.error=!0,e;this.values["line-height"]=t[e++]}var i=e==t.length-1?t[e]:new Fe(t.slice(e,t.length));return i.fa(n["font-family"])?(this.values["font-family"]=i,t.length):(this.error=!0,e)},aa.prototype.lc=function(t){if(t.values[0].fa(this),this.error)return null;for(var e=[this.values["font-family"]],n=1;n<t.values.length;n++)e.push(t.values[n]);return(t=new Pe(e)).fa(this.b.g["font-family"])?this.values["font-family"]=t:this.error=!0,null},aa.prototype.mc=function(t){if(t=this.b.f[t.name])for(var e in t)this.values[e]=t[e];else this.error=!0;return null};var ua={SIMPLE:na,INSETS:ia,INSETS_SLASH:ra,COMMA:oa,FONT:aa};function sa(){this.g={},this.A={},this.l={},this.b={},this.f={},this.h={},this.u=[],this.j=[]}function ha(t,e){var n;if(3==e.type)n=new Ie(e.L,e.text);else if(7==e.type)n=wr(e.text);else{if(1!=e.type)throw Error("unexpected replacement");n=Ne(e.text)}if(Bo(t)){var i,r=t.X[0].cb.f;for(i in r)r[i]=n;return t}throw Error("unexpected replacement")}function la(t,e,n){for(var i=new Do,r=0;r<e;r++)Uo(i,t.clone(),1);if(n==Number.POSITIVE_INFINITY)Uo(i,t,3);else for(r=e;r<n;r++)Uo(i,t.clone(),2);return i}function fa(t){var e=new Do,n=e.X.length;e.X.push(new Fo(t)),t=new Po(n,!0);var i=new Po(n,!1);return e.connect(e.match,n),e.g?(e.f.push(e.b.length),e.g=!1):e.error.push(e.b.length),e.b.push(i),e.match.push(e.b.length),e.b.push(t),e}function ca(t,e){var n;switch(t){case"COMMA":n=new Wo(e);break;case"SPACE":n=new Ko(e);break;default:n=new $o(t.toLowerCase(),e)}return fa(n)}function pa(t){return!!t.match(/^[A-Z_0-9]+$/)}function ba(t,e,n){var i=hr(e);if(0==i.type)return null;var r={"":!0};if(14==i.type){do{if(fr(e),1!=(i=hr(e)).type)throw Error("Prefix name expected");r[i.text]=!0,fr(e),i=hr(e)}while(16==i.type);if(15!=i.type)throw Error("']' expected");fr(e),i=hr(e)}if(1!=i.type)throw Error("Property name expected");if(2==n?"SHORTHANDS"==i.text:"DEFAULTS"==i.text)return fr(e),null;if(i=i.text,fr(e),2!=n){if(39!=hr(e).type)throw Error("'=' expected");pa(i)||(t.A[i]=r)}else if(18!=hr(e).type)throw Error("':' expected");return i}function da(t,e){for(var n={},i=l(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var o=(r=l((o=t.h[r])?o.f:[r])).next();!o.done;o=r.next()){o=o.value;var a=t.l[o];a?n[o]=a:C.b("Unknown property in makePropSet:",o)}}return n}function ga(t,e,n,i,r){var o="",a=e,u=(e=e.toLowerCase()).match(/^-([a-z]+)-([-a-z0-9]+)$/);if(u&&(o=u[1],e=u[2]),(u=t.A[e])&&u[o])if(o=t.g[e])(t=n===fn||n.df()?n:n.fa(o))?r.Ob(e,t,i):r.gd(a,n);else if(e=t.h[e].clone(),n===fn)for(a=(n=l(e.f)).next();!a.done;a=n.next())r.Ob(a.value,fn,i);else{if(n.fa(e),e.error)i=!1;else{for(o=(t=l(e.f)).next();!o.done;o=t.next())o=o.value,r.Ob(o,e.values[o]||e.b.l[o],i);i=!0}i||r.gd(a,n)}else r.de(a,n)}var va=new Ti(function(){var t=ni("loadValidatorSet.load"),e=N("validation.txt",T),n=br(e),i=new sa;return function(t){t.b.HASHCOLOR=fa(new Xo(64,zo,zo)),t.b.POS_INT=fa(new Xo(32,zo,zo)),t.b.POS_NUM=fa(new Xo(16,zo,zo)),t.b.POS_PERCENTAGE=fa(new Xo(8,zo,{"%":Se})),t.b.NEGATIVE=fa(new Xo(256,zo,zo)),t.b.ZERO=fa(new Xo(512,zo,zo)),t.b.ZERO_PERCENTAGE=fa(new Xo(1024,zo,zo)),t.b.POS_LENGTH=fa(new Xo(8,zo,{em:Se,ex:Se,ch:Se,rem:Se,vh:Se,vw:Se,vmin:Se,vmax:Se,cm:Se,mm:Se,in:Se,px:Se,pt:Se,pc:Se,q:Se})),t.b.POS_ANGLE=fa(new Xo(8,zo,{deg:Se,grad:Se,rad:Se,turn:Se})),t.b.POS_TIME=fa(new Xo(8,zo,{s:Se,ms:Se})),t.b.FREQUENCY=fa(new Xo(8,zo,{Hz:Se,kHz:Se})),t.b.RESOLUTION=fa(new Xo(8,zo,{dpi:Se,dpcm:Se,dppx:Se})),t.b.URI=fa(new Xo(128,zo,zo)),t.b.IDENT=fa(new Xo(4,zo,zo)),t.b.STRING=fa(new Xo(2,zo,zo)),t.b.SLASH=fa(new Xo(2048,zo,zo));var e={"font-family":Ne("sans-serif")};t.f.caption=e,t.f.icon=e,t.f.menu=e,t.f["message-box"]=e,t.f["small-caption"]=e,t.f["status-bar"]=e}(i),n.then(function(n){try{if(n.responseText){var r=new sr(n.responseText,null);for(function(t,e){for(var n={};;){var i=ba(t,e,1);if(!i)break;n.ra=[];var r=[];n.ab="";var o=void 0;n.$a=!0,n.hg=t;for(var a=function(t){return function(){if(!t.ra.length)throw Error("No values");var e;if(1==t.ra.length)e=t.ra[0];else{var n=t.ab,i=t.ra;if(e=new Do,"||"==n){for(n=0;n<i.length;n++){var r=new Do;if(r.X.length)throw Error("invalid call");(o=new Fo(Ho)).b=2*n+1,r.X.push(o);var o=new Po(0,!0),a=new Po(0,!1);r.f.push(r.b.length),r.b.push(a),r.match.push(r.b.length),r.b.push(o),Uo(r,i[n],1),Mo(r,r.match,!1,n),Uo(e,r,n?4:1)}if((i=new Do).X.length)throw Error("invalid call");for(Mo(i,i.match,!0,-1),Uo(i,e,3),e=[i.match,i.f,i.error],n=0;n<e.length;n++)Mo(i,e[n],!1,-1);e=i}else{switch(n){case" ":r=1;break;case"|":case"||":r=4;break;default:throw Error("unexpected op")}for(n=0;n<i.length;n++)Uo(e,i[n],n?r:1)}}return e}}(n),u=function(t){return function(e){if(t.$a)throw Error("'"+e+"': unexpected");if(t.ab&&t.ab!=e)throw Error("mixed operators: '"+e+"' and '"+t.ab+"'");t.ab=e,t.$a=!0}}(n),s=null;!s;)switch(fr(e),(o=hr(e)).type){case 1:if(n.$a||u(" "),pa(o.text)){var h=t.b[o.text];if(!h)throw Error("'"+o.text+"' unexpected");n.ra.push(h.clone())}else(h={})[o.text.toLowerCase()]=Ne(o.text),n.ra.push(fa(new Xo(0,h,zo)));n.$a=!1;break;case 5:(h={})[""+o.L]=new Le(o.L),n.ra.push(fa(new Xo(0,h,zo))),n.$a=!1;break;case 34:u("|");break;case 25:u("||");break;case 14:n.$a||u(" "),r.push({ra:n.ra,ab:n.ab,Jb:"["}),n.ab="",n.ra=[],n.$a=!0;break;case 6:n.$a||u(" "),r.push({ra:n.ra,ab:n.ab,Jb:"(",Mc:o.text}),n.ab="",n.ra=[],n.$a=!0;break;case 15:if(o=a(),"["!=(h=r.pop()).Jb)throw Error("']' unexpected");n.ra=h.ra,n.ra.push(o),n.ab=h.ab,n.$a=!1;break;case 11:if(o=a(),"("!=(h=r.pop()).Jb)throw Error("')' unexpected");n.ra=h.ra,n.ra.push(ca(h.Mc,o)),n.ab=h.ab,n.$a=!1;break;case 18:if(n.$a)throw Error("':' unexpected");fr(e),n.ra.push(ha(n.ra.pop(),hr(e)));break;case 22:if(n.$a)throw Error("'?' unexpected");n.ra.push(la(n.ra.pop(),0,1));break;case 36:if(n.$a)throw Error("'*' unexpected");n.ra.push(la(n.ra.pop(),0,Number.POSITIVE_INFINITY));break;case 23:if(n.$a)throw Error("'+' unexpected");n.ra.push(la(n.ra.pop(),1,Number.POSITIVE_INFINITY));break;case 12:if(fr(e),5!=(o=hr(e)).type)throw Error("<int> expected");var l=h=o.L;if(fr(e),16==(o=hr(e)).type){if(fr(e),5!=(o=hr(e)).type)throw Error("<int> expected");l=o.L,fr(e),o=hr(e)}if(13!=o.type)throw Error("'}' expected");n.ra.push(la(n.ra.pop(),h,l));break;case 17:if(s=a(),0<r.length)throw Error("unclosed '"+r.pop().Jb+"'");break;default:throw Error("unexpected token")}fr(e),pa(i)?t.b[i]=s:t.g[i]=1!=s.X.length||s.X[0].b?new Ko(s):s.X[0].cb,n={ra:n.ra,hg:n.hg,ab:n.ab,$a:n.$a}}}(i,r);;){var o=ba(i,r,2);if(!o)break;for(n=[];;){if(fr(r),17==(d=hr(r)).type){fr(r);break}switch(d.type){case 1:n.push(Ne(d.text));break;case 4:n.push(new _e(d.L));break;case 5:n.push(new Le(d.L));break;case 3:n.push(new Ie(d.L,d.text));break;default:throw Error("unexpected token")}}i.l[o]=1<n.length?new Fe(n):n[0]}for(;;){var a=ba(i,r,3);if(!a)break;var u,s=lr(r,1);1==s.type&&ua[s.text]?(u=new ua[s.text],fr(r)):u=new na,u.b=i,o=!1,d=[],n=!1;for(var h=[],l=[];!o;)switch(fr(r),(s=hr(r)).type){case 1:if(i.g[s.text])d.push(new Zo(u.b,s.text)),l.push(s.text);else{if(!(i.h[s.text]instanceof ia))throw Error("'"+s.text+"' is neither a simple property nor an inset shorthand");var c=i.h[s.text];d.push(new qo(c.b,c.f)),l.push.apply(l,[].concat(f(c.f)))}break;case 19:if(0<d.length||n)throw Error("unexpected slash");n=!0;break;case 14:h.push({rf:n,xb:d}),d=[],n=!1;break;case 15:var p=new Qo(d,n),b=h.pop(),d=b.xb;n=b.rf,d.push(p);break;case 17:o=!0,fr(r);break;default:throw Error("unexpected token")}u.Te(d,l),i.h[a]=u}i.j=da(i,["background"]),i.u=da(i,"margin border padding columns column-gap column-rule column-fill".split(" "))}else C.error("Error: missing",e)}catch(t){C.error(t,"Error:")}wi(t,i)}),t.result()},"validatorFetcher"),wa={azimuth:!0,"border-collapse":!0,"border-spacing":!0,"caption-side":!0,"clip-rule":!0,color:!0,"color-interpolation":!0,"color-rendering":!0,cursor:!0,direction:!0,elevation:!0,"empty-cells":!0,fill:!0,"fill-opacity":!0,"fill-rule":!0,"font-kerning":!0,"font-size":!0,"font-size-adjust":!0,"font-family":!0,"font-feature-settings":!0,"font-style":!0,"font-stretch":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-vertical":!0,hyphens:!0,"hyphenate-character":!0,"hyphenate-limit-chars":!0,"hyphenate-limit-last":!0,"image-rendering":!0,"image-resolution":!0,"letter-spacing":!0,"line-break":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,marker:!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,orphans:!0,"overflow-wrap":!0,"paint-order":!0,"pointer-events":!0,"pitch-range":!0,quotes:!0,richness:!0,"ruby-align":!0,"ruby-position":!0,"speak-header":!0,"speak-numeral":!0,"speak-punctuation":!0,"speech-rate":!0,"shape-rendering":!0,stress:!0,stroke:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,"tab-size":!0,"text-align":!0,"text-align-last":!0,"text-anchor":!0,"text-decoration-skip":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-combine-upright":!0,"text-indent":!0,"text-justify":!0,"text-rendering":!0,"text-size-adjust":!0,"text-transform":!0,"text-underline-position":!0,visibility:!0,"voice-family":!0,volume:!0,"white-space":!0,widows:!0,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"writing-mode":!0},ma=["box-decoration-break","image-resolution","orphans","widows"];for(var ya={"http://www.idpf.org/2007/ops":!0,"http://www.w3.org/1999/xhtml":!0,"http://www.w3.org/2000/svg":!0},Ea="margin-% padding-% border-%-width border-%-style border-%-color %".split(" "),xa=["max-%","min-%","%"],Sa=["left","right","top","bottom"],Ca={width:!0,height:!0,"max-width":!0,"max-height":!0,"min-width":!0,"min-height":!0},ka=0;ka<Ea.length;ka++)for(var Aa=0;Aa<Sa.length;Aa++){var Ta=Ea[ka].replace("%",Sa[Aa]);Ca[Ta]=!0}function Na(t,e){for(var n={},i=l(Ea),r=i.next();!r.done;r=i.next()){var o;r=r.value;for(o in t){var a=r.replace("%",o),u=r.replace("%",t[o]);n[a]=u,n[u]=a}}for(o=(i=l(xa)).next();!o.done;o=i.next())for(var s in o=o.value,e)r=o.replace("%",s),a=o.replace("%",e[s]),n[r]=a,n[a]=r;return n}var Ia=Na({"block-start":"right","block-end":"left","inline-start":"top","inline-end":"bottom"},{"block-size":"width","inline-size":"height"}),_a=Na({"block-start":"top","block-end":"bottom","inline-start":"left","inline-end":"right"},{"block-size":"height","inline-size":"width"}),La=Na({"block-start":"right","block-end":"left","inline-start":"bottom","inline-end":"top"},{"block-size":"width","inline-size":"height"}),ja=Na({"block-start":"top","block-end":"bottom","inline-start":"right","inline-end":"left"},{"block-size":"height","inline-size":"width"});function Oa(t,e){this.value=t,this.bb=e}function Ra(t,e,n){Oa.call(this,t,e),this.ia=n}function Fa(t,e,n){return(!e||n.bb>e.bb)&&n.yf(t)?n.Pf():e}(n=Oa.prototype).Pf=function(){return this},n.Md=function(t){return(t=this.value.fa(t))===this.value?this:new Oa(t,this.bb)},n.Rf=function(t){return t?new Oa(this.value,this.bb+t):this},n.evaluate=function(t,e){return no(t,this.value,e)},n.yf=function(){return!0},d(Ra,Oa),Ra.prototype.Pf=function(){return new Oa(this.value,this.bb)},Ra.prototype.Md=function(t){return(t=this.value.fa(t))===this.value?this:new Ra(t,this.bb,this.ia)},Ra.prototype.Rf=function(t){return t?new Ra(this.value,this.bb+t,this.ia):this},Ra.prototype.yf=function(t){return!!this.ia.evaluate(t)};var Pa={"region-id":!0,"fragment-selector-id":!0};function Da(t){return"_"!=t.charAt(0)&&!Pa[t]}function Ma(t,e,n){n?t[e]=n:delete t[e]}function Ba(t,e){var n=t[e];return n||(n={},t[e]=n),n}function Ua(t,e){var n=t[e];return n||(n=[],t[e]=n),n}function za(t,e,n,i,r,o,a){for(var u in[{id:r,lg:"_pseudos"},{id:o,lg:"_regions"}].forEach(function(t){if(t.id){var n=Ba(e,t.lg);(e=n[t.id])||(e={},n[t.id]=e)}}),a&&(r=function(t){var e=t._viewConditionalStyles;return e||(e=[],t._viewConditionalStyles=e),e}(e),e={},r.push({Lg:e,Bg:a})),n)"_"!=u.charAt(0)&&(Pa[u]?(a=n[u],r=Ua(e,u),Array.prototype.push.apply(r,a)):Ma(e,u,Fa(t,e[u],n[u].Rf(i))))}function Va(t,e){if(0<t.length){t.sort(function(t,e){return e.f()-t.f()});for(var n=null,i=t.length-1;0<=i;i--)(n=t[i]).b=e,e=n;return n}return e}function Xa(t,e){this.g=t,this.f=e,this.b=""}function Ha(t){var e;t:switch((t=t.g["font-size"].value).ka.toLowerCase()){case"px":case"in":case"pt":case"pc":case"cm":case"mm":case"q":e=!0;break t;default:e=!1}if(!e)throw Error("Unexpected state");return t.L*At[t.ka]}function Ga(t,e,n){var i=t.ka,r=t.L;return"em"===i||"ex"===i?new Ie(At[i]/At.em*r*e,"px"):"rem"===i?new Ie(r*n.fontSize(),"px"):t}function Ya(){}function Ka(t){this.b=t}function Wa(t){this.b=t}function $a(t,e,n,i,r){this.style=t,this.ba=e,this.b=n,this.h=i,this.j=r}function Ja(){this.b=null}function Za(t){this.b=null,this.h=t}function qa(t){this.b=null,this.id=t}function Qa(t){this.b=null,this.localName=t}function tu(t,e){this.b=null,this.h=t,this.localName=e}function eu(t){this.b=null,this.h=t}function nu(t){this.b=null,this.h=t}function iu(t,e){this.b=null,this.h=t,this.name=e}function ru(t,e,n){this.b=null,this.h=t,this.name=e,this.value=n}function ou(t,e){this.b=null,this.h=t,this.name=e}function au(t,e,n){this.b=null,this.j=t,this.name=e,this.h=n}function uu(t){this.b=null,this.h=t}function su(){this.b=null}function hu(){this.b=null}function lu(t,e){this.b=null,this.h=t,this.Jb=e}function fu(t,e,n){return t-=n,e?!(t%e)&&0<=t/e:!t}function cu(t,e){lu.call(this,t,e)}function pu(t,e){lu.call(this,t,e)}function bu(t,e){lu.call(this,t,e)}function du(t,e){lu.call(this,t,e)}function gu(){this.b=null}function vu(){this.b=null}function wu(){this.b=null}function mu(){this.b=null}function yu(t){this.b=null,this.ia=t}function Eu(){this.b=!1}function xu(t){this.b=null,this.h=new Eu,this.j=Va(t,this.h)}function Su(t,e,n){this.ia=t,this.b=e,this.j=n}function Cu(t,e){var n=t.ia,i=t.j;e.ca[n]=(e.ca[n]||0)+1,i&&(e.A[n]?e.A[n].push(i):e.A[n]=[i])}function ku(t,e){!function(t,e,n){t.ca[e]--,t.A[e]&&(t.A[e]=t.A[e].filter(function(t){return t!==n}),t.A[e].length||delete t.A[e])}(e,t.ia,t.j)}function Au(t,e,n){Su.call(this,t,e,n)}function Tu(t,e,n){Su.call(this,t,e,n)}function Nu(t,e,n){Su.call(this,t,e,n),this.h=!1}function Iu(t,e,n){Su.call(this,t,e,n),this.h=!1}function _u(t,e){this.b=t,this.element=e}function Lu(t){this.lang=t}function ju(t){this.b=t}function Ou(t){this.element=t}function Ru(t,e){switch(e){case"url":return new Oe(t||"about:invalid");default:return new Ae(t||"")}}function Fu(t,e,n){this.f=t,this.element=e,this.b=n}d(Xa,ye),Xa.prototype.Yc=function(t){if("font-size"===this.b){var e=Ha(this),n=this.f,i=(t=Ga(t,e,n)).ka,r=t.L;return"px"===i?t:new Ie("%"===i?r/100*e:r*_t(n,i,!1),"px")}return"em"==t.ka||"ex"==t.ka||"rem"==t.ka?Ga(t,Ha(this),this.f):"%"==t.ka?"line-height"===this.b?t:(e=this.b.match(/height|^(top|bottom)$/)?"vh":"vw",new Ie(t.L,e)):t},Xa.prototype.Vc=function(t){return"font-size"==this.b?no(this.f,t,this.b).fa(this):t},Ya.prototype.apply=function(){},Ya.prototype.l=function(t){return new Wa([this,t])},Ya.prototype.clone=function(){return this},d(Ka,Ya),Ka.prototype.apply=function(t){var e=this.b.g(t);t.h[t.h.length-1].push(e)},d(Wa,Ya),Wa.prototype.apply=function(t){for(var e=0;e<this.b.length;e++)this.b[e].apply(t)},Wa.prototype.l=function(t){return this.b.push(t),this},Wa.prototype.clone=function(){return new Wa([].concat(this.b))},d($a,Ya),$a.prototype.apply=function(t){za(t.l,t.F,this.style,this.ba,this.b,this.h,$u(t,this.j))},d(Ja,Ya),Ja.prototype.apply=function(t){this.b.apply(t)},Ja.prototype.f=function(){return 0},Ja.prototype.g=function(){return!1},d(Za,Ja),Za.prototype.apply=function(t){t.G.includes(this.h)&&this.b.apply(t)},Za.prototype.f=function(){return 10},Za.prototype.g=function(t){return this.b&&Ku(t.Pa,this.h,this.b),!0},d(qa,Ja),qa.prototype.apply=function(t){t.Y!=this.id&&t.la!=this.id||this.b.apply(t)},qa.prototype.f=function(){return 11},qa.prototype.g=function(t){return this.b&&Ku(t.g,this.id,this.b),!0},d(Qa,Ja),Qa.prototype.apply=function(t){t.f==this.localName&&this.b.apply(t)},Qa.prototype.f=function(){return 8},Qa.prototype.g=function(t){return this.b&&Ku(t.wd,this.localName,this.b),!0},d(tu,Ja),tu.prototype.apply=function(t){t.f==this.localName&&t.j==this.h&&this.b.apply(t)},tu.prototype.f=function(){return 8},tu.prototype.g=function(t){if(this.b){var e=t.b[this.h];e||(e="ns"+t.j+++":",t.b[this.h]=e),Ku(t.h,e+this.localName,this.b)}return!0},d(eu,Ja),eu.prototype.apply=function(t){var e=t.b;if(e&&"a"==t.f){var n=e.getAttribute("href");n&&n.match(/^#/)&&(e=e.ownerDocument.getElementById(n.substring(1)))&&(e=e.getAttributeNS("http://www.idpf.org/2007/ops","type"))&&e.match(this.h)&&this.b.apply(t)}},d(nu,Ja),nu.prototype.apply=function(t){t.j==this.h&&this.b.apply(t)},d(iu,Ja),iu.prototype.apply=function(t){t.b&&t.b.hasAttributeNS(this.h,this.name)&&this.b.apply(t)},d(ru,Ja),ru.prototype.apply=function(t){t.b&&t.b.getAttributeNS(this.h,this.name)==this.value&&this.b.apply(t)},ru.prototype.f=function(){return"type"==this.name&&"http://www.idpf.org/2007/ops"==this.h?9:0},ru.prototype.g=function(t){return"type"==this.name&&"http://www.idpf.org/2007/ops"==this.h&&(this.b&&Ku(t.f,this.value,this.b),!0)},d(ou,Ja),ou.prototype.apply=function(t){if(t.b){var e=t.b.getAttributeNS(this.h,this.name);e&&ya[e]&&this.b.apply(t)}},ou.prototype.f=function(){return 0},ou.prototype.g=function(){return!1},d(au,Ja),au.prototype.apply=function(t){if(t.b){var e=t.b.getAttributeNS(this.j,this.name);e&&e.match(this.h)&&this.b.apply(t)}},d(uu,Ja),uu.prototype.apply=function(t){t.lang.match(this.h)&&this.b.apply(t)},d(su,Ja),su.prototype.apply=function(t){t.ub&&this.b.apply(t)},su.prototype.f=function(){return 6},d(hu,Ja),hu.prototype.apply=function(t){t.ta&&this.b.apply(t)},hu.prototype.f=function(){return 12},d(lu,Ja),d(cu,lu),cu.prototype.apply=function(t){fu(t.eb,this.h,this.Jb)&&this.b.apply(t)},cu.prototype.f=function(){return 5},d(pu,lu),pu.prototype.apply=function(t){fu(t.Hb[t.j][t.f],this.h,this.Jb)&&this.b.apply(t)},pu.prototype.f=function(){return 5},d(bu,lu),bu.prototype.apply=function(t){var e=t.R;null===e&&(e=t.R=t.b.parentNode.childElementCount-t.eb+1),fu(e,this.h,this.Jb)&&this.b.apply(t)},bu.prototype.f=function(){return 4},d(du,lu),du.prototype.apply=function(t){var e=t.Ab;if(!e[t.j]){var n=t.b;do{var i=n.namespaceURI,r=n.localName,o=e[i];o||(o=e[i]={}),o[r]=(o[r]||0)+1}while(n=n.nextElementSibling)}fu(e[t.j][t.f],this.h,this.Jb)&&this.b.apply(t)},du.prototype.f=function(){return 4},d(gu,Ja),gu.prototype.apply=function(t){for(var e=t.b.firstChild;e;){switch(e.nodeType){case Node.ELEMENT_NODE:return;case Node.TEXT_NODE:if(0<e.length)return}e=e.nextSibling}this.b.apply(t)},gu.prototype.f=function(){return 4},d(vu,Ja),vu.prototype.apply=function(t){!1===t.b.disabled&&this.b.apply(t)},vu.prototype.f=function(){return 5},d(wu,Ja),wu.prototype.apply=function(t){!0===t.b.disabled&&this.b.apply(t)},wu.prototype.f=function(){return 5},d(mu,Ja),mu.prototype.apply=function(t){var e=t.b;!0!==e.selected&&!0!==e.checked||this.b.apply(t)},mu.prototype.f=function(){return 5},d(yu,Ja),yu.prototype.apply=function(t){if(t.ca[this.ia])try{t.kb.push(this.ia),this.b.apply(t)}finally{t.kb.pop()}},yu.prototype.f=function(){return 5},d(Eu,Ya),Eu.prototype.apply=function(){this.b=!0},Eu.prototype.clone=function(){var t=new Eu;return t.b=this.b,t},d(xu,Ja),xu.prototype.apply=function(t){this.j.apply(t),this.h.b||this.b.apply(t),this.h.b=!1},xu.prototype.f=function(){return this.j.f()},d(Au,Su),Au.prototype.g=function(t){return new Au(this.ia,this.b,$u(t,this.b))},Au.prototype.push=function(t,e){return e||Cu(this,t),!1},Au.prototype.f=function(t,e){return!e&&(ku(this,t),!0)},d(Tu,Su),Tu.prototype.g=function(t){return new Tu(this.ia,this.b,$u(t,this.b))},Tu.prototype.push=function(t,e){return e?1==e&&ku(this,t):Cu(this,t),!1},Tu.prototype.f=function(t,e){return e?(1==e&&Cu(this,t),!1):(ku(this,t),!0)},d(Nu,Su),Nu.prototype.g=function(t){return new Nu(this.ia,this.b,$u(t,this.b))},Nu.prototype.push=function(t){return!!this.h&&(ku(this,t),!0)},Nu.prototype.f=function(t,e){return this.h?(ku(this,t),!0):(e||(this.h=!0,Cu(this,t)),!1)},d(Iu,Su),Iu.prototype.g=function(t){return new Iu(this.ia,this.b,$u(t,this.b))},Iu.prototype.push=function(t,e){return this.h&&(-1==e?Cu(this,t):e||ku(this,t)),!1},Iu.prototype.f=function(t,e){if(this.h){if(-1==e)return ku(this,t),!0;e||Cu(this,t)}else e||(this.h=!0,Cu(this,t));return!1},_u.prototype.g=function(){return this},_u.prototype.push=function(){return!1},_u.prototype.f=function(t,e){return!e&&(ns(t,this.b,this.element),!0)},Lu.prototype.g=function(){return this},Lu.prototype.push=function(){return!1},Lu.prototype.f=function(t,e){return!e&&(t.lang=this.lang,!0)},ju.prototype.g=function(){return this},ju.prototype.push=function(){return!1},ju.prototype.f=function(t,e){return!e&&(t.J=this.b,!0)},d(Ou,ye),Ou.prototype.Tb=function(t){if("attr"!==t.name)return ye.prototype.Tb.call(this,t);var e,n="string";return t.values[0]instanceof Fe?(2<=t.values[0].values.length&&(n=t.values[0].values[1].stringValue()),e=t.values[0].values[0].stringValue()):e=t.values[0].stringValue(),t=1<t.values.length?Ru(t.values[1].stringValue(),n):Ru(null,n),this.element&&this.element.hasAttribute(e)?Ru(this.element.getAttribute(e),n):t},d(Fu,ye),Fu.prototype.mc=function(t){var e=this.f,n=e.J,i=Math.floor(n.length/2)-1;switch(t.name){case"open-quote":t=n[2*Math.min(i,e.D)],e.D++;break;case"close-quote":return 0<e.D&&e.D--,n[2*Math.min(i,e.D)+1];case"no-open-quote":return e.D++,new Ae("");case"no-close-quote":return 0<e.D&&e.D--,new Ae("")}return t};var Pu={roman:[4999,1e3,"M",900,"CM",500,"D",400,"CD",100,"C",90,"XC",50,"L",40,"XL",10,"X",9,"IX",5,"V",4,"IV",1,"I"],armenian:[9999,9e3,"ք",8e3,"փ",7e3,"ւ",6e3,"ց",5e3,"ր",4e3,"տ",3e3,"վ",2e3,"ս",1e3,"ռ",900,"ջ",800,"պ",700,"չ",600,"ո",500,"շ",400,"ն",300,"յ",200,"մ",100,"ճ",90,"ղ",80,"ձ",70,"հ",60,"կ",50,"ծ",40,"խ",30,"լ",20,"ի",10,"ժ",9,"թ",8,"ը",7,"է",6,"զ",5,"ե",4,"դ",3,"գ",2,"բ",1,"ա"],georgian:[19999,1e4,"ჵ",9e3,"ჰ",8e3,"ჯ",7e3,"ჴ",6e3,"ხ",5e3,"ჭ",4e3,"წ",3e3,"ძ",2e3,"ც",1e3,"ჩ",900,"შ",800,"ყ",700,"ღ",600,"ქ",500,"ფ",400,"ჳ",300,"ტ",200,"ს",100,"რ",90,"ჟ",80,"პ",70,"ო",60,"ჲ",50,"ნ",40,"მ",30,"ლ",20,"კ",10,"ი",9,"თ",8,"ჱ",7,"ზ",6,"ვ",5,"ე",4,"დ",3,"გ",2,"ბ",1,"ა"],hebrew:[999,400,"ת",300,"ש",200,"ר",100,"ק",90,"צ",80,"פ",70,"ע",60,"ס",50,"נ",40,"מ",30,"ל",20,"כ",19,"יט",18,"יח",17,"יז",16,"טז",15,"טו",10,"י",9,"ט",8,"ח",7,"ז",6,"ו",5,"ה",4,"ד",3,"ג",2,"ב",1,"א"]},Du={latin:"a-z",alpha:"a-z",greek:"α-ρσ-ω",russian:"а-ик-щэ-я"},Mu={square:"■",disc:"•",circle:"◦",none:""},Bu={nh:!1,cd:"零一二三四五六七八九",Sd:"十百千",Eg:"負"};function Uu(t,e){var n=e[0].toString(),i=1<e.length?e[1].stringValue():"decimal",r=t.f.g[n];return r&&r.length?new Ae(t.format(r&&r.length&&r[r.length-1]||0,i)):new Fe([n=new Me(function(t,e,n){var i=new ue(t.f,function(){var i=t.b.b[e];return n(i&&i.length?i[i.length-1]:null)},"page-counter-"+e);return Jc(t.b,e,function(t){return n(t[0])},i),i}(t.b,n,function(e){return t.format(e||0,i)}))])}function zu(t,e){var n=e[0].toString(),i=e[1].stringValue(),r=2<e.length?e[2].stringValue():"decimal",o=t.f.g[n],a=new B;if(o&&o.length)for(var u=0;u<o.length;u++)0<u&&a.append(i),a.append(t.format(o[u],r));return new Fe([n=new Me(function(t,e,n){var i=new ue(t.f,function(){return n(t.b.b[e]||[])},"page-counters-"+e);return Jc(t.b,e,n,i),i}(t.b,n,function(e){var n=[];if(e.length)for(var o=0;o<e.length;o++)n.push(t.format(e[o],r));return(e=a.toString()).length&&n.push(e),n.length?n.join(i):t.format(0,r)}))])}function Vu(t,e){var n=(n=e[0])instanceof Oe?n.url:n.stringValue(),i=e[1].toString(),r=2<e.length?e[2].stringValue():"decimal";return new Fe([n=new Me(function(t,e,n,i){var r=Hc(e),o=Gc(t,e),a=Yc(t,r,o,!1);return a&&a[n]?(e=a[n],new le(t.j,i(e[e.length-1]||null))):new ue(t.f,function(){if(a=Yc(t,r,o,!0)){if(a[n]){var e=a[n];return i(e[e.length-1]||null)}return(e=t.b.j.f[o]?t.b.b:t.b.A[o]||null)?(Wc(t.b,o),e[n]?(e=e[n],i(e[e.length-1]||null)):i(0)):($c(t.b,o,!1),"??")}return $c(t.b,o,!1),"??"},"target-counter-"+n+"-of-"+e)}(t.b,n,i,function(e){return t.format(e||0,r)}))])}function Xu(t,e){var n=(n=e[0])instanceof Oe?n.url:n.stringValue(),i=e[1].toString(),r=e[2].stringValue(),o=3<e.length?e[3].stringValue():"decimal";return new Fe([n=new Me(function(t,e,n,i){var r=Hc(e),o=Gc(t,e);return new ue(t.f,function(){var e=t.b.j.f[o]?t.b.b:t.b.A[o]||null;if(e){Wc(t.b,o);var e=e[n]||[],a=Yc(t,r,o,!0)[n]||[];return i(e.concat(a))}return $c(t.b,o,!1),"??"},"target-counters-"+n+"-of-"+e)}(t.b,n,i,function(e){return(e=e.map(function(e){return t.format(e,o)})).length?e.join(r):t.format(0,o)}))])}Fu.prototype.format=function(t,e){var n,i=!1,r=!1;if((n=e.match(/^upper-(.*)/))?(i=!0,e=n[1]):(n=e.match(/^lower-(.*)/))&&(r=!0,e=n[1]),n="",Pu[e])t:{var o=t;if(o>(n=Pu[e])[0]||0>=o||o!=Math.round(o))n="";else{for(var a="",u=1;u<n.length;u+=2){var s=n[u],h=Math.floor(o/s);if(20<h){n="";break t}for(o-=h*s;0<h;)a+=n[u+1],h--}n=a}}else if(Du[e])if(0>=(n=t)||n!=Math.round(n))n="";else{for(a=Du[e],o=[],u=0;u<a.length;)if("-"==a.substr(u+1,1))for(h=a.charCodeAt(u),s=a.charCodeAt(u+2),u+=3;h<=s;h++)o.push(String.fromCharCode(h));else o.push(a.substr(u++,1));a="";do{a=o[u=--n%o.length]+a,n=(n-u)/o.length}while(0<n);n=a}else null!=Mu[e]?n=Mu[e]:"decimal-leading-zero"==e?1==(n=""+t).length&&(n="0"+n):n="cjk-ideographic"==e||"trad-chinese-informal"==e?function(t){if(9999<t||-9999>t)return""+t;if(!t)return Bu.cd.charAt(0);var e=new B;if(0>t&&(e.append(Bu.Eg),t=-t),10>t)e.append(Bu.cd.charAt(t));else{var n=Math.floor(t/1e3);n&&(e.append(Bu.cd.charAt(n)),e.append(Bu.Sd.charAt(2))),(n=Math.floor(t/100)%10)&&(e.append(Bu.cd.charAt(n)),e.append(Bu.Sd.charAt(1))),(n=Math.floor(t/10)%10)&&(e.append(Bu.cd.charAt(n)),e.append(Bu.Sd.charAt(0))),(t%=10)&&e.append(Bu.cd.charAt(t))}return e.toString()}(t):""+t;return i?n.toUpperCase():r?n.toLowerCase():n},Fu.prototype.Tb=function(t){switch(t.name){case"counter":if(2>=t.values.length)return Uu(this,t.values);break;case"counters":if(3>=t.values.length)return zu(this,t.values);break;case"target-counter":if(3>=t.values.length)return Vu(this,t.values);break;case"target-counters":if(4>=t.values.length)return Xu(this,t.values)}return C.b("E_CSS_CONTENT_PROP:",t.toString()),new Ae("")};var Hu=1/1048576;function Gu(t,e){for(var n in t)e[n]=t[n].clone()}function Yu(){this.j=0,this.b={},this.wd={},this.h={},this.f={},this.Pa={},this.g={},this.ld={},this.order=0}function Ku(t,e,n){var i=t[e];i&&(n=i.l(n)),t[e]=n}function Wu(t,e,n,i){this.u=t,this.l=e,this.Gc=n,this.zb=i,this.h=[[],[]],this.ca={},this.G=this.F=this.wa=this.b=null,this.Da=this.la=this.Y=this.j=this.f="",this.Z=this.N=null,this.ta=this.ub=!0,this.g={},this.H=[{}],this.J=[new Ae("“"),new Ae("”"),new Ae("‘"),new Ae("’")],this.D=0,this.lang="",this.Wb=[0],this.eb=0,this.sa=[{}],this.Hb=this.sa[0],this.R=null,this.Vb=[this.R],this.Ub=[{}],this.Ab=this.sa[0],this.A={},this.kb=[],this.Ib=[]}function $u(t,e){var n=null;e&&(n=function(t,e){var n=e.split("_");if("NFS"==n[0])return new Zv(t,parseInt(n[1],10),parseInt(n[2],10));return w("unknown view condition. condition="+e),null}(t.wa,e));var i=t.kb.map(function(e){return(e=t.A[e])&&0<e.length?1===e.length?e[0]:new qv([].concat(e)):null}).filter(function(t){return t});return 0>=i.length?n:n?new Qv([n].concat(i)):1===i.length?i[0]:new Qv(i)}function Ju(t,e,n){(e=e[n])&&e.apply(t)}Yu.prototype.clone=function(){var t=new Yu;for(var e in t.j=this.j,this.b)t.b[e]=this.b[e];return Gu(this.wd,t.wd),Gu(this.h,t.h),Gu(this.f,t.f),Gu(this.Pa,t.Pa),Gu(this.g,t.g),Gu(this.ld,t.ld),t.order=this.order,t},Yu.prototype.mf=function(){return this.order+=Hu};var Zu=[];function qu(t,e,n,i){t.b=null,t.wa=null,t.F=i,t.j="",t.f="",t.Y="",t.la="",t.G=e,t.Da="",t.N=Zu,t.Z=n,as(t)}function Qu(t,e,n){t.g[e]?t.g[e].push(n):t.g[e]=[n],(n=t.H[t.H.length-1])||(n={},t.H[t.H.length-1]=n),n[e]=!0}function ts(t,e){var n=cn,i=e.display;i&&(n=i.evaluate(t.l));var r=null,o=i=null,a=e["counter-reset"];if(a&&(a=a.evaluate(t.l))&&(r=Oo(a,!0)),(a=e["counter-set"])&&(a=a.evaluate(t.l))&&(o=Oo(a,!1)),(a=e["counter-increment"])&&(a=a.evaluate(t.l))&&(i=Oo(a,!1)),"ol"!=t.f&&"ul"!=t.f||"http://www.w3.org/1999/xhtml"!=t.j||(r||(r={}),r["ua-list-item"]=0),n===mn&&(i||(i={}),i["ua-list-item"]=1),r)for(var u in r)Qu(t,u,r[u]);if(o)for(var s in o)t.g[s]?(u=t.g[s])[u.length-1]=o[s]:Qu(t,s,o[s]);if(i)for(var h in i)t.g[h]||Qu(t,h,0),(u=t.g[h])[u.length-1]+=i[h];n===mn&&(n=t.g["ua-list-item"],e["ua-list-item-count"]=new Oa(new _e(n[n.length-1]),0)),t.H.push(null)}function es(t){var e=t.H.pop();if(e)for(var n in e)(e=t.g[n])&&(1==e.length?delete t.g[n]:e.pop())}function ns(t,e,n){ts(t,e),e.content&&(e.content=e.content.Md(new Fu(t,n,t.zb))),es(t)}var is="before transclusion-before footnote-call footnote-marker inner first-letter first-line  transclusion-after after".split(" ");function rs(t,e,n,i){t.Ib.push(e),t.Z=null,t.b=e,t.wa=i,t.F=n,t.j=e.namespaceURI,t.f=e.localName,i=t.u.b[t.j],t.Da=i?i+t.f:"",t.Y=e.getAttribute("id"),t.la=e.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"),(i=e.getAttribute("class"))?t.G=i.split(/\s+/):t.G=Zu,(i=e.getAttributeNS("http://www.idpf.org/2007/ops","type"))?t.N=i.split(/\s+/):t.N=Zu,"style"==t.f&&"http://www.gribuser.ru/xml/fictionbook/2.0"==t.j&&(t.G=[e.getAttribute("name")||""]),(i=M(e))&&(t.h[t.h.length-1].push(new Lu(t.lang)),t.lang=i.toLowerCase()),i=t.ta;var r=t.Wb;t.eb=++r[r.length-1],r.push(0);r=t.sa;var o=t.Hb=r[r.length-1],a=o[t.j];if(a||(a=o[t.j]={}),a[t.f]=(a[t.f]||0)+1,r.push({}),null!==(r=t.Vb)[r.length-1]?t.R=--r[r.length-1]:t.R=null,r.push(null),r=t.Ub,(o=t.Ab=r[r.length-1])&&o[t.j]&&o[t.j][t.f]--,r.push({}),as(t),function(t,e){var n,i=new Ou(e),r=t.F,o=r._pseudos;for(n in o)os(i,o[n]);os(i,r)}(t,e),r=n.quotes,n=null,r&&(r=r.evaluate(t.l))&&(n=new ju(t.J),r===En?t.J=[new Ae(""),new Ae("")]:r instanceof Fe&&(t.J=r.values)),ts(t,t.F),r=t.Y||t.la||e.getAttribute("name")||"",i||r){var u={};Object.keys(t.g).forEach(function(t){u[t]=Array.from(this.g[t])},t),function(t,e,n){e=t.b.J.Pe(e,t.f),t.b.l[e]=n}(t.Gc,r,u)}if(i=t.F._pseudos)for(r=!0,a=(o=l(is)).next();!a.done;a=o.next())(a=a.value)||(r=!1),(a=i[a])&&(r?ns(t,a,e):t.h[t.h.length-2].push(new _u(a,e)));n&&t.h[t.h.length-2].push(n)}function os(t,e){for(var n in e)Da(n)&&(e[n]=e[n].Md(t))}function as(t){var e;for(e=0;e<t.G.length;e++)Ju(t,t.u.Pa,t.G[e]);for(e=0;e<t.N.length;e++)Ju(t,t.u.f,t.N[e]);Ju(t,t.u.g,t.Y),Ju(t,t.u.wd,t.f),""!=t.f&&Ju(t,t.u.wd,"*"),Ju(t,t.u.h,t.Da),null!==t.Z&&(Ju(t,t.u.ld,t.Z),Ju(t,t.u.ld,"*")),t.b=null,t.h.push([]);for(var n=1;-1<=n;--n){var i=t.h[t.h.length-n-2];for(e=0;e<i.length;)i[e].push(t,n)?i.splice(e,1):e++}t.ub=!0,t.ta=!1}function us(t){for(var e=1;-1<=e;--e)for(var n=t.h[t.h.length-e-2],i=0;i<n.length;)n[i].f(t,e)?n.splice(i,1):i++;t.h.pop(),t.ub=!1}var ss=null;function hs(t,e,n,i,r,o,a){Cr.call(this,t,e,a),this.b=null,this.ba=0,this.h=this.mb=null,this.D=!1,this.ia=n,this.l=i?i.l:ss?ss.clone():new Yu,this.G=r,this.A=o,this.u=0,this.j=null}function ls(t,e){var n=Va(t.b,e);n!==e&&n.g(t.l)||t.Tf(n)}d(hs,kr),hs.prototype.Tf=function(t){Ku(this.l.wd,"*",t)},hs.prototype.Sb=function(t,e){(e||t)&&(this.ba+=1,e&&t?this.b.push(new tu(t,e.toLowerCase())):e?this.b.push(new Qa(e.toLowerCase())):this.b.push(new nu(t)))},hs.prototype.me=function(t){this.h?(C.b("::"+this.h,"followed by ."+t),this.b.push(new yu(""))):(this.ba+=256,this.b.push(new Za(t)))};var fs={"nth-child":cu,"nth-of-type":pu,"nth-last-child":bu,"nth-last-of-type":du};hs.prototype.nd=function(t,e){if(this.h)C.b("::"+this.h,"followed by :"+t),this.b.push(new yu(""));else{switch(t.toLowerCase()){case"enabled":this.b.push(new vu);break;case"disabled":this.b.push(new wu);break;case"checked":this.b.push(new mu);break;case"root":this.b.push(new hu);break;case"link":this.b.push(new Qa("a")),this.b.push(new iu("","href"));break;case"-adapt-href-epub-type":case"href-epub-type":if(e&&1==e.length&&"string"==typeof e[0]){var n=new RegExp("(^|s)"+G(e[0])+"($|s)");this.b.push(new eu(n))}else this.b.push(new yu(""));break;case"-adapt-footnote-content":case"footnote-content":this.D=!0;break;case"visited":case"active":case"hover":case"focus":this.b.push(new yu(""));break;case"lang":e&&1==e.length&&"string"==typeof e[0]?this.b.push(new uu(new RegExp("^"+G(e[0].toLowerCase())+"($|-)"))):this.b.push(new yu(""));break;case"nth-child":case"nth-last-child":case"nth-of-type":case"nth-last-of-type":n=fs[t.toLowerCase()],e&&2==e.length?this.b.push(new n(e[0],e[1])):this.b.push(new yu(""));break;case"first-child":this.b.push(new su);break;case"last-child":this.b.push(new bu(0,1));break;case"first-of-type":this.b.push(new pu(0,1));break;case"last-of-type":this.b.push(new du(0,1));break;case"only-child":this.b.push(new su),this.b.push(new bu(0,1));break;case"only-of-type":this.b.push(new pu(0,1)),this.b.push(new du(0,1));break;case"empty":this.b.push(new gu);break;case"before":case"after":case"first-line":case"first-letter":return void this.od(t,e);default:C.b("unknown pseudo-class selector: "+t),this.b.push(new yu(""))}this.ba+=256}},hs.prototype.od=function(t,e){switch(t){case"before":case"after":case"first-line":case"first-letter":case"footnote-call":case"footnote-marker":case"inner":case"after-if-continues":this.h?(C.b("Double pseudoelement ::"+this.h+"::"+t),this.b.push(new yu(""))):this.h=t;break;case"first-n-lines":if(e&&1==e.length&&"number"==typeof e[0]){var n=Math.round(e[0]);if(0<n&&n==e[0]){this.h?(C.b("Double pseudoelement ::"+this.h+"::"+t),this.b.push(new yu(""))):this.h="first-"+n+"-lines";break}}case"nth-fragment":e&&2==e.length?this.j="NFS_"+e[0]+"_"+e[1]:this.b.push(new yu(""));break;default:C.b("Unrecognized pseudoelement: ::"+t),this.b.push(new yu(""))}this.ba+=1},hs.prototype.xe=function(t){this.ba+=65536,this.b.push(new qa(t))},hs.prototype.Dd=function(t,e,n,i){var r;switch(this.ba+=256,e=e.toLowerCase(),i=i||"",n){case 0:r=new iu(t,e);break;case 39:r=new ru(t,e,i);break;case 45:r=!i||i.match(/\s/)?new yu(""):new au(t,e,new RegExp("(^|\\s)"+G(i)+"($|\\s)"));break;case 44:r=new au(t,e,new RegExp("^"+G(i)+"($|-)"));break;case 43:r=i?new au(t,e,new RegExp("^"+G(i))):new yu("");break;case 42:r=i?new au(t,e,new RegExp(G(i)+"$")):new yu("");break;case 46:r=i?new au(t,e,new RegExp(G(i))):new yu("");break;case 50:"supported"==i?r=new ou(t,e):(C.b("Unsupported :: attr selector op:",i),r=new yu(""));break;default:C.b("Unsupported attr selector:",n),r=new yu("")}this.b.push(r)};var cs=0;function ps(t){if(t.b){var e=t.ba+t.l.mf();ls(t,t.Wf(e)),t.b=null,t.h=null,t.j=null,t.D=!1,t.ba=0}}function bs(t){hs.call(this,t.f,t.oa,t.ia,t,t.G,t.A,!1),this.parent=t,this.g=t.b}function ds(t,e){Cr.call(this,t,e,!1)}function gs(t,e,n,i,r){Cr.call(this,t,e,!1),this.mb=i,this.ia=n,this.b=r}function vs(t,e){Jr.call(this,t),this.mb={},this.b=e,this.order=0}function ws(t,e,n){return(t=t["writing-mode"])&&(e=t.evaluate(e,"writing-mode"))&&e!==fn?e===zn:n}function ms(t,e,n){return(t=t.direction)&&(e=t.evaluate(e,"direction"))&&e!==fn?e===jn:n}function ys(t,e,n,i){var r,o={};for(r in t)Da(r)&&(o[r]=t[r]);return tw(o,e,t),Es(t,n,i,function(t,n){xs(o,n,e),tw(o,e,n)}),o}function Es(t,e,n,i){if(t=t._regions,(e||n)&&t)for(n&&(n=["footnote"],e=e?e.concat(n):n),n=(e=l(e)).next();!n.done;n=e.next()){var r=t[n=n.value];r&&i(n,r)}}function xs(t,e,n){for(var i in e)Da(i)&&(t[i]=Fa(n,t[i],e[i]))}function Ss(t,e,n,i,r){for(var o in n=n?i?La:Ia:i?ja:_a,t)if(t.hasOwnProperty(o)&&(i=t[o])){var a=n[o];if(a){var u=t[a];if(u&&u.bb>i.bb)continue;a=Ca[a]?a:o}else a=o;e[a]=r(o,i)}}(n=hs.prototype).$b=function(){var t="d"+cs++;ls(this,new Ka(new Au(t,this.j,null))),this.b=[new yu(t)],this.j=null},n.le=function(){var t="c"+cs++;ls(this,new Ka(new Tu(t,this.j,null))),this.b=[new yu(t)],this.j=null},n.ke=function(){var t="a"+cs++;ls(this,new Ka(new Nu(t,this.j,null))),this.b=[new yu(t)],this.j=null},n.re=function(){var t="f"+cs++;ls(this,new Ka(new Iu(t,this.j,null))),this.b=[new yu(t)],this.j=null},n.Pc=function(){ps(this),this.h=null,this.D=!1,this.ba=0,this.b=[]},n.Pb=function(){var t;0!=this.u?(Tr(this,"E_CSS_UNEXPECTED_SELECTOR"),t=!0):t=!1,t||(this.u=1,this.mb={},this.h=null,this.ba=0,this.D=!1,this.b=[])},n.error=function(t,e){kr.prototype.error.call(this,t,e),1==this.u&&(this.u=0)},n.Tc=function(t){kr.prototype.Tc.call(this,t),this.u=0},n.Ka=function(){ps(this),kr.prototype.Ka.call(this),1==this.u&&(this.u=0)},n.ac=function(){kr.prototype.ac.call(this)},n.Wf=function(t){var e=this.G;return this.D&&(e=e?"xxx-bogus-xxx":"footnote"),new $a(this.mb,t,this.h,e,this.j)},n.Mb=function(t,e,n){ga(this.A,t,e,n,this)},n.gd=function(t,e){Ar(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},n.de=function(t,e){Ar(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},n.Ob=function(t,e,n){"display"!=t||e!==Cn&&e!==Sn||(this.Ob("flow-options",new Fe([nn,Ln]),n),this.Ob("flow-into",e,n),e=Ye),Qn("SIMPLE_PROPERTY").forEach(function(i){i=i({name:t,value:e,important:n}),t=i.name,e=i.value,n=i.important});var i=n?yr(this):Er(this);Ma(this.mb,t,this.ia?new Ra(e,i,this.ia):new Oa(e,i))},n.sd=function(t){switch(t){case"not":(t=new bs(this)).Pb(),Sr(this.oa,t)}},d(bs,hs),(n=bs.prototype).sd=function(t){"not"==t&&Tr(this,"E_CSS_UNEXPECTED_NOT")},n.Ka=function(){Tr(this,"E_CSS_UNEXPECTED_RULE_BODY")},n.Pc=function(){Tr(this,"E_CSS_UNEXPECTED_NEXT_SELECTOR")},n.Kd=function(){this.b&&0<this.b.length&&this.g.push(new xu(this.b)),this.parent.ba+=this.ba;var t=this.oa;t.b=t.g.pop()},n.error=function(t,e){hs.prototype.error.call(this,t,e);var n=this.oa;n.b=n.g.pop()},d(ds,kr),ds.prototype.Mb=function(t,e){if(this.f.values[t])this.error("E_CSS_NAME_REDEFINED "+t,this.fd());else{var n=t.match(/height|^(top|bottom)$/)?"vh":"vw";n=new re(this.f,100,n),n=e.Aa(this.f,n);this.f.values[t]=n}},d(gs,kr),gs.prototype.Mb=function(t,e,n){n?C.b("E_IMPORTANT_NOT_ALLOWED"):ga(this.b,t,e,n,this)},gs.prototype.gd=function(t,e){C.b("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},gs.prototype.de=function(t,e){C.b("E_INVALID_PROPERTY",t+":",e.toString())},gs.prototype.Ob=function(t,e,n){n=n?yr(this):Er(this),n+=this.order,this.order+=Hu,Ma(this.mb,t,this.ia?new Ra(e,n,this.ia):new Oa(e,n))},d(vs,Jr),vs.prototype.Mb=function(t,e,n){ga(this.b,t,e,n,this)},vs.prototype.gd=function(t,e){C.b("E_INVALID_PROPERTY_VALUE",t+":",e.toString())},vs.prototype.de=function(t,e){C.b("E_INVALID_PROPERTY",t+":",e.toString())},vs.prototype.Ob=function(t,e,n){n=(n?67108864:50331648)+this.order,this.order+=Hu,Ma(this.mb,t,new Oa(e,n))};var Cs=!1,ks={bh:"ltr",dh:"rtl"};b("vivliostyle.constants.PageProgression",ks),ks.LTR="ltr",ks.RTL="rtl";var As={og:"left",pg:"right"};b("vivliostyle.constants.PageSide",As),As.LEFT="left",As.RIGHT="right";var Ts={LOADING:"loading",ah:"interactive",Yg:"complete"};function Ns(t,e,n){if(this.u=t,this.url=e,this.b=n,this.lang=null,this.h=-1,this.root=n.documentElement,e=t=null,"http://www.w3.org/1999/xhtml"==this.root.namespaceURI){for(var i=this.root.firstChild;i;i=i.nextSibling)if(1==i.nodeType&&"http://www.w3.org/1999/xhtml"==(n=i).namespaceURI)switch(n.localName){case"head":e=n;break;case"body":t=n}this.lang=this.root.getAttribute("lang")}else if("http://www.gribuser.ru/xml/fictionbook/2.0"==this.root.namespaceURI){for(e=this.root,i=this.root.firstChild;i;i=i.nextSibling)1==i.nodeType&&("http://www.gribuser.ru/xml/fictionbook/2.0"==(n=i).namespaceURI&&"body"==n.localName&&(t=n));0<(n=Hs(Hs(Hs(Hs(new Us([this.b]),"FictionBook"),"description"),"title-info"),"lang").textContent()).length&&(this.lang=n[0])}else if("http://example.com/sse"==this.root.namespaceURI)for(n=this.root.firstElementChild;n;n=n.nextElementSibling)"meta"===(i=n.localName)?e=n:"body"===i&&(t=n);this.body=t,this.l=e,this.g=this.root,this.j=1,this.g.setAttribute("data-adapt-eloff","0")}function Is(t,e){if(n=e.getAttribute("data-adapt-eloff"))return parseInt(n,10);for(var n=t.j,i=t.g;i!=e;){var r=i.firstChild;if(!r)for(;!(r=i.nextSibling);)if(!(i=i.parentNode))throw Error("Internal error");i=r,1==r.nodeType?(r.setAttribute("data-adapt-eloff",n.toString()),++n):n+=r.textContent.length}return t.j=n,t.g=e,n-1}function _s(t,e,n,i){var r=0;if(1==e.nodeType){if(!i)return Is(t,e)}else{if(r=n,!(n=e.previousSibling))return r+=1,Is(t,e=e.parentNode)+r;e=n}for(;;){for(;e.lastChild;)e=e.lastChild;if(1==e.nodeType)break;if(r+=e.textContent.length,!(n=e.previousSibling)){e=e.parentNode;break}e=n}return r+=1,Is(t,e)+r}function Ls(t){return 0>t.h&&(t.h=_s(t,t.root,0,!0)),t.h}function js(t,e){for(var n,i=t.root,r={};;){if((n=Is(t,i))>=e)return i;if(r.children=i.children,!r.children)break;if(!(o=K(r.children.length,function(n){return function(i){return Is(t,n.children[i])>e}}(r))))break;if(o<r.children.length&&Is(t,r.children[o])<=e)throw Error("Consistency check failed!");i=r.children[o-1],r={children:r.children}}n+=1;for(var o=(r=i).firstChild||r.nextSibling,a=null;;){if(o){if(1==o.nodeType)break;if(a=r=o,(n+=o.textContent.length)>e)break}else if(!(r=r.parentNode))break;o=r.nextSibling}return a||i}function Os(t,e){if(!(n=e.match(/([^#]*)\#(.+)$/))||n[1]&&n[1]!=t.url)return null;var n=n[2],i=t.b.getElementById(n);return!i&&t.b.getElementsByName&&(i=t.b.getElementsByName(n)[0]),i||(t.f||(t.f={},function t(e,n){var i=n.getAttribute("id");for(i&&!e.f[i]&&(e.f[i]=n),(i=n.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"))&&!e.f[i]&&(e.f[i]=n),i=n.firstElementChild;i;i=i.nextElementSibling)t(e,i)}(t,t.b.documentElement)),i=t.f[n]),i}b("vivliostyle.constants.ReadyState",Ts),Ts.LOADING="loading",Ts.INTERACTIVE="interactive",Ts.COMPLETE="complete";var Rs={gh:"text/html",hh:"text/xml",Tg:"application/xml",Sg:"application/xhtml_xml",$g:"image/svg+xml"};function Fs(t,e,n){var i;n=n||new DOMParser;try{i=n.parseFromString(t,e)}catch(t){}if(!i)return null;if("parsererror"===(t=i.documentElement).localName)return null;for(t=t.firstChild;t;t=t.nextSibling)if("parsererror"===t.localName)return null;return i}function Ps(t,e){var n=t.responseXML;if(!n){var i=new DOMParser,r=t.responseText;if(r){var o=function(t){var e=t.contentType;if(e){for(var n=Object.keys(Rs),i=0;i<n.length;i++)if(Rs[n[i]]===e)return e;if(e.match(/\+xml$/))return"application/xml"}if(t=t.url.match(/\.([^.\/]+)$/))switch(t[1]){case"html":case"htm":return"text/html";case"xhtml":case"xht":return"application/xhtml_xml";case"svg":case"svgz":return"image/svg+xml";case"opf":case"xml":return"application/xml"}return null}(t);(n=Fs(r,o||"application/xml",i))&&!o&&("html"!==(o=n.documentElement).localName.toLowerCase()||o.namespaceURI?"svg"===o.localName.toLowerCase()&&"image/svg+xml"!==n.contentType&&(n=Fs(r,"image/svg+xml",i)):n=Fs(r,"text/html",i)),n||(n=Fs(r,"text/html",i))}}return ii(n=n?new Ns(e,t.url,n):null)}function Ds(t){this.Mc=t}function Ms(){var t=function(){var t=Bs;return new Ds(function(e){return t.Mc(e)&&1==e.nodeType&&"http://www.idpf.org/2008/embedding"==e.getAttribute("Algorithm")})}(),e=Bs;return new Ds(function(n){return!!e.Mc(n)&&(n=Hs(n=new Us([n]),"EncryptionMethod"),t&&(n=zs(n,t)),0<n.size())})}var Bs=new Ds(function(){return!0});function Us(t){this.X=t}function zs(t,e){for(var n=[],i=l(t.X),r=i.next();!r.done;r=i.next())r=r.value,e.Mc(r)&&n.push(r);return new Us(n)}function Vs(t,e){function n(t){i.push(t)}for(var i=[],r=0;r<t.X.length;r++)e(t.X[r],n);return new Us(i)}function Xs(t,e){for(var n=[],i=0;i<t.X.length;i++){var r=e(t.X[i]);null!=r&&n.push(r)}return n}function Hs(t,e){return Vs(t,function(t,n){for(var i=t.firstChild;i;i=i.nextSibling)i.localName==e&&n(i)})}function Gs(t,e){return Xs(t,function(t){return 1==t.nodeType?t.getAttribute(e):null})}Us.prototype.size=function(){return this.X.length},Us.prototype.forEach=function(t){for(var e=[],n=0;n<this.X.length;n++)e.push(t(this.X[n]));return e},Us.prototype.textContent=function(){return this.forEach(function(t){return t.textContent})};var Ys={transform:!0,"transform-origin":!0},Ks={top:!0,bottom:!0,left:!0,right:!0};function Ws(t,e,n){this.target=t,this.name=e,this.value=n}var $s={show:function(t){t.style.visibility="visible"},hide:function(t){t.style.visibility="hidden"},play:function(t){t.currentTime=0,t.play()},pause:function(t){t.pause()},resume:function(t){t.play()},mute:function(t){t.muted=!0},unmute:function(t){t.muted=!1}};function Js(t,e){var n=$s[e];return n?function(){for(var e=0;e<t.length;e++)try{n(t[e])}catch(t){}}:null}function Zs(t,e){this.Lb={},this.I=t,this.h=e,this.J=null,this.l=[];var n=this;this.H=function(t){var e=t.currentTarget,i=e.getAttribute("href")||e.getAttributeNS("http://www.w3.org/1999/xlink","href");i&&tt(n,{type:"hyperlink",target:null,currentTarget:null,lh:e,href:i,preventDefault:function(){t.preventDefault()}})},this.f={},this.g={width:0,height:0},this.A=this.u=!1,this.D=this.F=!0,this.O=0,this.position=null,this.offset=-1,this.b=null,this.j=[],this.G={top:{},bottom:{},left:{},right:{}}}function qs(t,e,n){var i=t.f[n];i?i.push(e):t.f[n]=[e]}function Qs(t){switch(t){case"normal":case"nowrap":return 0;case"pre-line":return 1;case"pre":case"pre-wrap":return 2;default:return null}}function th(t,e){if(1==t.nodeType)return!1;var n=t.textContent;switch(e){case 0:return!!n.match(/^\s*$/);case 1:return!!n.match(/^[ \t\f]*$/);case 2:return!n.length}throw Error("Unexpected whitespace: "+e)}function eh(t){this.f=t,this.b=[],this.C=null}function nh(t,e,n,i,r,o,a,u,s){this.b=t,this.element=e,this.f=n,this.bb=i,this.l=r,this.h=o,this.u=a,this.j=u,this.wb=-1,this.g=s}function ih(t,e){return!!t.h&&(!e.h||t.bb>e.bb||t.j)}function rh(t,e){return t.top-e.top}function oh(t,e){return e.right-t.right}function ah(t,e){return t===e||!(!t||!e)&&(t.node===e.node&&t.jb===e.jb&&ch(t.va,e.va)&&ch(t.Ia,e.Ia)&&ah(t.Fa,e.Fa))}function uh(t,e){if(t===e)return!0;if(!t||!e||t.na!==e.na||t.K!==e.K||t.pa.length!==e.pa.length)return!1;for(var n=0;n<t.pa.length;n++)if(!ah(t.pa[n],e.pa[n]))return!1;return!0}function sh(t){return{pa:[{node:t.M,jb:lh,va:t.va,Ia:null,Fa:null,Sa:0}],na:0,K:!1,Qa:t.Qa}}function hh(t,e){var n=new bh(t.node,e,0);return n.jb=t.jb,n.va=t.va,n.Ia=t.Ia,n.Fa=t.Fa?hh(t.Fa,vh(e)):null,n.C=t.C,n.Sa=t.Sa+1,n}d(Zs,Q),Zs.prototype.zoom=function(t){P(this.I,"transform","scale("+t+")")};var lh=0;function fh(t,e,n,i,r,o,a){this.oa=t,this.md=i,this.uf=null,this.root=e,this.da=n,this.type=o,r&&(r.uf=this),this.b=a}function ch(t,e){return t===e||!!t&&!!e&&!!e&&t.oa===e.oa&&t.da===e.da&&t.type===e.type&&ch(t.md,e.md)}function ph(t,e){this.Hg=t,this.count=e}function bh(t,e,n){this.M=t,this.parent=e,this.Ma=n,this.na=0,this.K=!1,this.jb=lh,this.va=e?e.va:null,this.Fa=this.Ia=null,this.Da=!1,this.ya=!0,this.xa=!1,this.j=e?e.j:0,this.display=null,this.W=Gl,this.ca=this.N=this.l=this.Ba=null,this.Z="baseline",this.la="top",this.ta=this.sa=0,this.H=!1,this.qc=e?e.qc:0,this.F=e?e.F:null,this.A=!!e&&e.A,this.R=this.ed=!1,this.D=this.B=this.G=this.g=null,this.h=e?e.h:{},this.b=!!e&&e.b,this.direction=e?e.direction:"ltr",this.f=e?e.f:null,this.Qa=this.lang=null,this.C=e?e.C:null,this.u=null,this.wa={},this.Sa=1,this.Y=this.J=null}function dh(t){t.ya=!0,t.j=t.parent?t.parent.j:0,t.B=null,t.D=null,t.na=0,t.K=!1,t.display=null,t.W=Gl,t.Ba=null,t.l=null,t.N=null,t.ca=null,t.Z="baseline",t.H=!1,t.qc=t.parent?t.parent.qc:0,t.F=t.parent?t.parent.F:null,t.A=!!t.parent&&t.parent.A,t.g=null,t.G=null,t.Ia=null,t.ed=!1,t.R=!1,t.b=!!t.parent&&t.parent.b,t.Ia=null,t.Qa=null,t.C=t.parent?t.parent.C:null,t.u=null,t.wa={},t.Sa=1,t.J=null,t.Y=null}function gh(t){var e=new bh(t.M,t.parent,t.Ma);return e.na=t.na,e.K=t.K,e.Ia=t.Ia,e.jb=t.jb,e.va=t.va,e.Fa=t.Fa,e.ya=t.ya,e.j=t.j,e.display=t.display,e.W=t.W,e.Ba=t.Ba,e.l=t.l,e.N=t.N,e.ca=t.ca,e.Z=t.Z,e.la=t.la,e.sa=t.sa,e.ta=t.ta,e.ed=t.ed,e.R=t.R,e.H=t.H,e.qc=t.qc,e.F=t.F,e.A=t.A,e.g=t.g,e.G=t.G,e.B=t.B,e.D=t.D,e.f=t.f,e.b=t.b,e.xa=t.xa,e.Qa=t.Qa,e.C=t.C,e.u=t.u,e.wa=Object.create(t.wa),e.Sa=t.Sa,e.J=t.J,e.Y=t.Y,e}function vh(t){var e=t;do{if(e.Da)break;e.Da=!0,e=e.parent}while(e);return t}function wh(t){return{node:t.M,jb:t.jb,va:t.va,Ia:t.Ia,Fa:t.Fa?wh(t.Fa):null,C:t.C,Sa:t.Sa}}function mh(t){var e=t,n=[];do{e.f&&e.parent&&e.parent.f!==e.f||n.push(wh(e)),e=e.parent}while(e);return{pa:n,na:e=t.Qa?fv(t.Qa,t.na,-1):t.na,K:t.K,Qa:t.Qa}}function yh(t,e){for(var n=t;n;)n.ya||e(n),n=n.parent}function Eh(t,e){return t.C===e&&!!t.parent&&t.parent.C===e}function xh(t){this.f=t,this.b=null}function Sh(t,e){if(!e)return!1;if(t===e)return!0;if(!uh(t.f,e.f))return!1;if(t.b){if(!e.b||t.b.length!==e.b.length)return!1;for(var n=0;n<t.b.length;n++)if(!uh(t.b[n],e.b[n]))return!1}else if(e.b)return!1;return!0}function Ch(t,e){this.b=t,this.qa=e}function kh(){this.b=[],this.g="any",this.f=null}function Ah(t,e){if(t===e)return!0;if(!e||t.b.length!==e.b.length)return!1;for(var n=0;n<t.b.length;n++){var i=t.b[n],r=e.b[n];if(!r||i!==r&&!Sh(i.b,r.b))return!1}return!0}function Th(){this.page=0,this.f={},this.b={},this.g=0}function Nh(t,e){if(t===e)return!0;if(!e||t.page!==e.page||t.g!==e.g)return!1;var n=Object.keys(t.b),i=Object.keys(e.b);if(n.length!==i.length)return!1;for(i=(n=l(n)).next();!i.done;i=n.next())if(i=i.value,!Ah(t.b[i],e.b[i]))return!1;return!0}function Ih(t){this.element=t,this.G=this.F=this.height=this.width=this.R=this.J=this.Y=this.H=this.Da=this.ca=this.eb=this.Z=this.marginBottom=this.marginTop=this.marginRight=this.marginLeft=this.top=this.left=0,this.Vb=this.ub=null,this.Ab=this.Ld=this.Wb=this.Od=this.h=0,this.b=!1}function _h(t){return t.marginTop+t.ca+t.J}function Lh(t){return t.marginBottom+t.Da+t.R}function jh(t){return t.marginLeft+t.Z+t.H}function Oh(t){return t.marginRight+t.eb+t.Y}function Rh(t){return t.b?-1:1}function Fh(t,e,n){t.top=e,t.height=n,P(t.element,"top",e+"px"),P(t.element,"height",n+"px")}function Ph(t,e,n){t.left=e,t.width=n,P(t.element,"left",e+"px"),P(t.element,"width",n+"px")}function Dh(t,e,n){t.b?Ph(t,e+n*Rh(t),n):Fh(t,e,n)}function Mh(t,e,n){t.b?Fh(t,e,n):Ph(t,e,n)}function Bh(t){t=t.element;for(var e;e=t.lastChild;)t.removeChild(e)}function Uh(t){var e=t.F+t.left+t.marginLeft+t.Z,n=t.G+t.top+t.marginTop+t.ca;return new io(e,n,e+(t.H+t.width+t.Y),n+(t.J+t.height+t.R))}function zh(t,e,n){return Lo(e,(t=Vh(t)).V,t.T,t.U-t.V,t.P-t.T,n)}function Vh(t){var e=t.F+t.left,n=t.G+t.top;return new io(e,n,e+(jh(t)+t.width+Oh(t)),n+(_h(t)+t.height+Lh(t)))}function Xh(t,e,n,i){this.b=t,this.f=e,this.h=n,this.g=i}function Hh(t){return!!t&&t!==xn&&t!==En&&t!==fn}function Gh(t,e,n){this.g=t,this.f=e,this.b=n}function Yh(){this.map=[]}function Kh(t){return t.map.length?t.map[t.map.length-1].b:0}function Wh(t,e){if(t.map.length){var n=t.map[t.map.length-1],i=n.b+e-n.f;n.f==n.g?(n.f=e,n.g=e,n.b=i):t.map.push(new Gh(e,e,i))}else t.map.push(new Gh(e,e,e))}function $h(t,e){t.map.length?t.map[t.map.length-1].f=e:t.map.push(new Gh(e,0,0))}function Jh(t,e){var n=K(t.map.length,function(n){return e<=t.map[n].f});return(n=t.map[n]).b-Math.max(0,n.g-e)}function Zh(t,e){var n=K(t.map.length,function(n){return e<=t.map[n].b});return(n=t.map[n]).g-(n.b-e)}function qh(t,e,n,i,r,o,a,u){this.A=t,this.style=e,this.offset=n,this.D=i,this.qa=r,this.b=r.b,this.hb=o,this.ob=a,this.F=u,this.j=this.l=null,this.u={},this.g=this.f=this.h=null,nl(this)&&(e=e._pseudos)&&e.before&&(Hh(n=Qh(t=new qh(t,e.before,n,!1,r,el(this),a,!0),"content"))&&(this.h=t,this.g=t.g)),this.g=_l(il(this,"before"),this.g),this.ob&&Nl[this.g]&&(r.g=_l(r.g,this.g))}function Qh(t,e,n){if(!(e in t.u)){var i=t.style[e];t.u[e]=i?i.evaluate(t.A,e):n||null}return t.u[e]}function tl(t){return Qh(t,"display",cn)}function el(t){if(null===t.l){var e=tl(t),n=Qh(t,"position"),i=Qh(t,"float");t.l=Gp(e,n,i,t.D).display===Ye}return t.l}function nl(t){return null===t.j&&(t.j=t.F&&tl(t)!==En),t.j}function il(t,e){var n=null;if(el(t)){var i=Qh(t,"break-"+e);i&&(n=i.toString())}return n}function rl(t){this.g=t,this.b=[],this.ob=this.hb=!0,this.f=[]}function ol(t){return t.b[t.b.length-1]}function al(t,e){if(!e.hb)return e.offset;var n=t.b.length-1,i=t.b[n];for(i===e&&(n--,i=t.b[n]);0<=n;){if(i.b!==e.b)return e.offset;if(!i.hb||i.D)return i.offset;e=i,i=t.b[--n]}throw Error("No block start offset found!")}function ul(t,e,n,i,r,o,a,u){switch(this.da=t,this.root=t.root,this.kb=n,this.h=i,this.A=o,this.f=this.root,this.F={},this.Y={},this.G={},this.J=[],this.D=this.R=this.N=null,this.Da=a,this.Z=new Wu(e,i,a,u),this.g=new Yh,this.u=!0,this.la=[],this.eb=r,this.wa=this.ta=!1,this.b=t=Is(t,this.root),this.ca={},this.j=new rl(i),Wh(this.g,t),i=cl(this,this.root),rs(this.Z,this.root,i,t),fl(this,i,!1),this.H=!0,this.root.namespaceURI){case"http://www.w3.org/1999/xhtml":case"http://www.gribuser.ru/xml/fictionbook/2.0":this.H=!1}this.la.push(!0),this.Y={},this.Y["e"+t]=i,this.b++,pl(this,-1)}function sl(t,e,n,i){return(e=e[i])&&e.evaluate(t.h)!==n[i]}function hl(t,e,n){for(var i in n){var r=e[i];r?(t.F[i]=r,delete e[i]):(r=n[i])&&(t.F[i]=new Oa(r,33554432))}}bh.prototype.modify=function(){return this.Da?gh(this):this},bh.prototype.clone=function(){for(var t,e=gh(this),n=e;t=n.parent;)t=gh(t),n=n.parent=t;return e},xh.prototype.clone=function(){var t=new xh(this.f);if(this.b){t.b=[];for(var e=0;e<this.b.length;++e)t.b[e]=this.b[e]}return t},Ch.prototype.clone=function(){return new Ch(this.b.clone(),this.qa)},kh.prototype.clone=function(){for(var t=new kh,e=this.b,n=t.b,i=0;i<e.length;i++)n[i]=e[i].clone();return t.g=this.g,t.f=this.f,t},Th.prototype.clone=function(){var t=new Th;for(var e in t.page=this.page,t.h=this.h,t.g=this.g,t.j=this.j,t.f=this.f,this.b)t.b[e]=this.b[e].clone();return t},d(Xh,me),Xh.prototype.xd=function(t){return this.b.appendChild(this.b.ownerDocument.createTextNode(t.Uc)),null},Xh.prototype.Zc=function(t){if(this.h.url)this.b.setAttribute("src",t.url);else{var e=this.b.ownerDocument.createElementNS("http://www.w3.org/1999/xhtml","img");e.setAttribute("src",t.url),this.b.appendChild(e)}return null},Xh.prototype.Qb=function(t){return this.nc(t.values),null},Xh.prototype.Vc=function(t){var e=t.Aa();return"string"==typeof(t=e.evaluate(this.f))&&((e=this.g(e,t,this.b.ownerDocument))||(e=this.b.ownerDocument.createTextNode(t)),this.b.appendChild(e)),null},rl.prototype.push=function(t,e,n,i){var r=ol(this);i&&r&&i.b!==r.b&&this.f.push({hb:this.hb,ob:this.ob}),r=i||r.qa,i=this.ob||!!i;var o=function(t){return t.b.every(function(t){return tl(t)!==En})}(this);return t=new qh(this.g,t,e,n,r,i||this.hb,i,o),this.b.push(t),this.hb=nl(t)?!t.h&&el(t):this.hb,this.ob=nl(t)?!t.h&&i:this.ob,t};var ll=["column-count","column-width","column-fill"];function fl(t,e,n){if(["writing-mode","direction"].forEach(function(i){!e[i]||n&&t.F[i]||(t.F[i]=e[i])}),!t.ta){var i=sl(t,e,t.A.j,"background-color")?e["background-color"].evaluate(t.h):null,r=sl(t,e,t.A.j,"background-image")?e["background-image"].evaluate(t.h):null;(i&&i!==fn||r&&r!==fn)&&(hl(t,e,t.A.j),t.ta=!0)}if(!t.wa)for(i=0;i<ll.length;i++)if(sl(t,e,t.A.u,ll[i])){hl(t,e,t.A.u),t.wa=!0;break}if(!n&&(i=e["font-size"])){switch(r=i.evaluate(t.h),i=r.L,r.ka){case"em":case"rem":i*=t.h.u;break;case"ex":i*=t.h.u*At.ex/At.em;break;case"%":i*=t.h.u/100;break;default:(r=At[r.ka])&&(i*=r)}t.h.ta=i}}function cl(t,e){if(e.style instanceof CSSStyleDeclaration&&(r=e.getAttribute("style"))){var n=t.da.url,i=new vs(t.kb,t.A),r=new sr(r,i);try{$r(new zr(Ir,r,i,n),Number.POSITIVE_INFINITY,!1,!0,!1,!1)}catch(t){C.b(t,"Style attribute parse error:")}return i.mb}return{}}function pl(t,e){if(!(e>=t.b)){var n=t.h,i=Is(t.da,t.root);if(e<i){var r=t.l(t.root,!1),o=bl(t,o=(o=r["flow-into"])?o.evaluate(n,"flow-into").toString():"body",r,t.root,i);!t.j.b.length&&t.j.push(r,i,!0,o)}if(i=js(t.da,e),!((r=_s(t.da,i,0,!1))>=t.b))for(;;){if(1!=i.nodeType)r+=i.textContent.length;else{var a=i;if(r!=Is(t.da,a))throw Error("Inconsistent offset");var u=t.l(a,!1);(o=u["flow-into"])&&bl(t,o=o.evaluate(n,"flow-into").toString(),u,a,r),r++}if(r>=t.b)break;if(!(o=i.firstChild))for(;!(o=i.nextSibling);)if((i=i.parentNode)===t.root)return;i=o}}}function bl(t,e,n,i,r){var o=0,a=Number.POSITIVE_INFINITY,u=!1,s=!1,h=!1,l=n["flow-options"];if(l){var f;t:{if(u=l.evaluate(t.h,"flow-options")){s=new To;try{u.fa(s),f=s.b;break t}catch(t){C.b(t,"toSet:")}}f={}}u=!!(h=f).exclusive,s=!!h.static,h=!!h.last}return(f=n["flow-linger"])&&(a=Io(f.evaluate(t.h,"flow-linger"),Number.POSITIVE_INFINITY)),(n=n["flow-priority"])&&(o=Io(n.evaluate(t.h,"flow-priority"),0)),n=t.ca[r]||null,(f=t.G[e])||(f=ol(t.j),f=t.G[e]=new eh(f?f.qa.b:null)),i=new nh(e,i,r,o,a,u,s,h,n),t.J.push(i),t.R==e&&(t.R=null),t.N&&Vd(t.N,i,f),i}function dl(t,e,n,i){Nl[e]&&((!(i=t.G[i].b).length||i[i.length-1]<n)&&i.push(n)),t.ca[n]=_l(t.ca[n],e)}function gl(t,e,n){var i=-1;if(e<=t.b&&(i=Jh(t.g,e),(i+=n)<Kh(t.g)))return Zh(t.g,i);if(!t.f)return Number.POSITIVE_INFINITY;for(var r=t.h;;){if(!(o=t.f.firstChild))for(;;){if(1==t.f.nodeType){var o=t.Z,a=t.f;if(o.Ib.pop()!==a)throw Error("Invalid call to popElement");o.Wb.pop(),o.sa.pop(),o.Vb.pop(),o.Ub.pop(),us(o),es(o),t.u=t.la.pop();o=t.j;var u=t.b,s=a=o.b.pop(),h=o.hb,l=o.ob;if(nl(s)){var f=s.style._pseudos;f&&f.after&&(Hh(h=Qh(u=new qh(s.A,f.after,u,!1,s.qa,h,l,!0),"content"))&&(s.f=u))}o.ob&&a.f&&(s=il(a.f,"before"),a.qa.g=_l(a.qa.g,s)),(s=ol(o))&&(s.b===a.b?nl(a)&&(o.hb=o.ob=!1):(s=o.f.pop(),o.hb=s.hb,o.ob=s.ob)),o=null,a.f&&(dl(t,o=il(a.f,"before"),a.f.hb?al(t.j,a):a.f.offset,a.b),o=il(a.f,"after")),dl(t,o=_l(o,il(a,"after")),t.b,a.b)}if(o=t.f.nextSibling)break;if(t.f=t.f.parentNode,t.f===t.root)return t.f=null,e<t.b&&(0>i&&(i=Jh(t.g,e),i+=n),i<=Kh(t.g))?Zh(t.g,i):Number.POSITIVE_INFINITY}if(t.f=o,1!=t.f.nodeType)t.b+=t.f.textContent.length,o=t.j,a=t.f,s=ol(o),(o.hb||o.ob)&&nl(s)&&(th(a,Qs(s=Qh(s,"white-space",xn).toString()))||(o.hb=!1,o.ob=!1)),t.u?Wh(t.g,t.b):$h(t.g,t.b);else{if(o=cl(t,a=t.f),t.la.push(t.u),rs(t.Z,a,o,t.b),(s=a.getAttribute("id")||a.getAttributeNS("http://www.w3.org/XML/1998/namespace","id"))&&s===t.D&&(t.D=null),t.H||"body"!=a.localName||a.parentNode!=t.root||(fl(t,o,!0),t.H=!0),(s=o["flow-into"])?(u=bl(t,s=s.evaluate(r,"flow-into").toString(),o,a,t.b),t.u=!!t.eb[s],a=t.j.push(o,t.b,a===t.root,u)):a=t.j.push(o,t.b,a===t.root),s=al(t.j,a),dl(t,a.g,s,a.b),a.h&&dl(t,u=il(a.h,"after"),a.h.hb?s:a.offset,a.b),t.u&&tl(a)===En&&(t.u=!1),Is(t.da,t.f)!=t.b)throw Error("Inconsistent offset");if(t.Y["e"+t.b]=o,t.b++,t.u?Wh(t.g,t.b):$h(t.g,t.b),e<t.b&&(0>i&&(i=Jh(t.g,e),i+=n),i<=Kh(t.g)))return Zh(t.g,i)}}}ul.prototype.l=function(t,e){var n=Is(this.da,t),i="e"+n;return e&&(n=_s(this.da,t,0,!0)),this.b<=n&&gl(this,n,0),this.Y[i]},ul.prototype.sa=function(){};var vl={"font-style":xn,"font-variant":xn,"font-weight":xn},wl="OTTO"+(new Date).valueOf(),ml=1;function yl(t,e){var n,i={};for(n in t)i[n]=t[n].evaluate(e,n);for(var r in vl)i[r]||(i[r]=vl[r]);return i}function El(t){t=this.Ac=t;var e,n=new B;for(e in vl)n.append(" "),n.append(t[e].toString());this.f=n.toString(),this.src=this.Ac.src?this.Ac.src.toString():null,this.g=[],this.h=[],this.b=(e=this.Ac["font-family"])?e.stringValue():null}function xl(t,e,n){var i=new B;for(var r in i.append("@font-face {\n  font-family: "),i.append(t.b),i.append(";\n  "),vl)i.append(r),i.append(": "),t.Ac[r].Za(i,!0),i.append(";\n  ");return n?(i.append('src: url("'),e=(window.URL||window.webkitURL).createObjectURL(n),i.append(e),t.g.push(e),t.h.push(n),i.append('")')):(i.append("src: "),i.append(e)),i.append(";\n}\n"),i.toString()}function Sl(t){this.f=t,this.b={}}function Cl(t,e){if(e instanceof Pe){for(var n=[],i=l(e.values),r=i.next();!r.done;r=i.next()){r=r.value;var o=t.b[r.stringValue()];o&&n.push(Ne(o)),n.push(r)}return new Pe(n)}return(n=t.b[e.stringValue()])?new Pe([Ne(n),e]):e}function kl(t,e){this.b=t,this.body=e,this.f={},this.g=0}function Al(t,e,n,i){var r,o=ni("initFont"),a=e.src,u={};for(r in vl)u[r]=e.Ac[r];i=function(t,e,n){e=e.b;var i=n.b[e];return i||(i="Fnt_"+ ++t.g,n.b[e]=i)}(t,e,i),u["font-family"]=Ne(i);var s=new El(u),h=t.body.ownerDocument.createElement("span");h.textContent="M";var l=(new Date).valueOf()+1e3;for(var f in e=t.b.ownerDocument.createElement("style"),r=wl+ml++,e.textContent=xl(s,"",dr([r])),t.b.appendChild(e),t.body.appendChild(h),h.style.visibility="hidden",h.style.fontFamily=i,vl)P(h,f,u[f].toString());var c=(u=h.getBoundingClientRect()).right-u.left,p=u.bottom-u.top;e.textContent=xl(s,a,n),C.g("Starting to load font:",a);var b=!1;return Ei(function(){var t=h.getBoundingClientRect(),e=t.bottom-t.top;return c!=t.right-t.left||p!=e?(b=!0,ii(!1)):(new Date).valueOf()>l?ii(!1):yi(10)}).then(function(){b?C.g("Loaded font:",a):C.b("Failed to load font:",a),t.body.removeChild(h),wi(o,s)}),o.result()}function Tl(t,e,n){var i=e.src,r=t.f[i];return r?function(t,e){t.f?e(t.h):t.g.push(e)}(r,function(t){if(t.f==e.f){var r=e.b,o=n.b[r];if(t=t.b,o){if(o!=t)throw Error("E_FONT_FAMILY_INCONSISTENT "+e.b)}else n.b[r]=t;C.b("Found already-loaded font:",i)}else C.b("E_FONT_FACE_INCOMPATIBLE",e.src)}):(r=new Ti(function(){var r=ni("loadFont"),o=n.f?n.f(i):null;return o?br(i,"blob").then(function(i){i.Wd?o(i.Wd).then(function(i){Al(t,e,i,n).La(r)}):wi(r,null)}):Al(t,e,null,n).La(r),r.result()},"loadFont "+i),t.f[i]=r,r.start()),r}qn("SIMPLE_PROPERTY",function(t){var e=t.name,n=t.value;switch(e){case"page-break-before":case"page-break-after":case"page-break-inside":return{name:e.replace(/^page-/,""),value:n===Ve?kn:n,important:t.important};default:return t}});var Nl={page:!0,left:!0,right:!0,recto:!0,verso:!0,column:!0,region:!0},Il={avoid:!0,"avoid-page":!0,"avoid-column":!0,"avoid-region":!0};function _l(t,e){if(!t)return e;if(!e)return t;var n=!!Nl[t],i=!!Nl[e];if(!n||!i)return i?e:n?t:Il[e]?e:Il[t]?t:e;switch(e){case"column":return t;case"region":return"column"===t?e:t;default:return e}}function Ll(t){switch(t){case"left":case"right":case"recto":case"verso":return t;default:return"any"}}function jl(){}function Ol(t,e){this.b=t,this.f=e}function Rl(t,e){var n=t.b,i=n.Sf(e),r=ni("LayoutIterator");return xi(function(e){for(var r;i.w;){if((r=((r=i.w.B?1!==i.w.B.nodeType?th(i.w.B,i.w.qc)?void 0:i.w.K?n.Cf(i):n.tf(i):i.w.ya?i.w.K?n.Bf(i):n.jg(i):i.w.K?n.oc(i):n.yd(i):void 0)&&r.Xa()?r:ii(!0)).ea(function(){return i.Rb?ii(null):vb(t.f,i.w,i.Cd)})).Xa())return void r.then(function(t){i.Rb?Ai(e):(i.w=t,ki(e))});if(i.Rb)return void Ai(e);i.w=r.get()}Ai(e)}).then(function(){wi(r,i.w)}),r.result()}function Fl(t){this.dc=t}function Pl(t,e,n){this.sf=[],this.za=Object.create(t),this.za.element=e,this.za.j=t.j.clone(),this.za.u=!1,this.za.jf=n.C,this.za.Jd=t,t=gc(this.za,n),this.za.la-=t;var i=this;this.za.Ed=function(t){return Vf.prototype.Ed.call(this,t).ea(function(t){return i.sf.push(vh(t)),ii(t)})}}function Dl(t,e){return _c(t.za,e,!0)}function Ml(){this.u=this.h=null}function Bl(t,e,n){return t.dg(e,n),function t(e,n,i){var r=ni("vivliostyle.layoututil.AbstractLayoutRetryer.tryLayout");e.xf(n,i);var o=e.pf(n);o.b(n,i).then(function(e){var a=o.f(e,i);(a=o.g(e,this.f,i,a))?wi(r,e):(this.Gd(this.f),this.ge(n,i),t(this,this.f,i).La(r))}.bind(e));return r.result()}(t,e,n)}function Ul(t,e,n,i){if(!(i=i[e]))throw Error("unknown writing-mode: "+e);if(!(e=i[n||"ltr"]))throw Error("unknown direction: "+n);for(e=(n=l(e)).next();!e.done;e=n.next())if(e=e.value,(e=t.replace(e.h,e.b))!==t)return e;return t}function zl(t){var e=Vl,n={};return Object.keys(e).forEach(function(i){var r=n[i]={},o=e[i];Object.keys(o).forEach(function(e){r[e]=o[e].map(function(e){return{h:new RegExp("(-?)"+(t?e.ga:e.ha)+"(-?)"),b:"$1"+(t?e.ha:e.ga)+"$2"}})})}),n}(n=jl.prototype).Sf=function(t){return{w:t,Cd:!1,Rb:!1}},n.tf=function(){},n.Cf=function(){},n.jg=function(){},n.Bf=function(){},n.yd=function(){},n.oc=function(){},d(Fl,jl),(n=Fl.prototype).kg=function(){},n.Mf=function(){},n.Sf=function(t){return{w:t,Cd:!!this.dc&&t.K,Rb:!1,dc:this.dc,ad:null,He:!1,Vf:[],hd:null}},n.tf=function(t){t.He=!1},n.yd=function(t){return t.Vf.push(vh(t.w)),t.ad=_l(t.ad,t.w.g),t.He=!0,this.kg(t)},n.oc=function(t){var e;return t.He?(e=void 0,e=(e=ii(!0)).ea(function(){return t.Rb||(t.Vf=[],t.dc=!1,t.Cd=!1,t.ad=null),ii(!0)})):e=(e=this.Mf(t))&&e.Xa()?e:ii(!0),e.ea(function(){return t.Rb||(t.He=!1,t.hd=vh(t.w),t.ad=_l(t.ad,t.w.G)),ii(!0)})},Pl.prototype.bc=function(t){var e=this.za.bc();if(t){var n=new Bf(t=vh(this.sf[0]),null,t.xa,0);if(n.f(this.za,0),!e.w)return{Cb:n,w:t}}return e},Pl.prototype.Na=function(t,e,n){return this.za.Na(t,e,n)},Ml.prototype.dg=function(){},Ml.prototype.Gd=function(t){t=t.B||t.parent.B;for(var e;e=t.lastChild;)t.removeChild(e);for(;e=t.nextSibling;)e.parentNode.removeChild(e)},Ml.prototype.xf=function(t,e){this.f=vh(t),this.h=[].concat(e.N),this.D=[].concat(e.A),t.C&&(this.u=t.C.Xe())},Ml.prototype.ge=function(t,e){e.N=this.h,e.A=this.D,t.C&&t.C.We(this.u)};var Vl={"horizontal-tb":{ltr:[{ga:"inline-start",ha:"left"},{ga:"inline-end",ha:"right"},{ga:"block-start",ha:"top"},{ga:"block-end",ha:"bottom"},{ga:"inline-size",ha:"width"},{ga:"block-size",ha:"height"}],rtl:[{ga:"inline-start",ha:"right"},{ga:"inline-end",ha:"left"},{ga:"block-start",ha:"top"},{ga:"block-end",ha:"bottom"},{ga:"inline-size",ha:"width"},{ga:"block-size",ha:"height"}]},"vertical-rl":{ltr:[{ga:"inline-start",ha:"top"},{ga:"inline-end",ha:"bottom"},{ga:"block-start",ha:"right"},{ga:"block-end",ha:"left"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}],rtl:[{ga:"inline-start",ha:"bottom"},{ga:"inline-end",ha:"top"},{ga:"block-start",ha:"right"},{ga:"block-end",ha:"left"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}]},"vertical-lr":{ltr:[{ga:"inline-start",ha:"top"},{ga:"inline-end",ha:"bottom"},{ga:"block-start",ha:"left"},{ga:"block-end",ha:"right"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}],rtl:[{ga:"inline-start",ha:"bottom"},{ga:"inline-end",ha:"top"},{ga:"block-start",ha:"left"},{ga:"block-end",ha:"right"},{ga:"inline-size",ha:"height"},{ga:"block-size",ha:"width"}]}},Xl=zl(!0),Hl=zl(!1),Gl="inline";function Yl(t){switch(t){case Gl:return!1;case"column":case"region":case"page":return!0;default:throw Error("Unknown float-reference: "+t)}}function Kl(t,e,n,i,r,o){this.b=t,this.W=e,this.Ba=n,this.h=i,this.f=r,this.j=o,this.id=this.order=null}function Wl(t){if(!t.id)throw Error("The page float is not yet added");return t.id}function $l(){this.b=[],this.f=0}function Jl(t,e,n,i,r){this.W=t,this.Ba=e,this.Kb=n,this.b=i,this.g=r}function Zl(t,e){return t.Kb.some(function(t){return t.ja===e})}function ql(t,e){this.ja=t,this.b=e}function Ql(t,e,n,i,r,o,a){(this.parent=t)&&t.children.push(this),this.children=[],this.W=e,this.I=n,this.h=i,this.H=r,this.F=o||t&&t.F||ln,this.direction=a||t&&t.direction||yn,this.Nc=!1,this.u=t?t.u:new $l,this.A=[],this.b=[],this.j=[],this.l={},this.f=[];t:{for(e=this,t=this.parent;t;){if(e=ef(t,e,this.W,this.h,this.H)){t=e;break t}e=t,t=t.parent}t=null}this.G=t?[].concat(t.f):[],this.D=[],this.g=!1}function tf(t,e){if(!t.parent)throw Error("No PageFloatLayoutContext for "+e);return t.parent}function ef(t,e,n,i,r){for(0>(e=t.children.indexOf(e))&&(e=t.children.length),--e;0<=e;e--){var o=t.children[e];if(o.W===n&&o.h===i&&uh(o.H,r)||(o=ef(o,null,n,i,r)))return o}return null}function nf(t,e){return e&&e!==t.W?nf(tf(t,e),e):t.I}function rf(t,e){t.I=e,Tf(t)}function of(t,e){return e===t.W?t:of(tf(t,e),e)}function af(t,e){var n=Wl(e),i=e.W;i===t.W?t.A.includes(n)||(t.A.push(n),_f(e).ng(e,t)):af(tf(t,i),e)}function uf(t,e){var n=Wl(e),i=e.W;return i===t.W?t.A.includes(n):uf(tf(t,i),e)}function sf(t,e,n){var i=e.W;i!==t.W?sf(tf(t,i),e,n):t.b.includes(e)||(t.b.push(e),t.b.sort(function(t,e){return t.Ha()-e.Ha()})),n||Ef(t)}function hf(t,e,n){var i=e.W;i!==t.W?hf(tf(t,i),e,n):0<=(e=t.b.indexOf(e))&&((e=(e=t.b.splice(e,1)[0]).b&&e.b.element)&&e.parentNode&&e.parentNode.removeChild(e),n||Ef(t))}function lf(t,e){if(e.W!==t.W)return lf(tf(t,e.W),e);var n=t.b.findIndex(function(t){return Zl(t,e)});return 0<=n?t.b[n]:null}function ff(t,e){return!(!(0<t.b.length)||e&&!t.b.some(e))||!!t.parent&&ff(t.parent,e)}function cf(t,e,n){t.l[Wl(e)]=n}function pf(t,e){if(gf(t).some(function(t){return Wl(t.ja)===e}))return!0;var n=function t(e){var n=Object.assign({},e.l);return e.children.reduce(function(e,n){return Object.assign(e,t(n))},n)}(t)[e];return!!n&&(!(!t.I||!t.I.element)&&t.I.element.contains(n))}function bf(t,e){var n=e.ja;if(n.W===t.W){var i=t.f.findIndex(function(t){return t.ja===n});0<=i?t.f.splice(i,1,e):t.f.push(e)}else bf(tf(t,n.W),e)}function df(t,e,n){if(!n&&e.W!==t.W)return df(tf(t,e.W),e,!1);var i=e.Ha();return!!t.f.some(function(t){return t.ja.Ha()<i&&!e.cf(t.ja)})||!!t.parent&&df(t.parent,e,!0)}function gf(t,e){e=e||t.h;var n=t.G.filter(function(t){return!e||t.ja.f===e});return t.parent&&(n=gf(t.parent,e).concat(n)),n.sort(function(t,e){return t.ja.Ha()-e.ja.Ha()})}function vf(t,e){e=e||t.h;var n=t.f.filter(function(t){return!e||t.ja.f===e});return t.parent?vf(t.parent,e).concat(n):n}function wf(t){if(function(t){var e=function t(e){for(var n=[],i=[],r=e.children.length-1;0<=r;r--){var o=e.children[r];i.includes(o.h)||(i.push(o.h),n=(n=n.concat(o.f.map(function(t){return t.ja}))).concat(t(o)))}return n}(t);(n=t.b.reduce(function(t,e){return t.concat(e.Kb.map(function(t){return t.ja}))},[])).sort(function(t,e){return e.Ha()-t.Ha()});for(var n,i={},r=(n=l(n)).next();!r.done;i={ja:i.ja,order:i.order},r=n.next())if(i.ja=r.value,i.order=i.ja.Ha(),e.some(function(t){return function(e){return!t.ja.cf(e)&&t.order>e.Ha()}}(i)))return t.g?Ef(t):(af(t,i.ja),e=lf(t,i.ja),hf(t,e)),!0;return!1}(t))return!0;for(var e=t.b.length-1;0<=e;e--){var n,i=t.b[e];t:{n=t;for(var r=i.Kb.length-1;0<=r;r--){var o=i.Kb[r].ja;if(!pf(n,Wl(o))){n=o;break t}}n=null}if(n){if(t.g)Ef(t);else if(hf(t,i),af(t,n),"block-end"===(i=Sf(t,i.Ba))||"inline-end"===i)for(e=0;e<t.b.length;)Sf(t,(n=t.b[e]).Ba)===i?hf(t,n):e++;return!0}}return!("region"!==t.W||!t.parent.g)&&wf(t.parent)}function mf(t){if(!wf(t)){for(var e=t.f.length-1;0<=e;e--)if(!pf(t,Wl(t.f[e].ja))){if(t.g)return void Ef(t);t.f.splice(e,1)}t.G.forEach(function(t){0<=this.f.findIndex(function(e){return!!e&&(t===e||t.ja===e.ja&&uh(t.b,e.b))})||this.b.some(function(e){return Zl(e,t.ja)})||this.f.push(t)},t)}}function yf(t,e){return!!t.I&&!!e.I&&t.I.element===e.I.element}function Ef(t){t.Nc=!0,t.g||(t.I&&(t.children.forEach(function(t){yf(this,t)&&t.b.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)})},t),Bh(t.I)),t.children.forEach(function(t){t.D.splice(0)}),t.children.splice(0),Object.keys(t.l).forEach(function(t){delete this.l[t]},t))}function xf(t){return t.Nc||!!t.parent&&xf(t.parent)}function Sf(t,e){return Ul(e,t.F.toString(),t.direction.toString()||null,Hl)}function Cf(t,e,n,i,r){var o=Sf(t,e);e=Ul(e,t.F.toString(),t.direction.toString()||null,Xl);t:{var a=kf(t,n,i,r);switch(o){case"block-start":o=t.I.b?a.right:a.top;break t;case"block-end":o=t.I.b?a.left:a.bottom;break t;case"inline-start":o=t.I.b?a.top:a.left;break t;case"inline-end":o=t.I.b?a.bottom:a.right;break t;default:throw Error("Unknown logical side: "+o)}}if(t.parent&&t.parent.I)switch(t=Cf(t.parent,e,n,i,r),e){case"top":case"left":return Math.max(o,t);case"bottom":case"right":return Math.min(o,t);default:w("Should be unreachable")}return o}function kf(t,e,n,i){function r(t,i,r){if("%"===t.ka)t=r*t.L/100;else{r=t.L;var o,a=t.ka;t:switch(a.toLowerCase()){case"em":case"ex":case"rem":o=!0;break t;default:o=!1}if(o){for(;i&&1!==i.nodeType;)i=i.parentNode;t=Ga(t,i=parseFloat(Nb(n,i)["font-size"]),e.b).L}else t=(i=_t(e.b,a,!1))?r*i:t}return t}var o=t.I.F,a=t.I.G,u=Uh(t.I),s={top:u.T-a,left:u.V-o,bottom:u.P-a,right:u.U-o,Lc:0,Kc:0},h=t.b;return 0<h.length&&(s=h.reduce(function(e,n){if(i&&!i(n,t))return e;var o=Sf(t,n.Ba),a=n.b,s=n.Kb[0].ja.j,h=e.top,l=e.left,f=e.bottom,c=e.right,p=e.Lc,b=e.Kc;switch(o){case"inline-start":a.b?h=Math.max(h,a.top+a.height):l=Math.max(l,a.left+a.width);break;case"block-start":a.b?(s&&a.left<c&&(p=r(s,a.Ub[0],u.U-u.V)),c=Math.min(c,a.left)):(s&&a.top+a.height>h&&(p=r(s,a.Ub[0],u.P-u.T)),h=Math.max(h,a.top+a.height));break;case"inline-end":a.b?f=Math.min(f,a.top):c=Math.min(c,a.left);break;case"block-end":a.b?(s&&a.left+a.width>l&&(b=r(s,a.Ub[0],u.U-u.V)),l=Math.max(l,a.left+a.width)):(s&&a.top<f&&(b=r(s,a.Ub[0],u.P-u.T)),f=Math.min(f,a.top));break;default:throw Error("Unknown logical float side: "+o)}return{top:h,left:l,bottom:f,right:c,Lc:p,Kc:b}},s)),s.left+=o,s.right+=o,s.top+=a,s.bottom+=a,s}function Af(t,e,n,i,r,o,a,u){function s(t,n){var i=t(e.Hb,n);return i?(e.b&&(i=new io(-i.P,i.V,-i.T,i.U)),l=e.b?Math.min(l,i.U):Math.max(l,i.T),f=e.b?Math.max(f,i.V):Math.min(f,i.P),!0):a}if(n!==t.W)return Af(tf(t,n),e,n,i,r,o,a,u);var h=Sf(t,i);if("snap-block"===h){if(!u["block-start"]&&!u["block-end"])return null}else if(!u[h])return null;var l=Cf(t,"block-start",e.j,e.f),f=Cf(t,"block-end",e.j,e.f);n=Cf(t,"inline-start",e.j,e.f);var c,p=Cf(t,"inline-end",e.j,e.f),b=e.b?e.F:e.G,d=e.b?e.G:e.F;l=e.b?Math.min(l,e.left+jh(e)+e.width+Oh(e)+b):Math.max(l,e.top+b),f=e.b?Math.max(f,e.left+b):Math.min(f,e.top+_h(e)+e.height+Lh(e)+b);if(o){if(t=e.b?Eo(new io(f,n,l,p)):new io(n,l,p,f),("block-start"===h||"snap-block"===h||"inline-start"===h)&&!s(ko,t)||("block-end"===h||"snap-block"===h||"inline-end"===h)&&!s(Ao,t))return null;if(o=(c=(f-l)*Rh(e))-(e.b?Oh(e):_h(e))-(e.b?jh(e):Lh(e)),t=(r=p-n)-(e.b?_h(e):jh(e))-(e.b?Lh(e):Oh(e)),!a&&(0>=o||0>=t))return null}else{c=(o=e.h)+(e.b?Oh(e):_h(e))+(e.b?jh(e):Lh(e));var g=(f-l)*Rh(e);if("snap-block"===h&&(null===r?h="block-start":(h=Uh(t.I),h=Rh(t.I)*(r-(t.I.b?h.U:h.T))<=Rh(t.I)*((t.I.b?h.V:h.P)-r-c)?"block-start":"block-end"),!u[h])){if(!u["block-end"])return null;h="block-end"}if(!a&&g<c)return null;if(r=(t="inline-start"===h||"inline-end"===h?jb(e.f,e.element,[Lb])[Lb]:e.te?function(t){return Math.max.apply(null,t.Ub.map(function(t,e){var n=Tb(this.f,t),i=this.eg[e];return this.b?i.top+n.height+i.bottom:i.left+n.width+i.right},t))}(e):e.b?e.height:e.width)+(e.b?_h(e):jh(e))+(e.b?Lh(e):Oh(e)),!a&&p-n<r)return null}switch(l-=b,f-=b,n-=d,p-=d,h){case"inline-start":case"block-start":case"snap-block":Mh(e,n,t),Dh(e,l,o);break;case"inline-end":case"block-end":Mh(e,p-r,t),Dh(e,f-c*Rh(e),o);break;default:throw Error("unknown float direction: "+i)}return h}function Tf(t){var e=t.I.element&&t.I.element.parentNode;e&&t.b.forEach(function(t){e.appendChild(t.b.element)})}function Nf(t,e,n,i){function r(t){return function(e){return e.Ba===t&&e.Ha()<a}}if(e.W!==t.W)return Nf(tf(t,e.W),e,n,i);var o={"block-start":!0,"block-end":!0,"inline-start":!0,"inline-end":!0};if(!i)return o;n=Sf(t,n),i="all"===(i=Sf(t,i))?["block-start","block-end","inline-start","inline-end"]:"both"===i?["inline-start","inline-end"]:"same"===i?"snap-block"===n?["block-start","block-end"]:[n]:[i];var a=e.Ha();return i.forEach(function(t){switch(t){case"block-start":case"inline-start":o[t]=!function t(e,n){return e.children.some(function(e){return e.b.some(r(n))||t(e,n)})}(this,t);break;case"block-end":case"inline-end":o[t]=!function t(e,n){var i=e.parent;return!!i&&(i.b.some(r(n))||t(i,n))}(this,t);break;default:throw Error("Unexpected side: "+t)}},t),o}Kl.prototype.Ha=function(){if(null===this.order)throw Error("The page float is not yet added");return this.order},Kl.prototype.cf=function(){return!1},$l.prototype.mf=function(){return this.f++},$l.prototype.je=function(t){if(0<=this.b.findIndex(function(e){return uh(e.b,t.b)}))throw Error("A page float with the same source node is already registered");var e=t.order=this.mf();t.id="pf"+e,this.b.push(t)},$l.prototype.bf=function(t){var e=this.b.findIndex(function(e){return uh(e.b,t)});return 0<=e?this.b[e]:null},Jl.prototype.Ha=function(){var t=this.Kb.map(function(t){return t.ja});return Math.min.apply(null,t.map(function(t){return t.Ha()}))},Jl.prototype.f=function(t){return this.Ha()<t.Ha()},Ql.prototype.je=function(t){this.u.je(t)},Ql.prototype.bf=function(t){return this.u.bf(t)};var If=[];function _f(t){for(var e=If.length-1;0<=e;e--){var n=If[e];if(n.Df(t))return n}throw Error("No PageFloatLayoutStrategy found for "+t)}function Lf(){}(n=Lf.prototype).Ef=function(t){return Yl(t.W)},n.Df=function(){return!0},n.Kf=function(t,e,n){var i=t.W,r=t.Ba,o=mh(t);return function(t,e,n,i){var r=ni("resolveFloatReferenceFromColumnSpan"),o=t.l,a=of(o,"region");return nf(o).width<nf(a).width&&"column"===e?n===Xe?Jf(t,vh(i)).then(function(n){var i=n.B;n=jb(t.f,i,[_b])[_b],i=nc(t,i),(n=t.b?n+(i.top+i.bottom):n+(i.left+i.right))>t.width?wi(r,"region"):wi(r,e)}):wi(r,n===ze?"region":e):wi(r,e),r.result()}(n,i,t.ca,t).ea(function(n){return n=new Kl(o,i=n,r,t.l,e.h,t.N),e.je(n),ii(n)})},n.Lf=function(t,e,n,i){return new Jl(t[0].ja.W,e,t,n,i)},n.wf=function(t,e){return lf(e,t)},n.Af=function(){},n.ng=function(){},If.push(new Lf);var jf={img:!0,svg:!0,audio:!0,video:!0};function Of(t,e,n,i){var r=t.B;if(!r)return NaN;if(1==r.nodeType){if(t.K||!t.ya)if((o=Tb(e,r)).right>=o.left&&o.bottom>=o.top)return t.K?i?o.left:o.bottom:i?o.right:o.top;return NaN}var o=NaN,a=r.ownerDocument.createRange(),u=r.textContent.length;if(!u)return NaN;if(t.K&&(n+=u),n>=u&&(n=u-1),a.setStart(r,n),a.setEnd(r,n+1),t=Ab(e,a),n=i){if(n=document.body,null==et){var s=n.ownerDocument;(a=s.createElement("div")).style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.width="100px",a.style.height="100px",a.style.overflow="hidden",a.style.lineHeight="16px",a.style.fontSize="16px",P(a,"writing-mode","vertical-rl"),n.appendChild(a),u=s.createTextNode("a a a a a a a a a a a a a a a a"),a.appendChild(u),(s=s.createRange()).setStart(u,0),s.setEnd(u,1),u=s.getBoundingClientRect(),et=10>u.right-u.left,n.removeChild(a)}n=et}if(n){for((n=r.ownerDocument.createRange()).setStart(r,0),n.setEnd(r,r.textContent.length),e=Ab(e,n),r=[],n=(t=l(t)).next();!n.done;n=t.next()){for(n=n.value,a=0;a<e.length;a++)if(u=e[a],n.top>=u.top&&n.bottom<=u.bottom&&1>Math.abs(n.left-u.left)){r.push({top:n.top,left:u.left,bottom:n.bottom,right:u.right});break}a==e.length&&(C.b("Could not fix character box"),r.push(n))}t=r}for(e=0,t=(r=l(t)).next();!t.done;t=r.next())t=t.value,n=i?t.bottom-t.top:t.right-t.left,t.right>t.left&&t.bottom>t.top&&(isNaN(o)||n>e)&&(o=i?t.left:t.bottom,e=n);return o}function Rf(t){for(var e=Qn("RESOLVE_LAYOUT_PROCESSOR"),n=0;n<e.length;n++){var i=e[n](t);if(i)return i}throw Error("No processor found for a formatting context: "+t.Ve())}function Ff(t){this.Hd=t}function Pf(){}function Df(t,e){return{current:e.reduce(function(e,n){return e+n.b(t)},0),Fe:e.reduce(function(e,n){return e+n.F(t)},0)}}function Mf(t,e){this.h=t,this.Qc=e,this.j=!1,this.l=null}function Bf(t,e,n,i){this.position=t,this.F=e,this.A=this.j=n,this.D=i,this.h=!1,this.tc=0}function Uf(t){for(var e=1;e<t.length;e++){var n=t[e-1],i=t[e];n===i?C.b("validateCheckPoints: duplicate entry"):n.Ma>=i.Ma?C.b("validateCheckPoints: incorrect boxOffset"):n.M==i.M&&(i.K?n.K&&C.b("validateCheckPoints: duplicate after points"):n.K||i.Ma-n.Ma!=i.na-n.na&&C.b("validateCheckPoints: boxOffset inconsistent with offsetInNode"))}}function zf(t){this.parent=t}function Vf(t,e,n,i,r){Ih.call(this,t),this.j=e,this.f=n,this.Gc=i,this.Mg=t.ownerDocument,this.l=r,rf(r,this),this.jf=null,this.Zf=this.fg=!1,this.la=this.sa=this.D=this.kb=this.wa=0,this.Hb=this.cg=this.bg=null,this.Id=!1,this.g=this.N=null,this.Ib=!0,this.we=this.De=this.Ce=0,this.u=!0,this.zb=null,this.A=[],this.ta=this.Jd=null,this.hf=NaN}function Xf(t,e){return!(!e.Ba||t.fg&&!e.parent)}function Hf(t,e){return t.b?e<t.la:e>t.la}function Gf(t,e){if(t)for(var n;(n=t.lastChild)!=e;)t.removeChild(n)}Ff.prototype.b=function(t){return this.Hd.every(function(e){return e.b(t)})},Pf.prototype.u=function(){},Pf.prototype.g=function(){return null},d(Mf,Pf),Mf.prototype.f=function(t,e){return e<this.b()?null:(this.j||(this.l=function(t,e,n){for(var i=(h=e.h)[0];i.parent&&i.ya;)i=i.parent;var r;n?r=n=1:(n=Math.max((i.h.widows||2)-0,1),r=Math.max((i.h.orphans||2)-0,1));var i=gc(t,i),o=dc(t,h),a=t.la-i,i=Rh(t),u=vc(t,e),a=a-i*u,s=function(t,e){var n=e.findIndex(function(t){return t.xa});if(0>n)return{tc:NaN,Hf:null};var i=e[n];return{tc:tc(t,null,e,n,i.Ma),Hf:i}}(t,h);isNaN(s.tc)&&(s.tc=1/0*i);var h,l=0>=(h=K(o.length,function(e){return e=o[e],t.b?e<a||e<=s.tc:e>a||e>=s.tc}));if(l&&(h=K(o.length,function(e){return t.b?o[e]<a:o[e]>a})),(h=Math.min(o.length-n,h))<r)return null;a=o[h-1],(e=l?s.Hf:fc(t,e.h,a))&&(n=function(t,e){var n=e;do{n=n.parent}while(n&&n.ya);return n?((n=vh(n).modify()).K=!0,Of(n,t.f,0,t.b)):NaN}(t,e),!isNaN(n)&&n<a&&(a=n),t.h=i*(a-t.D)+u);return e}(t,this,0<e),this.j=!0),this.l)},Mf.prototype.b=function(){return this.Qc},Mf.prototype.g=function(){return this.j?this.l:this.h[this.h.length-1]},d(Bf,Pf),Bf.prototype.f=function(t,e){if(!this.h){var n=gc(t,this.position);this.tc=Of(this.position,t.f,0,t.b)+n,this.h=!0}n=this.tc;var i=Df(this.g(),Wv(t));return this.A=Hf(t,n+(t.b?-1:1)*i.Fe),this.j=this.position.xa=Hf(t,n+(t.b?-1:1)*i.current),e<this.b()?n=null:(t.h=this.D+vc(t,this),n=this.position),n},Bf.prototype.b=function(){if(!this.h)throw Error("EdgeBreakPosition.prototype.updateEdge not called");var t;if((t=this.g())&&t.parent){var e=kv(t.parent);t=!!e&&(!!(e=e.b)&&(t&&e.g===t.M))}else t=!1;return t=t&&!this.A,(Il[this.F]?1:0)+(this.j&&!t?3:0)+(this.position.parent?this.position.parent.j:0)},Bf.prototype.g=function(){return this.position},zf.prototype.Ve=function(){return"Block formatting context (adapt.layout.BlockFormattingContext)"},zf.prototype.ef=function(t,e){return e},zf.prototype.Xe=function(){},zf.prototype.We=function(){},d(Vf,Ih),Vf.prototype.Ed=function(t){var e=this,n=ni("openAllViews"),i=t.pa;!function(t,e,n){t.N=e,t.f=n}(e.j,e.element,e.Zf);var r=i.length-1,o=null;return Ei(function(){for(;0<=r;){if(o=hh(i[r],o),r!==i.length-1||o.C||(o.C=e.jf),!r){var n,a=o;if(n=(n=t).Qa?fv(n.Qa,n.na,1):n.na,a.na=n,o.K=t.K,o.Qa=t.Qa,o.K)break}if(a=db(e.j,o,!r&&!o.na),r--,a.Xa())return a}return ii(!1)}).then(function(){wi(n,o)}),n.result()};var Yf=/^[^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*([A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527][^A-Za-z0-9_\u009E\u009F\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02AF\u037B-\u037D\u0386\u0388-\u0482\u048A-\u0527]*)?/;function Kf(t,e){if(e.f&&e.ya&&!e.K&&!e.f.count&&1!=e.B.nodeType){var n=e.B.textContent.match(Yf);return Eb(t.j,e,n[0].length)}return ii(e)}function Wf(t,e,n){var i=!1,r=ni("buildViewToNextBlockEdge");return xi(function(r){e.B&&!bc(e)&&n.push(vh(e)),Kf(t,e).then(function(o){o!==e&&(bc(e=o)||n.push(vh(e))),$f(t,e).then(function(n){(e=n)?(!i&&t.Gc.b(e)||(i=!0,(e=e.modify()).xa=!0),Xf(t,e)&&!t.b?Cc(t,e).then(function(n){e=n,xf(t.l)&&(e=null),e?ki(r):Ai(r)}):e.ya?ki(r):Ai(r)):Ai(r)})})}).then(function(){wi(r,e)}),r.result()}function $f(t,e,n){return sw(e=vb(t.j,e,n),t)}function Jf(t,e){if(!e.B)return ii(e);var n=[],i=e.M,r=ni("buildDeepElementView");return xi(function(r){e.B&&e.ya&&!bc(e)?n.push(vh(e)):(0<n.length&&lc(t,e,n),n=[]),Kf(t,e).then(function(o){if(o!==e){for(var a=o;a&&a.M!=i;)a=a.parent;if(!a)return e=o,void Ai(r);bc(o)||n.push(vh(o))}$f(t,o).then(function(n){(e=n)&&e.M!=i?t.Gc.b(e)?ki(r):((e=e.modify()).xa=!0,t.u?Ai(r):ki(r)):Ai(r)})})}).then(function(){0<n.length&&lc(t,e,n),wi(r,e)}),r.result()}function Zf(t,e,n,i,r){var o=t.Mg.createElement("div");return t.b?(r>=t.height&&(r-=.1),P(o,"height",i+"px"),P(o,"width",r+"px")):(i>=t.width&&(i-=.1),P(o,"width",i+"px"),P(o,"height",r+"px")),P(o,"float",n),P(o,"clear",n),t.element.insertBefore(o,e),o}function qf(t){for(var e=t.element.firstChild;e;){var n=e.nextSibling;if(1==e.nodeType){var i=e.style.cssFloat;if("left"!=i&&"right"!=i)break;t.element.removeChild(e)}e=n}}function Qf(t){for(var e=t.element.firstChild,n=t.b?t.b?t.wa:t.D:t.b?t.sa:t.wa,i=t.b?t.b?t.kb:t.sa:t.b?t.D:t.kb,r=l(t.Hb),o=r.next();!o.done;o=r.next()){var a=(o=o.value).P-o.T;o.left=Zf(t,e,"left",o.V-n,a),o.right=Zf(t,e,"right",i-o.U,a)}}function tc(t,e,n,i,r){var o;if(e&&jc(e.B))return NaN;if(e&&e.K&&!e.ya&&(o=Of(e,t.f,0,t.b),!isNaN(o)))return o;for(r-=(e=n[i]).Ma;;){if(o=Of(e,t.f,r,t.b),!isNaN(o))return o;if(0<r)r--;else{if(0>--i)return t.D;1!=(e=n[i]).B.nodeType&&(r=e.B.textContent.length)}}}function ec(t){return"number"==typeof t?t:(t=t.match(/^(-?[0-9]*(\.[0-9]*)?)px$/))?parseFloat(t[0]):0}function nc(t,e){var n=Nb(t.f,e),i=new oo;return n&&(i.left=ec(n.marginLeft),i.top=ec(n.marginTop),i.right=ec(n.marginRight),i.bottom=ec(n.marginBottom)),i}function ic(t,e){var n=Nb(t.f,e),i=new oo;return n&&(i.left=ec(n.borderLeftWidth)+ec(n.paddingLeft),i.top=ec(n.borderTopWidth)+ec(n.paddingTop),i.right=ec(n.borderRightWidth)+ec(n.paddingRight),i.bottom=ec(n.borderBottomWidth)+ec(n.paddingBottom)),i}function rc(t,e,n,i,r,o,a,u){var s=t.l,h=(e=(u?u.Kb:[]).concat(e))[0].ja,l=Nf(s,h,n,i),f=function(t,e,n,i,r,o){P(a=t.element.ownerDocument.createElement("div"),"position","absolute");var a,u=of(t.l,e.W),s=new Ql(null,"column",null,t.l.h,e.b,null,null);u=nf(u),rf(s,a=new Dc(n,a,t.j.clone(),t.f,t.Gc,s,u)),u=e.W;var h=t.l;e=nf(h,u),s=a.element,e.element.parentNode.appendChild(s),a.fg=!0,a.F=e.F,a.G=e.G,a.b=e.b,a.marginLeft=a.marginRight=a.marginTop=a.marginBottom=0,a.Z=a.eb=a.ca=a.Da=0,a.H=a.Y=a.J=a.R=0,a.ub=(e.ub||[]).concat(),a.Ib=!ff(h),a.Vb=null;var l=Uh(e);return Ph(a,l.V-e.F,l.U-l.V),Fh(a,l.T-e.G,l.P-l.T),r.Af(a,e,t),Tc(a),(t=!!Af(h,a,u,n,i,!0,!ff(h),o))?(qf(a),Tc(a)):e.element.parentNode.removeChild(s),t?a:null}(t,h,n,a,o,l),c={Of:f,nf:null,lf:null};if(!f)return ii(c);var p=ni("layoutSinglePageFloatFragment"),b=!1,d=0;return xi(function(t){d>=e.length?Ai(t):_c(f,new xh(e[d].b),!0).then(function(e){c.lf=e,!e||r?(d++,ki(t)):(b=!0,Ai(t))})}).then(function(){if(!b){var t=Af(s,f,h.W,n,a,!1,r,l);t?(t=o.Lf(e,t,f,!!c.lf),sf(s,t,!0),c.nf=t):b=!0}wi(p,c)}),p.result()}function oc(t,e,n,i,r){function o(t,n){n?hf(a,n,!0):t&&t.element.parentNode.removeChild(t.element),function t(e,n){n!==e.W?t(tf(e,n),n):(e.j.forEach(function(t){sf(this,t,!0)},e),e.j.splice(0))}(a,u.W),bf(a,e)}var a=t.l,u=e.ja;!function t(e,n){var i=n.W;if(i!==e.W)t(tf(e,i),n);else if("block-end"===(i=Sf(e,n.Ba))||"snap-block"===i||"inline-end"===i)for(var r=0;r<e.b.length;){var o=e.b[r],a=Sf(e,o.Ba);(a===i||"snap-block"===i&&"block-end"===a)&&o.f(n)?(e.j.push(o),e.b.splice(r,1)):r++}}(a,u);var s=ni("layoutPageFloatInner");return rc(t,[e],u.Ba,u.h,!ff(a),n,i,r).then(function(e){var n=e.Of,i=e.nf,h=e.lf;i?function(t,e,n){var i=t.l,r=function t(e,n){return n===e.W?e.j.concat().sort(function(t,e){return e.Ha()-t.Ha()}):t(tf(e,n),n)}(i,e),o=[],a=[],u=!1,s=ni("layoutStashedPageFloats"),h=0;return xi(function(e){if(h>=r.length)Ai(e);else{var i=r[h];if(n.includes(i))h++,ki(e);else{var s=_f(i.Kb[0].ja);rc(t,i.Kb,i.Ba,null,!1,s,null).then(function(t){var n=t.Of;n&&o.push(n),(t=t.nf)?(a.push(t),h++,ki(e)):(u=!0,Ai(e))})}}}).then(function(){u?(a.forEach(function(t){hf(i,t,!0)}),o.forEach(function(t){(t=t.element)&&t.parentNode&&t.parentNode.removeChild(t)})):r.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)}),wi(s,!u)}),s.result()}(t,u.W,[r]).then(function(t){t?(sf(a,i),function t(e,n){n!==e.W?t(tf(e,n),n):e.j.splice(0)}(a,u.W),h&&bf(a,new ql(u,h.f)),wi(s,!0)):(o(n,i),wi(s,!1))}):(o(n,i),wi(s,!1))}),s.result()}function ac(t,e){var n=t.l,i=function(t){for(var e=If.length-1;0<=e;e--){var n=If[e];if(n.Ef(t))return n}throw Error("No PageFloatLayoutStrategy found for "+t)}(e),r=n.bf(mh(e));return(r?ii(r):i.Kf(e,n,t)).ea(function(r){var o=sh(e),a=function(t,e){var n=e.B.parentNode,i=n.ownerDocument.createElement("span");return i.setAttribute("data-adapt-spec","1"),"footnote"===e.Ba&&yb(t.j,e,"footnote-call",i),n.appendChild(i),n.removeChild(e.B),(n=e.modify()).K=!0,n.B=i,n}(t,e),u=i.wf(r,n);o=new ql(r,o);if(u&&Zl(u,r))return cf(n,r,a.B),ii(a);if(uf(n,r)||df(n,r))return bf(n,o),cf(n,r,a.B),ii(a);if(t.ta)return ii(null);var s=Of(a,t.f,0,t.b);return Hf(t,s)?ii(a):oc(t,o,i,s,u).ea(function(t){return t?ii(null):(cf(n,r,a.B),ii(a))})})}function uc(t,e,n){if(!e.K||e.ya){if(n){for(var i="",r=e.parent;r&&!i;r=r.parent)!r.ya&&r.B&&(i=r.B.style.textAlign);if("justify"!==i)return}var o=e.B,a=o.ownerDocument,u=n&&(e.K||1!=o.nodeType);if((i=u?o.nextSibling:o)&&!i.parentNode&&(i=null),r=o.parentNode||e.parent&&e.parent.B){var s=i,h=document.body;if(null===it){var l=h.ownerDocument,f=l.createElement("div");f.style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.width="40px",f.style.height="100px",f.style.lineHeight="16px",f.style.fontSize="16px",f.style.textAlign="justify",h.appendChild(f);var c=l.createTextNode("a a-");f.appendChild(c);var p=l.createElement("span");p.style.display="inline-block",p.style.width="40px",f.appendChild(p),(l=l.createRange()).setStart(c,2),l.setEnd(c,4),it=37>l.getBoundingClientRect().right,h.removeChild(f)}if(it&&((u=(u=u?o:o.previousSibling)?u.textContent:"").charAt(u.length-1)===pc(e)&&(u=o.ownerDocument,o=o.parentNode,h=document.body,null===rt&&((f=(l=h.ownerDocument).createElement("div")).style.position="absolute",f.style.top="0px",f.style.left="0px",f.style.width="40px",f.style.height="100px",f.style.lineHeight="16px",f.style.fontSize="16px",f.style.textAlign="justify",h.appendChild(f),c=l.createTextNode("a a-"),f.appendChild(c),f.appendChild(l.createElement("wbr")),(p=l.createElement("span")).style.display="inline-block",p.style.width="40px",f.appendChild(p),(l=l.createRange()).setStart(c,2),l.setEnd(c,4),rt=37>l.getBoundingClientRect().right,h.removeChild(f)),rt?o.insertBefore(u.createTextNode(" "),s):o.insertBefore(u.createElement("wbr"),s))),u=e.b,(o=a.createElement("span")).style.visibility="hidden",o.style.verticalAlign="top",o.setAttribute("data-adapt-spec","1"),(h=a.createElement("span")).style.fontSize="0",h.style.lineHeight="0",h.textContent=" #",o.appendChild(h),o.style.display="block",o.style.textIndent="0",o.style.textAlign="left",r.insertBefore(o,s),s=Tb(t.f,h),o.style.textAlign="right",h=Tb(t.f,h),o.style.textAlign="",f=document.body,null===nt){(c=(p=f.ownerDocument).createElement("div")).style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.width="30px",c.style.height="100px",c.style.lineHeight="16px",c.style.fontSize="16px",c.style.textAlign="justify",f.appendChild(c),l=p.createTextNode("a | "),c.appendChild(l);var b=p.createElement("span");b.style.display="inline-block",b.style.width="30px",c.appendChild(b),(p=p.createRange()).setStart(l,0),p.setEnd(l,3),nt=27>p.getBoundingClientRect().right,f.removeChild(c)}o.style.display=nt?"inline":"inline-block",s=1<=(s=u?h.top-s.top:h.left-s.left)?s-1+"px":"100%",u?o.style.paddingTop=s:o.style.paddingLeft=s,n||(n=a.createElement("div"),r.insertBefore(n,i),i=Tb(t.f,o),t=Tb(t.f,n),e.b?(n.style.marginRight=t.right-i.right+"px",n.style.width="0px"):(n.style.marginTop=i.top-t.top+"px",n.style.height="0px"),n.setAttribute("data-adapt-spec","1"))}}}function sc(t,e){for(var n=0,i=0,r=e.length-1;0<=r;r--){var o=e[r];if(!o.K||!o.B||1!=o.B.nodeType)break;o=nc(t,o.B),0<(o=t.b?-o.left:o.bottom)?n=Math.max(n,o):i=Math.min(i,o)}return n-i}function hc(t,e){var n=ni("layoutBreakableBlock"),i=[];return Wf(t,e,i).then(function(r){if(0>(o=i.length-1))wi(n,r);else{var o=tc(t,r,i,o,i[o].Ma),a=!1;if(!r||!jc(r.B)){var u=Df(r,Wv(t));a=Hf(t,o+(t.b?-1:1)*u.Fe);Hf(t,o+(t.b?-1:1)*u.current)&&!t.ta&&(t.ta=r)}r||(o+=sc(t,i)),Ic(t,o),(e.f?function(t,e,n,i){var r=ni("processLineStyling");Uf(i);var o=i.concat([]);i.splice(0,i.length);var a=0,u=e.f;return 0==u.count&&(u=u.Hg),xi(function(i){if(u){var r=dc(t,o),s=u.count-a;if(r.length<=s)Ai(i);else{var h=fc(t,o,r[s-1]);h?t.Na(h,!1,!1).then(function(){a+=s,Eb(t.j,h,0).then(function(r){uc(t,e=r,!1),u=e.f,Wf(t,e,o=[]).then(function(t){n=t,ki(i)})})}):Ai(i)}}else Ai(i)}).then(function(){Array.prototype.push.apply(i,o),Uf(i),wi(r,n)}),r.result()}(t,e,r,i):ii(r)).then(function(e){lc(t,e,i),0<i.length&&(t.N.push(new Mf(i,i[0].j)),a&&(2!=i.length&&0<t.N.length||i[0].M!=i[1].M||!jf[i[0].M.localName])&&e&&((e=e.modify()).xa=!0)),wi(n,e)})}}),n.result()}function lc(t,e,n){Qn("POST_LAYOUT_BLOCK").forEach(function(i){i(e,n,t)})}function fc(t,e,n){Uf(e);var i=t.b?n-1:n+1,r=0,o=e[0].Ma;n=r;for(var a,u=e.length-1,s=e[u].Ma;o<s;){a=o+Math.ceil((s-o)/2),n=r;for(var h=u;n<h;){var l=n+Math.ceil((h-n)/2);e[l].Ma>a?h=l-1:n=l}if(h=tc(t,null,e,n,a),t.b?h<=i:h>=i){for(s=a-1;e[n].Ma==a;)n--;u=n}else Ic(t,h),o=a,r=n}return i=o,1!=(n=(e=e[n]).B).nodeType&&(function(t){Qn("RESOLVE_TEXT_NODE_BREAKER").reduce(function(e,n){return n(t)||e},cc)}(e),e.K?e.na=n.length:(r=i-e.Ma,173==(i=n.data).charCodeAt(r)?(n.replaceData(r,i.length-r,e.A?"":pc(e)),n=r+1):(o=i.charAt(r),r++,u=i.charAt(r),n.replaceData(r,i.length-r,!e.A&&H(o)&&H(u)?pc(e):""),n=r),0<(r=n)&&(n=r,(e=e.modify()).na+=n,e.g=null))),Ac(t,e,!1),e}var cc=new function(){};function pc(t){return t.F||t.parent&&t.parent.F||"-"}function bc(t){return!!t&&(!(!(t=t.B)||1!==t.nodeType)&&!!t.getAttribute("data-adapt-spec"))}function dc(t,e){for(var n=[],i=e[0].B,r=e[e.length-1].B,o=[],a=i.ownerDocument.createRange(),u=!1,s=null,h=!1,l=!0;l;){var f=!0;do{var c=null;if(i==r&&(l=1===r.nodeType&&!(!r.firstChild||u)),1!=i.nodeType)h||(a.setStartBefore(i),h=!0),s=i;else if(u)u=!1;else if(i.getAttribute("data-adapt-spec"))f=!h;else{var p;if(!(p="ruby"==i.localName))t:{switch(Nb(t.f,i).display){case"ruby":case"inline-block":case"inline-flex":case"inline-grid":case"inline-list-item":case"inline-table":p=!0;break t}p=!1}p?((f=!h)&&(a.setStartBefore(i),h=!0,s=i),i.contains(r)&&(l=!1)):c=i.firstChild}c||((c=i.nextSibling)||(u=!0,c=i.parentNode)),i=c}while(f&&l);if(h){for(a.setEndAfter(s),h=Ab(t.f,a),f=0;f<h.length;f++)o.push(h[f]);h=!1}}for(o.sort(t.b?oh:rh),s=i=u=a=r=0,l=Rh(t);;)if(s<o.length&&(h=o[s],f=1,0<i&&(f=Math.max(t.b?h.right-h.left:h.bottom-h.top,1),f=l*(t.b?h.right:h.top)<l*r?l*((t.b?h.left:h.bottom)-r)/f:l*(t.b?h.left:h.bottom)>l*a?l*(a-(t.b?h.right:h.top))/f:1),!i||.6<=f||.2<=f&&(t.b?h.top:h.left)>=u-1))u=t.b?h.bottom:h.right,t.b?(r=i?Math.max(r,h.right):h.right,a=i?Math.min(a,h.left):h.left):(r=i?Math.min(r,h.top):h.top,a=i?Math.max(a,h.bottom):h.bottom),i++,s++;else if(0<i&&(n.push(a),i=0),s>=o.length)break;return n.sort(W),t.b&&n.reverse(),n}function gc(t,e){var n=0;return yh(e,function(e){if("clone"===e.h["box-decoration-break"]){var i=ic(t,e.B);n+=e.b?-i.left:i.bottom,"table"===e.display&&(n+=e.ta)}}),n}function vc(t,e){return Df(e?e.g():null,Wv(t)).current}function wc(t,e,n,i,r){if(xf(t.l)||t.g||!n)return ii(e);var o=ni("doFinishBreak"),a=!1;if(!e){if(t.Ib)return C.b("Could not find any page breaks?!!"),function(t,e){var n=vh(e),i=ni("skipEdges"),r=null,o=!1;return xi(function(i){for(;e;){do{if(e.B){if(e.ya&&1!=e.B.nodeType){if(th(e.B,e.qc))break;if(!e.K)return Nl[r]&&(t.g=r),void Ai(i)}if(!e.K&&(Xf(t,e)||e.H))return r=_l(r,e.g),Nl[r]&&(t.g=r),void Ai(i);if(1==e.B.nodeType){var a=e.B.style;if(e.K){if(o){if(Nl[r])return t.g=r,void Ai(i);r=null}o=!1,r=_l(r,e.G)}else{if(r=_l(r,e.g),jf[e.B.localName])return Nl[r]&&(t.g=r),void Ai(i);if(a&&(!mc(a.paddingTop)||!mc(a.borderTopWidth)))return void Ai(i)}o=!0}}}while(0);if((a=vb(t.j,e)).Xa())return void a.then(function(t){e=t,ki(i)});e=a.get()}n=null,Ai(i)}).then(function(){wi(i,n)}),i.result()}(t,n).then(function(e){e?((e=e.modify()).xa=!1,t.Na(e,a,!0).then(function(){wi(o,e)})):wi(o,e)}),o.result();e=i,a=!0,t.h=r}return t.Na(e,a,!0).then(function(){wi(o,e)}),o.result()}function mc(t){return""==(t=t.toString())||"auto"==t||!!t.match(/^0+(.0*)?[^0-9]/)}function yc(t,e,n){if(!e||jc(e.B))return!1;var i=Of(e,t.f,0,t.b),r=Df(e,Wv(t)),o=Hf(t,i+(t.b?-1:1)*r.Fe);return Hf(t,i+(t.b?-1:1)*r.current)&&!t.ta?t.ta=e:n&&(e=i+sc(t,n),r=t.la-Rh(t)*r.current,i=t.b?Math.min(i,Math.max(e,r)):Math.max(i,Math.min(e,r))),Ic(t,i),o}function Ec(t,e,n,i,r){return!(!e||jc(e.B))&&(n=yc(t,e,n),!i&&n||Nc(t,e,r,n),n)}function xc(t,e){if(!e.B.parentNode)return!1;var n=nc(t,e.B),i=e.B.ownerDocument.createElement("div");t.b?(i.style.bottom="0px",i.style.width="1px",i.style.marginRight=n.right+"px"):(i.style.right="0px",i.style.height="1px",i.style.marginTop=n.top+"px"),e.B.parentNode.insertBefore(i,e.B);var r=Tb(t.f,i),o=(r=t.b?r.right:r.top,Rh(t)),a=e.l,u=1/0*-Rh(t);switch("all"===a&&(u=function(t,e){function n(t){return function(e){return pf(t,Wl(e.ja))}}function i(t,e){return t.Kb.some(n(e))}for(var r=Uh(e),o=(r=e.b?r.V:r.P,t);o;){if(o.f.some(n(o)))return r;o=o.parent}return o=Cf(t,"block-start",e.j,e.f,i),Cf(t,"block-end",e.j,e.f,i)*Rh(e)<r*Rh(e)?r:o}(t.l,t)),a){case"left":u=o*Math.max(u*o,t.Ce*o);break;case"right":u=o*Math.max(u*o,t.De*o);break;default:u=o*Math.max(u*o,Math.max(t.De*o,t.Ce*o))}return r*o>=u*o?(e.B.parentNode.removeChild(i),!1):(r=Math.max(1,(u-r)*o),t.b?i.style.width=r+"px":i.style.height=r+"px",r=Tb(t.f,i),r=t.b?r.left:r.bottom,t.b?(0<(u=r+n.right-u)==0<=n.right&&(u+=n.right),i.style.marginLeft=u+"px"):(0<(u-=r+n.top)==0<=n.top&&(u+=n.top),i.style.marginBottom=u+"px"),e.D=i,!0)}function Sc(t){return t instanceof zf||!(t instanceof Ew)&&t instanceof Tv}function Cc(t,e){return Yl(e.W)||"footnote"===e.Ba?ac(t,e):function(t,e){var n=ni("layoutFloat"),i=e.B,r=e.Ba;return P(i,"float","none"),P(i,"display","inline-block"),P(i,"vertical-align","top"),Jf(t,e).then(function(o){for(var a=Tb(t.f,i),u=nc(t,i),s=(a=new io(a.left-u.left,a.top-u.top,a.right+u.right,a.bottom+u.bottom),u=t.wa,t.kb),h=e.parent;h&&h.ya;)h=h.parent;if(h){var f=h.B.ownerDocument.createElement("div");f.style.left="0px",f.style.top="0px",t.b?(f.style.bottom="0px",f.style.width="1px"):(f.style.right="0px",f.style.height="1px"),h.B.appendChild(f);var c=Tb(t.f,f);u=Math.max(t.b?c.top:c.left,u),s=Math.min(t.b?c.bottom:c.right,s),h.B.removeChild(f),f=t.b?a.P-a.T:a.U-a.V,"left"==r?s=Math.max(s,u+f):u=Math.min(u,s-f),h.B.appendChild(e.B)}f=new io(u,Rh(t)*t.D,s,Rh(t)*t.sa),u=a,t.b&&(u=Eo(a)),s=Rh(t),u.T<t.we*s&&(c=u.P-u.T,u.T=t.we*s,u.P=u.T+c),s=t.Hb;t:for(var p=(c=u).T,b=c.U-c.V,d=c.P-c.T,g=Co(s,p);;){var v=p+d;if(v>f.P)break t;for(var w=f.V,m=f.U,y=g;y<s.length&&s[y].T<v;y++){var E=s[y];E.V>w&&(w=E.V),E.U<m&&(m=E.U)}if(w+b<=m||g>=s.length){"left"==r?(c.V=w,c.U=w+b):(c.V=m-b,c.U=m),c.P+=p-c.T,c.T=p;break t}p=s[g].P,g++}t.b&&(a=new io(-u.P,u.V,-u.T,u.U));t:{if(f=Nb(t.f,i),s=new oo,f){if("border-box"==f.boxSizing){f=nc(t,i);break t}s.left=ec(f.marginLeft)+ec(f.borderLeftWidth)+ec(f.paddingLeft),s.top=ec(f.marginTop)+ec(f.borderTopWidth)+ec(f.paddingTop),s.right=ec(f.marginRight)+ec(f.borderRightWidth)+ec(f.paddingRight),s.bottom=ec(f.marginBottom)+ec(f.borderBottomWidth)+ec(f.paddingBottom)}f=s}if(P(i,"width",a.U-a.V-f.left-f.right+"px"),P(i,"height",a.P-a.T-f.top-f.bottom+"px"),P(i,"position","absolute"),P(i,"display",e.display),s=null,h)if(h.R)s=h;else t:{for(h=h.parent;h;){if(h.R){s=h;break t}h=h.parent}s=null}if(s?((f=s.B.ownerDocument.createElement("div")).style.position="absolute",s.b?f.style.right="0":f.style.left="0",f.style.top="0",s.B.appendChild(f),h=Tb(t.f,f),s.B.removeChild(f)):h={left:(t.b?t.sa:t.wa)-t.H,right:(t.b?t.D:t.kb)+t.Y,top:(t.b?t.wa:t.D)-t.J},(s?s.b:t.b)?P(i,"right",h.right-a.U+"px"):P(i,"left",a.V-h.left+"px"),P(i,"top",a.T-h.top+"px"),e.D&&(e.D.parentNode.removeChild(e.D),e.D=null),h=t.b?a.V:a.P,a=t.b?a.U:a.T,Hf(t,h)&&t.N.length)(e=e.modify()).xa=!0,wi(n,e);else{for(qf(t),f=new io(t.b?t.sa:t.wa,t.b?t.wa:t.D,t.b?t.D:t.kb,t.b?t.kb:t.sa),t.b&&(f=Eo(f)),s=t.Hb,c=[new uo(u.T,u.P,u.V,u.U)];0<c.length&&c[0].P<=f.T;)c.shift();if(c.length){for(c[0].T<f.T&&(c[0].T=f.T),(u=s.length?s[s.length-1].P:f.T)<f.P&&s.push(new uo(u,f.P,f.V,f.U)),u=Co(s,c[0].T),p=(c=l(c)).next();!p.done&&(b=p.value,u!=s.length);p=c.next())for(s[u].T<b.T&&(p=s[u],u++,s.splice(u,0,new uo(b.T,p.P,p.V,p.U)),p.P=b.T);u<s.length&&((p=s[u++]).P>b.P&&(s.splice(u,0,new uo(b.P,p.P,p.V,p.U)),p.P=b.P),b.V!=b.U&&("left"==r?p.V=Math.min(b.U,f.U):p.U=Math.max(b.V,f.V)),p.P!=b.P););So(f,s)}Qf(t),"left"==r?t.Ce=h:t.De=h,t.we=a,Ic(t,h),wi(n,o)}}),n.result()}(t,e)}function kc(t,e,n,i){var r=ni("layoutNext");return function(t,e,n,i){function r(){return!!i||!n&&!!Nl[l]}function o(){(e=c[0]||e).B.parentNode.removeChild(e.B),u.g=l}var a=e.K?e.parent&&e.parent.C:e.C;if(a&&!Sc(a))return ii(e);var u=t,s=ni("skipEdges"),h=!i&&n&&e&&e.K,l=i,f=null,c=[],p=[],b=!1;return xi(function(t){for(;e;){var i=Rf(e.C);do{if(e.B){if(e.ya&&1!=e.B.nodeType){if(th(e.B,e.qc))break;if(!e.K)return r()?o():Ec(u,f,null,!0,l)?(e=(u.u&&f||e).modify()).xa=!0:(e=e.modify()).g=l,void Ai(t)}if(!e.K){if(i&&i.Ye(e))break;if(e.l&&xc(u,e)&&n&&!u.N.length&&Nc(u,vh(e),l,!1),!Sc(e.C)||e.C instanceof Tv||Xf(u,e)||e.H)return c.push(vh(e)),l=_l(l,e.g),r()?o():!Ec(u,f,null,!0,l)&&u.Gc.b(e)||((e=(u.u&&f||e).modify()).xa=!0),void Ai(t)}if(1==e.B.nodeType){var a=e.B.style;if(e.K){if(!(e.ya||i&&i.zf(e,u.u))){if(b){if(r())return o(),void Ai(t);c=[],h=n=!1,l=null}b=!1,f=vh(e),p.push(f),l=_l(l,e.G),!a||mc(a.paddingBottom)&&mc(a.borderBottomWidth)||(p=[f])}}else{if(c.push(vh(e)),l=_l(l,e.g),!u.Gc.b(e)&&(Ec(u,f,null,!u.u,l),(e=e.modify()).xa=!0,u.u))return void Ai(t);if(jf[e.B.localName])return r()?o():Ec(u,f,null,!0,l)&&((e=(u.u&&f||e).modify()).xa=!0),void Ai(t);!a||mc(a.paddingTop)&&mc(a.borderTopWidth)||(h=!1,p=[]),b=!0}}}}while(0);if((i=$f(u,e,h)).Xa())return void i.then(function(n){e=n,ki(t)});e=i.get()}Ec(u,f,p,!u.u,l)?f&&u.u&&((e=f.modify()).xa=!0):Nl[l]&&(u.g=l),Ai(t)}).then(function(){f&&(u.zb=mh(f)),wi(s,e)}),s.result()}(t,e,n,i||null).then(function(i){!(e=i)||t.g||t.u&&e&&e.xa?wi(r,e):Rf(e.C).he(e,t,n).La(r)}),r.result()}function Ac(t,e,n){if(e)for(var i=e.parent;e;e=i,i=i?i.parent:null)Rf((i||e).C).Bd(t,i,e,n),n=!1}function Tc(t){t.cg=[],P(t.element,"width",t.width+"px"),P(t.element,"height",t.height+"px"),(n=t.element.ownerDocument.createElement("div")).style.position="absolute",n.style.top=t.J+"px",n.style.right=t.Y+"px",n.style.bottom=t.R+"px",n.style.left=t.H+"px",t.element.appendChild(n);var e=Tb(t.f,n);t.element.removeChild(n);var n=t.F+t.left+jh(t),i=t.G+t.top+_h(t);if(t.bg=new io(n,i,n+t.width,i+t.height),t.wa=e?t.b?e.top:e.left:0,t.kb=e?t.b?e.bottom:e.right:0,t.D=e?t.b?e.right:e.top:0,t.sa=e?t.b?e.left:e.bottom:0,t.Ce=t.D,t.De=t.D,t.we=t.D,t.la=t.sa,e=t.bg,i=new io(n=t.F+t.left+jh(t),i=t.G+t.top+_h(t),n+t.width,i+t.height),t.Vb){n=i.V,i=i.T;for(var r=[],o=l(t.Vb.b),a=o.next();!a.done;a=o.next())a=a.value,r.push(new ro(a.f+n,a.b+i));n=new ho(r)}else n=co(i.V,i.T,i.U,i.P);n=[n],i=function t(e){var n=e.b.map(function(t){return zh(t.b,null,null)});return e.parent?t(e.parent).concat(n):n}(t.l),t.Hb=function(t,e,n,i,r){r&&(t=Eo(t),e=q(e,xo),n=q(n,xo)),r=e.length;var o,a,u,s=n?n.length:0,h=[],l=[];for(o=0;o<r;o++)lo(e[o],l,o);for(o=0;o<s;o++)lo(n[o],l,o+r);for(e=l.length,l.sort(so),n=0;l[n].g>=r;)n++;(n=l[n].b.b)>t.T&&h.push(new uo(t.T,n,t.U,t.U)),o=0;for(var f=[];o<e&&(u=l[o]).b.b<n;)u.f.b>n&&f.push(u),o++;for(;o<e||0<f.length;){var c=t.P,p=Math.min(wo(Math.ceil(n+8),i),t.P);for(a=0;a<f.length&&c>p;a++)(u=f[a]).b.f==u.f.f?u.f.b<c&&(c=Math.max(mo(u.f.b,i),p)):u.b.f!=u.f.f&&(c=p);for(c>t.P&&(c=t.P);o<e&&(u=l[o]).b.b<c;)if(u.f.b<n)o++;else{if(!(u.b.b<p)){(a=mo(u.b.b,i))<c&&(c=a);break}u.b.b==u.f.b&&u.b.b==n||(f.push(u),c=p),o++}for(p=[],a=0;a<f.length;a++)go(p,f[a],n,c);if(p.sort(function(t,e){return t.f-e.f||t.g-e.g}),(p=vo(p,r,s)).length){var b=0,d=t.V;for(a=0;a<p.length;a+=2){var g=Math.max(t.V,p[a]),v=Math.min(t.U,p[a+1])-g;v>b&&(b=v,d=g)}b?h.push(new uo(n,c,Math.max(d,t.V),Math.min(d+b,t.U))):h.push(new uo(n,c,t.U,t.U))}else h.push(new uo(n,c,t.U,t.U));if(c==t.P)break;for(n=c,a=f.length-1;0<=a;a--)f[a].f.b<=c&&f.splice(a,1)}return So(t,h),h}(e,n,t.ub.concat(i),t.Wb,t.b),Qf(t),t.h=0,t.Id=!1,t.g=null,t.zb=null}function Nc(t,e,n,i){var r=vh(e);e=Rf(e.C);var o=gc(t,r);n=e.Jf(r,n,i,t.h+o),t.N.push(n)}function Ic(t,e){isNaN(e)||(t.h=Math.max(Rh(t)*(e-t.D),t.h))}function _c(t,e,n,i){if(t.cg.push(e),e.f.K&&(t.zb=e.f),t.u&&t.Id)return ii(e);if(function(t,e){for(var n=e.j,i=e.f,r=t,o=null;r&&r.I;){var a=kf(r,n,i);o?e.b?(a.right<o.right&&(o.right=a.right,o.Lc=a.Lc),a.left>o.left&&(o.left=a.left,o.Kc=a.Kc)):(a.top>o.top&&(o.top=a.top,o.Lc=a.Lc),a.bottom<o.bottom&&(o.bottom=a.bottom,o.Kc=a.Kc)):o=a,r=r.parent}return(e.b?o.right-o.left:o.bottom-o.top)<=Math.max(o.Lc,o.Kc)}(t.l,t))return e.f.K&&1===e.f.pa.length?ii(null):ii(e);var r=ni("layout");return t.Ed(e.f).then(function(e){var o=null;if(e.B)o=vh(e);else{var a=function(e){e.w.B&&(o=e.w,t.j.removeEventListener("nextInTree",a))};t.j.addEventListener("nextInTree",a)}var u=new Oc(n,i);Bl(u,e,t).then(function(e){wc(t,e,u.g.Td,o,u.b).then(function(e){(t.Jd?ii(null):function(t,e){var n=ni("doFinishBreakOfFragmentLayoutConstraints"),i=[].concat(t.A);i.sort(function(t,e){return t.se()-e.se()});var r=0;return Ei(function(){return r<i.length?i[r++].Na(e,t).Ec(!0):ii(!1)}).then(function(){wi(n,!0)}),n.result()}(t,e)).then(function(){if(xf(t.l))wi(r,null);else if(e){t.Id=!0;var n=new xh(mh(e));wi(r,n)}else wi(r,null)})})})}),r.result()}function Lc(t){var e=function(t){var e=nf(t).b;return t.b.filter(function(t){return"block-end"===t.Ba}).reduce(function(t,n){var i=Vh(n.b);return e?Math.max(t,i.U):Math.min(t,i.T)},e?0:1/0)}(t.l);0<e&&isFinite(e)&&(t.hf=Rh(t)*(e-t.D-t.h))}function jc(t){for(;t;){if(t.parentNode===t.ownerDocument)return!1;t=t.parentNode}return!0}function Oc(t,e){Ml.call(this),this.dc=t,this.A=e||null,this.l=null,this.b=0,this.j=!1,this.g={Td:null}}function Rc(t,e,n){this.dc=t,this.j=e,this.h=n}function Fc(){}Vf.prototype.Na=function(t,e,n){var i=Rf(t.C).Na(this,t,e,n);return i||(i=Pc.Na(this,t,e,n)),i},Vf.prototype.bc=function(){var t,e=null,n=null,i=0;do{t=i;i=Number.MAX_VALUE;for(var r=this.N.length-1;0<=r&&!n;--r){n=(e=this.N[r]).f(this,t);var o=e.b();o>t&&(i=Math.min(i,o))}}while(i>t&&!n&&this.Ib);return{Cb:n?e:null,w:n}},d(Oc,Ml),(n=Oc.prototype).pf=function(){return new Rc(this.dc,this.A,this.g)},n.dg=function(t,e){e.A=[],e.Jd||(Lv=[])},n.Gd=function(t){for(Ml.prototype.Gd.call(this,t);t;){var e=t.B;e&&Gf(e.parentNode,e),t=t.parent}},n.xf=function(t,e){Ml.prototype.xf.call(this,t,e),this.l=e.g,this.b=e.h,this.j=e.Id},n.ge=function(t,e){Ml.prototype.ge.call(this,t,e),e.g=this.l,e.h=this.b,e.Id=this.j},Rc.prototype.b=function(t,e){var n=this,i=ni("adapt.layout.DefaultLayoutMode.doLayout");return function(t,e){var n=ni("vivliostyle.selectors.processAfterIfContinuesOfAncestors"),i=t;return Ei(function(){if(i){var t=Jv(i,e);return i=i.parent,t.Ec(!0)}return ii(!1)}).then(function(){wi(n,!0)}),n.result()}(t,e).then(function(){(function(t,e,n,i){var r=ni("doLayout"),o=null;return t.N=[],t.ta=null,xi(function(r){for(var a={};e;){if(a.Oa=!0,kc(t,e,n,i||null).then(function(a){return function(u){n=!1,i=null,t.ta&&t.u?(t.g=null,(e=t.ta).xa=!0):e=u,xf(t.l)?Ai(r):t.g?Ai(r):e&&t.u&&e&&e.xa?(o=e,u=t.bc(),e=u.w,u.Cb&&u.Cb.u(t),Ai(r)):a.Oa?a.Oa=!1:ki(r)}}(a)),a.Oa)return void(a.Oa=!1);a={Oa:a.Oa}}t.h+=vc(t),Ai(r)}).then(function(){wi(r,{w:e,Td:o})}),r.result()})(e,t,n.dc,n.j).then(function(t){n.h.Td=t.Td,wi(i,t.w)})}),i.result()},Rc.prototype.f=function(t,e){var n=this;return!!(xf(e.l)||e.g||0>=e.A.length)||e.A.every(function(i){return i.ie(t,n.h.Td,e)})},Rc.prototype.g=function(t,e,n,i){return i||(i=!n.A.some(function(e){return e.kd(t)})),n.A.forEach(function(r){r.$c(i,t,e,n)}),i},(n=Fc.prototype).he=function(t,e){var n;if(Xf(e,t))n=Cc(e,t);else{t:if(t.K)n=!0;else{switch(t.M.namespaceURI){case"http://www.w3.org/2000/svg":n=!1;break t}n=!t.H}n=n?hc(e,t):Jf(e,t)}return n},n.Jf=function(t,e,n,i){return new Bf(vh(t),e,n,i)},n.Ye=function(){return!1},n.zf=function(){return!1},n.Bd=function(t,e,n,i){n.B&&n.B.parentNode&&(Gf(t=n.B.parentNode,n.B),i&&t.removeChild(n.B))},n.Na=function(t,e,n,i){return Ac(t,e,n=n||!!e.B&&1==e.B.nodeType&&!e.K),i&&(uc(t,e,!0),Sb(n?e:e.parent)),ii(!0)};var Pc=new Fc;function Dc(t,e,n,i,r,o,a){Vf.call(this,e,n,i,r,o),this.Ba=t,this.gg=a,this.Ub=[],this.eg=[],this.te=!0}function Mc(t,e){function n(t,n){t.forEach(function(t){var i=D(e,t);i&&"%"===i.charAt(i.length-1)&&P(e,t,n*parseFloat(i)/100+"px")})}var i=(r=Uh(t.gg)).U-r.V,r=r.P-r.T;n(["width","max-width","min-width"],i),n(["height","max-height","min-height"],r),n("margin-top margin-right margin-bottom margin-left padding-top padding-right padding-bottom padding-left".split(" "),t.b?r:i),["margin-top","margin-right","margin-bottom","margin-left"].forEach(function(t){"auto"===D(e,t)&&P(e,t,"0")})}function Bc(t,e,n){var i=Tb(e.f,t);return t=nc(e,t),n?i.width+t.left+t.right:i.height+t.top+t.bottom}function Uc(t){var e={};return Object.keys(t).forEach(function(n){e[n]=Array.from(t[n])}),e}function zc(t,e){this.Dc=t,this.qd=e,this.Je=null,this.aa=this.O=-1}function Vc(t,e){this.b=t,this.f=e}function Xc(t,e,n,i){this.b=t,this.g=e,this.j=n,this.f=i,this.h=null}function Hc(t){return(t=t.match(/^[^#]*#(.*)$/))?t[1]:null}function Gc(t,e){var n=t.b.J.kc(N(e,t.g),t.g);return"#"===n.charAt(0)&&(n=n.substring(1)),n}function Yc(t,e,n,i){var r=t.b.l[n];if(!r&&i&&e){if(i=t.h,e){for(i.D=e,e=0;i.D&&gl(i,e+=5e3,0)!==Number.POSITIVE_INFINITY;);i.D=null}r=t.b.l[n]}return r||null}function Kc(t){this.J=t,this.l={},this.A={},this.b={},this.b.page=[0],this.G={},this.F=[],this.D={},this.j=null,this.u=[],this.g=[],this.H=[],this.f={},this.h={},this.Le=[]}function Wc(t,e){var n=t.f[e],i=t.h[e];i||(i=t.h[e]=[]);for(var r=!1,o=0;o<t.g.length;){var a=t.g[o];a.Dc===e?(a.qd=!0,t.g.splice(o,1),n&&(0<=(r=n.indexOf(a))&&n.splice(r,1)),i.push(a),r=!0):o++}r||$c(t,e,!0)}function $c(t,e,n){t.u.some(function(t){return t.Dc===e})||t.u.push(new zc(e,n))}function Jc(t,e,n,i){"pages"===e&&t.Le.push({Jc:i,format:n})}function Zc(t){return t.N.bind(t)}function qc(t,e){this.f=t,this.aa=e}qn("RESOLVE_FORMATTING_CONTEXT",function(t,e,n,i,r,o){return!(e=t.parent)&&t.C?null:e&&t.C!==e.C?null:t.ed||!t.C&&Gp(n,i,r,o).display===Ye?new zf(e?e.C:null):null}),qn("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof zf?Pc:null}),d(Dc,Vf),Dc.prototype.Ed=function(t){var e=this;return Vf.prototype.Ed.call(this,t).ea(function(t){if(t){for(var n=t;n.parent;)n=n.parent;if(n=n.B,e.Ub.push(n),e.te&&Mc(e,n),e.eg.push(nc(e,n)),e.te){var i=e.Ba;e.gg.b?"block-end"!==i&&"left"!==i||""!==(i=D(n,"height"))&&"auto"!==i&&P(n,"margin-top","auto"):"block-end"!==i&&"bottom"!==i||""!==(i=D(n,"width"))&&"auto"!==i&&P(n,"margin-left","auto")}}return ii(t)})},Kc.prototype.N=function(t,e,n){return 0<=this.Le.findIndex(function(e){return e.Jc===t})?((n=n.createElement("span")).textContent=e,n.setAttribute("data-vivliostyle-pages-counter",t.g),n):null},qc.prototype.b=function(t){return!(t&&!t.K)||(!(t=t.B)||1!==t.nodeType||(!(t=t.getAttribute("id")||t.getAttribute("name"))||!this.f.h[t]&&!this.f.f[t]||(!(t=this.f.D[t])||this.aa>=t.aa)))};var Qc=1;function tp(t,e,n,i,r){this.b={},this.children=[],this.g=null,this.index=0,this.f=t,this.name=e,this.jc=n,this.Pa=i,this.parent=r,this.j="p"+Qc++,r&&(this.index=r.children.length,r.children.push(this))}function ep(t,e){var n,i=t.b,r=e.b;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}function np(t,e){for(var n=0;n<t.children.length;n++)t.children[n].clone({parent:e})}function ip(t){tp.call(this,t,null,null,[],null),this.b.width=new Oa(Gn,0),this.b.height=new Oa(Yn,0)}function rp(t,e){this.g=e;var n=this;Ct.call(this,t,function(t,e){if(r=t.match(/^([^.]+)\.([^.]+)$/)){var i=n.g.l[r[1]];if(i&&(i=this.wa[i])){if(e){var r=r[2];if(h=i.la[r])i=h;else{switch(r){case"columns":var o=new ce(h=i.f.f,0),a=dp(i,"column-count"),u=dp(i,"column-width"),s=dp(i,"column-gap"),h=de(h,ge(h,new se(h,"min",[o,a]),be(h,u,s)),s)}h&&(i.la[r]=h),i=h}}else i=dp(i,r[2]);return i}}return null})}function op(t,e,n,i,r,o,a){t=t instanceof rp?t:new rp(t,this),tp.call(this,t,e,n,i,r),this.g=this,this.ia=o,this.ba=a,this.b.width=new Oa(Gn,0),this.b.height=new Oa(Yn,0),this.b["wrap-flow"]=new Oa(Xe,0),this.b.position=new Oa(An,0),this.b.overflow=new Oa(Vn,0),this.b.top=new Oa(new Ie(-1,"px"),0),this.l={}}function ap(t,e,n,i,r){tp.call(this,t,e,n,i,r),this.g=r.g,e&&(this.g.l[e]=this.j),this.b["wrap-flow"]=new Oa(Xe,0)}function up(t,e,n,i,r){tp.call(this,t,e,n,i,r),this.g=r.g,e&&(this.g.l[e]=this.j)}function sp(t,e,n){return e&&e!==Xe?e.Aa(t,n):null}function hp(t,e,n){return e&&e!==Xe?e.Aa(t,n):t.b}function lp(t,e,n){return e?e===Xe?null:e.Aa(t,n):t.b}function fp(t,e,n,i){return e&&n!==En?e.Aa(t,i):t.b}function cp(t,e,n){return e?e===Xn?t.j:e===rn?t.h:e.Aa(t,t.b):n}function pp(t,e){this.g=t,this.f=e,this.J={},this.style={},this.A=this.D=null,this.children=[],this.N=this.R=this.h=this.j=!1,this.G=this.H=0,this.F=null,this.sa={},this.la={},this.wa=this.Z=this.b=!1,t&&t.children.push(this)}function bp(t,e,n){if(e=dp(t,e),n=dp(t,n),!e||!n)throw Error("E_INTERNAL");return be(t.f.f,e,n)}function dp(t,e){var n=t.sa[e];if(n)return n;switch((o=t.style[e])&&(n=o.Aa(t.f.f,t.f.f.b)),e){case"margin-left-edge":n=dp(t,"left");break;case"margin-top-edge":n=dp(t,"top");break;case"margin-right-edge":n=bp(t,"border-right-edge","margin-right");break;case"margin-bottom-edge":n=bp(t,"border-bottom-edge","margin-bottom");break;case"border-left-edge":n=bp(t,"margin-left-edge","margin-left");break;case"border-top-edge":n=bp(t,"margin-top-edge","margin-top");break;case"border-right-edge":n=bp(t,"padding-right-edge","border-right-width");break;case"border-bottom-edge":n=bp(t,"padding-bottom-edge","border-bottom-width");break;case"padding-left-edge":n=bp(t,"border-left-edge","border-left-width");break;case"padding-top-edge":n=bp(t,"border-top-edge","border-top-width");break;case"padding-right-edge":n=bp(t,"right-edge","padding-right");break;case"padding-bottom-edge":n=bp(t,"bottom-edge","padding-bottom");break;case"left-edge":n=bp(t,"padding-left-edge","padding-left");break;case"top-edge":n=bp(t,"padding-top-edge","padding-top");break;case"right-edge":n=bp(t,"left-edge","width");break;case"bottom-edge":n=bp(t,"top-edge","height")}if(!n){if("extent"==e)o=t.b?"width":"height";else if("measure"==e)o=t.b?"height":"width";else{var i,r=t.b?Ia:_a,o=e;for(i in r)o=o.replace(i,r[i])}o!=e&&(n=dp(t,o))}return n&&(t.sa[e]=n),n}function gp(t,e,n,i){return Rt(t=t.style[e].Aa(t.f.f,null),n,i,{})}function vp(t,e){e.wa[t.f.j]=t;var n=t.f.f,i=t.style,r=t.g?yp(t.g,e):null;r=ys(t.J,e,r,!1);t.b=ws(r,e,!!t.g&&t.g.b),t.Z=ms(r,e,!!t.g&&t.g.Z),Ss(r,i,t.b,t.Z,function(t,e){return e.value}),t.D=new ue(n,function(){return t.H},"autoWidth"),t.A=new ue(n,function(){return t.G},"autoHeight"),t.ye(),t.ze(),function(t){var e=t.f.f,n=t.style;t=sp(e,n[t.b?"height":"width"],null);var i,r=sp(e,n["column-width"],t),o=sp(e,n["column-count"],null);(i=(i=n["column-gap"])&&i!==xn?i.Aa(e,null):null)||(i=new re(e,1,"em")),r&&!o&&(o=new se(e,"floor",[ve(e,be(e,t,i),be(e,r,i))]),o=new se(e,"max",[e.f,o])),o||(o=e.f),r=de(e,ve(e,be(e,t,i),o),i),n["column-width"]=new Me(r),n["column-count"]=new Me(o),n["column-gap"]=new Me(i)}(t),function(t){var e=t.f.f,n=t.style,i=cp(e,n.enabled,e.j),r=sp(e,n.page,e.b);r&&(i=pe(e,i,new Zt(e,r,new oe(e,"page-number"))));(r=sp(e,n["min-page-width"],e.b))&&(i=pe(e,i,new Jt(e,new oe(e,"page-width"),r))),(r=sp(e,n["min-page-height"],e.b))&&(i=pe(e,i,new Jt(e,new oe(e,"page-height"),r))),i=t.Y(i),n.enabled=new Me(i)}(t)}function wp(t,e,n){return(t=t.style[n])&&(t=no(e,t,n)),t}function mp(t,e,n){return(t=t.style[n])&&(t=no(e,t,n)),Be(t,e)}function yp(t,e){var n;t:{if(n=t.J["region-id"]){for(var i=[],r=0;r<n.length;r++){var o=n[r].evaluate(e,"");o&&o!==Se&&i.push(o)}if(i.length){n=i;break t}}n=null}if(n){for(i=[],r=0;r<n.length;r++)i[r]=n[r].toString();return i}return null}function Ep(t,e,n,i,r){(t=wp(t,e,i))&&(t.wc()&&Tt(t.ka)&&(t=new Ie(Be(t,e),"px")),"font-family"===i&&(t=Cl(r,t)),P(n,i,t.toString()))}function xp(t,e,n){var i=mp(t,e,"left"),r=mp(t,e,"margin-left"),o=mp(t,e,"padding-left"),a=mp(t,e,"border-left-width");Ph(n,i,t=mp(t,e,"width")),P(n.element,"margin-left",r+"px"),P(n.element,"padding-left",o+"px"),P(n.element,"border-left-width",a+"px"),n.marginLeft=r,n.Z=a,n.H=o}function Sp(t,e,n){var i=mp(t,e,"right"),r=mp(t,e,"snap-height"),o=mp(t,e,"margin-right"),a=mp(t,e,"padding-right");e=mp(t,e,"border-right-width"),P(n.element,"margin-right",o+"px"),P(n.element,"padding-right",a+"px"),P(n.element,"border-right-width",e+"px"),n.marginRight=o,n.eb=e,t.b&&0<r&&(t=i+Oh(n),0<(t-=Math.floor(t/r)*r)&&(n.Ld=r-t,a+=n.Ld)),n.Y=a,n.Od=r}function Cp(t,e,n){var i=mp(t,e,"snap-height"),r=mp(t,e,"top"),o=mp(t,e,"margin-top"),a=mp(t,e,"padding-top");e=mp(t,e,"border-top-width"),n.top=r,n.marginTop=o,n.ca=e,n.Wb=i,!t.b&&0<i&&(t=r+_h(n),0<(t-=Math.floor(t/i)*i)&&(n.Ab=i-t,a+=n.Ab)),n.J=a,P(n.element,"top",r+"px"),P(n.element,"margin-top",o+"px"),P(n.element,"padding-top",a+"px"),P(n.element,"border-top-width",e+"px")}function kp(t,e,n){var i=mp(t,e,"margin-bottom"),r=mp(t,e,"padding-bottom"),o=mp(t,e,"border-bottom-width");t=mp(t,e,"height")-n.Ab,P(n.element,"height",t+"px"),P(n.element,"margin-bottom",i+"px"),P(n.element,"padding-bottom",r+"px"),P(n.element,"border-bottom-width",o+"px"),n.height=t-n.Ab,n.marginBottom=i,n.Da=o,n.R=r}function Ap(t,e,n){t.b?(Cp(t,e,n),kp(t,e,n)):(Sp(t,e,n),xp(t,e,n))}function Tp(t,e,n){P(n.element,"border-top-width","0px");var i=mp(t,e,"max-height");t.R?Fh(n,0,i):(Cp(t,e,n),i-=n.Ab,n.height=i,P(n.element,"height",i+"px"))}function Np(t,e,n){P(n.element,"border-left-width","0px");var i=mp(t,e,"max-width");t.N?Ph(n,0,i):(Sp(t,e,n),i-=n.Ld,n.width=i,t=mp(t,e,"right"),P(n.element,"right",t+"px"),P(n.element,"width",i+"px"))}tp.prototype.h=function(){throw Error("E_UNEXPECTED_CALL")},tp.prototype.clone=function(){throw Error("E_UNEXPECTED_CALL")},d(ip,tp),d(rp,Ct),d(op,tp),op.prototype.h=function(t){return new Pp(t,this)},op.prototype.clone=function(t){return ep(this,t=new op(this.f,this.name,t.jc||this.jc,this.Pa,this.parent,this.ia,this.ba)),np(this,t),t},d(ap,tp),ap.prototype.h=function(t){return new Dp(t,this)},ap.prototype.clone=function(t){return ep(this,t=new ap(t.parent.f,this.name,this.jc,this.Pa,t.parent)),np(this,t),t},d(up,tp),up.prototype.h=function(t){return new Mp(t,this)},up.prototype.clone=function(t){return ep(this,t=new up(t.parent.f,this.name,this.jc,this.Pa,t.parent)),np(this,t),t},pp.prototype.Y=function(t){return t},pp.prototype.ye=function(){var t=this.f.f,e=this.style,n=this.g?this.g.style.width.Aa(t,null):null,i=sp(t,e.left,n),r=sp(t,e["margin-left"],n),o=fp(t,e["border-left-width"],e["border-left-style"],n),a=hp(t,e["padding-left"],n),u=sp(t,e.width,n),s=sp(t,e["max-width"],n),h=hp(t,e["padding-right"],n),l=fp(t,e["border-right-width"],e["border-right-style"],n),f=sp(t,e["margin-right"],n),c=sp(t,e.right,n),p=be(t,o,a),b=be(t,o,h);i&&c&&u?(p=de(t,n,be(t,u,be(t,be(t,i,p),b))),r?f?c=de(t,p,f):f=de(t,p,be(t,c,r)):(p=de(t,p,c),f?r=de(t,p,f):f=r=ge(t,p,new le(t,.5)))):(r||(r=t.b),f||(f=t.b),i||c||u||(i=t.b),i||u?i||c?u||c||(u=this.D,this.j=!0):i=t.b:(u=this.D,this.j=!0),p=de(t,n,be(t,be(t,r,p),be(t,f,b))),this.j&&(s||(s=de(t,p,i||c)),this.b||!sp(t,e["column-width"],null)&&!sp(t,e["column-count"],null)||(u=s,this.j=!1)),i?u?c||(c=de(t,p,be(t,i,u))):u=de(t,p,be(t,i,c)):i=de(t,p,be(t,c,u))),t=hp(t,e["snap-width"]||(this.g?this.g.style["snap-width"]:null),n),e.left=new Me(i),e["margin-left"]=new Me(r),e["border-left-width"]=new Me(o),e["padding-left"]=new Me(a),e.width=new Me(u),e["max-width"]=new Me(s||u),e["padding-right"]=new Me(h),e["border-right-width"]=new Me(l),e["margin-right"]=new Me(f),e.right=new Me(c),e["snap-width"]=new Me(t)},pp.prototype.ze=function(){var t=this.f.f,e=this.style,n=this.g?this.g.style.width.Aa(t,null):null,i=this.g?this.g.style.height.Aa(t,null):null,r=sp(t,e.top,i),o=sp(t,e["margin-top"],n),a=fp(t,e["border-top-width"],e["border-top-style"],n),u=hp(t,e["padding-top"],n),s=sp(t,e.height,i),h=sp(t,e["max-height"],i),l=hp(t,e["padding-bottom"],n),f=fp(t,e["border-bottom-width"],e["border-bottom-style"],n),c=sp(t,e["margin-bottom"],n),p=sp(t,e.bottom,i),b=be(t,a,u),d=be(t,f,l);r&&p&&s?(i=de(t,i,be(t,s,be(t,be(t,r,b),d))),o?c?p=de(t,i,o):c=de(t,i,be(t,p,o)):(i=de(t,i,p),c?o=de(t,i,c):c=o=ge(t,i,new le(t,.5)))):(o||(o=t.b),c||(c=t.b),r||p||s||(r=t.b),r||s?r||p?s||p||(s=this.A,this.h=!0):r=t.b:(s=this.A,this.h=!0),i=de(t,i,be(t,be(t,o,b),be(t,c,d))),this.h&&(h||(h=de(t,i,r||p)),this.b&&(sp(t,e["column-width"],null)||sp(t,e["column-count"],null))&&(s=h,this.h=!1)),r?s?p||(p=de(t,i,be(t,r,s))):s=de(t,i,be(t,p,r)):r=de(t,i,be(t,p,s))),t=hp(t,e["snap-height"]||(this.g?this.g.style["snap-height"]:null),n),e.top=new Me(r),e["margin-top"]=new Me(o),e["border-top-width"]=new Me(a),e["padding-top"]=new Me(u),e.height=new Me(s),e["max-height"]=new Me(h||s),e["padding-bottom"]=new Me(l),e["border-bottom-width"]=new Me(f),e["margin-bottom"]=new Me(c),e.bottom=new Me(p),e["snap-height"]=new Me(t)};var Ip="border-left-style border-right-style border-top-style border-bottom-style border-left-color border-right-color border-top-color border-bottom-color outline-style outline-color outline-width overflow visibility".split(" "),_p="border-top-left-radius border-top-right-radius border-bottom-right-radius border-bottom-left-radius border-image-source border-image-slice border-image-width border-image-outset border-image-repeat background-attachment background-color background-image background-repeat background-position background-clip background-origin background-size opacity z-index".split(" "),Lp="color font-family font-size font-style font-weight font-variant line-height letter-spacing text-align text-decoration text-indent text-transform white-space word-spacing".split(" "),jp=["width","height"],Op=["transform","transform-origin"];function Rp(t,e){t.j&&(t.N=gp(t,"right",t.D,e)||gp(t,"margin-right",t.D,e)||gp(t,"border-right-width",t.D,e)||gp(t,"padding-right",t.D,e)),t.h&&(t.R=gp(t,"top",t.A,e)||gp(t,"margin-top",t.A,e)||gp(t,"border-top-width",t.A,e)||gp(t,"padding-top",t.A,e));for(var n=l(t.children),i=n.next();!i.done;i=n.next())Rp(i.value,e)}function Fp(t){pp.call(this,null,t)}function Pp(t,e){pp.call(this,t,e),this.F=this}function Dp(t,e){pp.call(this,t,e),this.F=t.F}function Mp(t,e){pp.call(this,t,e),this.F=t.F}function Bp(t,e,n,i){var r=null;if(n instanceof Te&&(r=[n]),n instanceof Pe&&(r=n.values),r)for(t=t.f.f,n=0;n<r.length;n++)if(r[n]instanceof Te){var o=new oe(t,o=xt(r[n].name,"enabled"));i&&(o=new zt(t,o)),e=pe(t,e,o)}return e}function Up(t,e,n,i){Cr.call(this,t,e,!1),this.target=n,this.b=i}function zp(t,e,n,i){Up.call(this,t,e,n,i)}function Vp(t,e,n,i){Up.call(this,t,e,n,i),n.b.width=new Oa(Hn,0),n.b.height=new Oa(Hn,0)}function Xp(t,e,n,i){Up.call(this,t,e,n,i)}function Hp(t){switch(t=t.toString()){case"inline-flex":t="flex";break;case"inline-grid":t="grid";break;case"inline-table":t="table";break;case"inline":case"table-row-group":case"table-column":case"table-column-group":case"table-header-group":case"table-footer-group":case"table-row":case"table-cell":case"table-caption":case"inline-block":t="block"}return Ne(t)}function Gp(t,e,n,i){return t!==En&&(e===Ue||e===on?(n=En,t=Hp(t)):(n&&n!==En||i)&&(t=Hp(t))),{display:t,position:e,ja:n}}function Yp(t){switch(t.toString()){case"inline":case"inline-block":case"inline-list-item":case"inline-flex":case"inline-grid":case"ruby":case"inline-table":return!0;default:return!1}}function Kp(t,e,n){return t.replace(/[uU][rR][lL]\(\s*\"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\r\n])+)\"/gm,function(t,i){return'url("'+n.kc(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*\'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\'\r\n])+)\'/gm,function(t,i){return"url('"+n.kc(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\'\r\n\)\s])+)/gm,function(t,i){return"url("+n.kc(i,e)})}pp.prototype.hc=function(t,e,n,i){for(this.g&&this.b==this.g.b||P(e.element,"writing-mode",this.b?"vertical-rl":"horizontal-tb"),(this.b?this.j:this.h)?this.b?Np(this,t,e):Tp(this,t,e):(this.b?Sp(this,t,e):Cp(this,t,e),this.b?xp(this,t,e):kp(this,t,e)),(this.b?this.h:this.j)?this.b?Tp(this,t,e):Np(this,t,e):Ap(this,t,e),n=0;n<Ip.length;n++)Ep(this,t,e.element,Ip[n],i)},pp.prototype.Nd=function(t,e,n,i,r,o,a){this.b?this.H=e.h+e.Ld:this.G=e.h+e.Ab;var u=(this.b||!i)&&this.h,s=(!this.b||!i)&&this.j;if((s||u)&&(s&&P(e.element,"width","auto"),u&&P(e.element,"height","auto"),i=Tb(o,i?i.element:e.element),s&&(this.H=Math.ceil(i.right-i.left-e.H-e.Z-e.Y-e.eb),this.b&&(this.H+=e.Ld)),u&&(this.G=i.bottom-i.top-e.J-e.ca-e.R-e.Da,this.b||(this.G+=e.Ab))),(this.b?this.h:this.j)&&Ap(this,t,e),(this.b?this.j:this.h)&&((this.b?this.N:this.R)&&(this.b?Sp(this,t,e):Cp(this,t,e)),this.b?xp(this,t,e):kp(this,t,e)),1<r&&(s=mp(this,t,"column-rule-width"),i=wp(this,t,"column-rule-style"),o=wp(this,t,"column-rule-color"),0<s&&i&&i!=En&&o!=Bn)){var h=mp(this,t,"column-gap"),l=this.b?e.height:e.width,f=this.b?"border-top":"border-left";for(u=1;u<r;u++){var c=(l+h)*u/r-h/2+e.H-s/2,p=e.height+e.J+e.R,b=e.element.ownerDocument.createElement("div");P(b,"position","absolute"),P(b,this.b?"left":"top","0px"),P(b,this.b?"top":"left",c+"px"),P(b,this.b?"height":"width","0px"),P(b,this.b?"width":"height",p+"px"),P(b,f,s+"px "+i.toString()+(o?" "+o.toString():"")),e.element.insertBefore(b,e.element.firstChild)}}for(u=0;u<_p.length;u++)Ep(this,t,e.element,_p[u],a);for(u=0;u<Op.length;u++)r=e,a=Op[u],s=n.l,(i=wp(this,t,a))&&s.push(new Ws(r.element,a,i))},pp.prototype.l=function(t,e){var n,i=this.J,r=this.f.b;for(n in r)Da(n)&&Ma(i,n,r[n]);if("background-host"==this.f.jc)for(n in e)(n.match(/^background-/)||"writing-mode"==n)&&(i[n]=e[n]);if("layout-host"==this.f.jc)for(n in e)n.match(/^background-/)||"writing-mode"==n||(i[n]=e[n]);for(qu(t,this.f.Pa,null,i),i.content&&(i.content=i.content.Md(new Fu(t,null,t.zb))),vp(this,t.l),r=(i=l(this.f.children)).next();!r.done;r=i.next())r.value.h(this).l(t,e);us(t)},d(Fp,pp),Fp.prototype.l=function(t,e){pp.prototype.l.call(this,t,e),this.children.sort(function(t,e){return e.f.ba-t.f.ba||t.f.index-e.f.index})},d(Pp,pp),Pp.prototype.Y=function(t){var e=this.f.g;return e.ia&&(t=pe(e.f,t,e.ia)),t},Pp.prototype.ca=function(){},d(Dp,pp),d(Mp,pp),Mp.prototype.Y=function(t){var e,n=this.f.f,i=this.style,r=cp(n,i.required,n.h)!==n.h;(r||this.h)&&(t=pe(n,t,e=new se(n,"has-content",[e=(e=i["flow-from"])?e.Aa(n,n.b):new le(n,"body")])));return t=Bp(this,t,i["required-partitions"],!1),t=Bp(this,t,i["conflicting-partitions"],!0),r&&(i=pe(n,i=(i=this.F.style.enabled)?i.Aa(n,null):n.j,t),this.F.style.enabled=new Me(i)),t},Mp.prototype.hc=function(t,e,n,i,r){P(e.element,"overflow","hidden"),pp.prototype.hc.call(this,t,e,n,i,r)},d(Up,kr),Up.prototype.Mb=function(t,e,n){ga(this.b,t,e,n,this)},Up.prototype.de=function(t,e){Ar(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},Up.prototype.gd=function(t,e){Ar(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},Up.prototype.Ob=function(t,e,n){this.target.b[t]=new Oa(e,n?50331648:67108864)},d(zp,Up),d(Vp,Up),Vp.prototype.vd=function(t,e,n){t=new up(this.f,t,e,n,this.target),Sr(this.oa,new zp(this.f,this.oa,t,this.b))},Vp.prototype.ud=function(t,e,n){t=new ap(this.f,t,e,n,this.target),t=new Vp(this.f,this.oa,t,this.b),Sr(this.oa,t)},d(Xp,Up),Xp.prototype.vd=function(t,e,n){t=new up(this.f,t,e,n,this.target),Sr(this.oa,new zp(this.f,this.oa,t,this.b))},Xp.prototype.ud=function(t,e,n){t=new ap(this.f,t,e,n,this.target),t=new Vp(this.f,this.oa,t,this.b),Sr(this.oa,t)},Kp=function(t,e,n){return t.replace(/[uU][rR][lL]\(\s*\"((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\r\n])+)\"/gm,function(t,i){return'url("'+n.kc(i,e)+'"'}).replace(/[uU][rR][lL]\(\s*\'((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\'\r\n])+)\'/gm,function(t,i){return"url('"+n.kc(i,e)+"'"}).replace(/[uU][rR][lL]\(\s*((\\([^0-9a-fA-F]+|[0-9a-fA-F]+\s*)|[^\"\'\r\n\)\s])+)/gm,function(t,i){return"url("+n.kc(i,e)})};var Wp={"text-indent":"0px","margin-top":"0px","padding-top":"0px","border-top-width":"0px","border-top-style":"none","border-top-color":"transparent","border-top-left-radius":"0px","border-top-right-radius":"0px"},$p={"text-indent":"0px","margin-right":"0px","padding-right":"0px","border-right-width":"0px","border-right-style":"none","border-right-color":"transparent","border-top-right-radius":"0px","border-bottom-right-radius":"0px"},Jp={"margin-top":"0px"},Zp={"margin-right":"0px"},qp={};var Qp=(new DOMParser).parseFromString('<root xmlns="http://www.pyroxy.com/ns/shadow"/>',"text/xml"),tb="footnote-marker first-5-lines first-4-lines first-3-lines first-2-lines first-line first-letter before  after".split(" ");function eb(t,e){t.setAttribute("data-adapt-pseudo",e)}function nb(t,e,n,i,r){this.style=e,this.element=t,this.b=n,this.g=i,this.h=r,this.f={}}function ib(t,e,n,i,r,o,a,u,s,h,l,f,c){this.Lb={},this.G=t,this.b=e,this.viewport=n,this.D=n.b,this.j=i,this.u=Zc(i.Da.b),this.l=r,this.da=o,this.H=a,this.A=u,this.J=s,this.page=h,this.g=l,this.F=f,this.h=c,this.N=this.w=null,this.f=!1,this.M=null,this.na=0,this.B=null}function rb(t,e,n,i){if(!(t=t._pseudos))return null;var r,o={},a={};for(r in t)a.bd=o[r]={},xs(a.bd,t[r],i),tw(a.bd,i,t[r]),Es(t[r],e,n,function(t){return function(e,n){xs(t.bd,n,i),ew(n,function(e){xs(t.bd,e,i)})}}(a)),a={bd:a.bd};return o}function ob(t,e,n,i,r,o){var a=ni("createRefShadow");return t.da.u.load(e).then(function(u){if(u){var s=Os(u,e);if(s){var h=t.J;if(!(l=h.J[u.url])){var l=h.style.F.f[u.url],f=new Nt(0,h.gc(),h.fc(),h.u);l=new ul(u,l.g,l.f,f,h.l,l.G,new Vc(h.h,u.url),new Xc(h.h,u.url,l.f,l.b));h.J[u.url]=l}o=new fh(i,s,u,r,o,n,l)}}wi(a,o)}),a.result()}function ab(t,e,n,i,r){var o=t.b;e=ws(i=ys(i,o,t.l,t.f),o,e),n=ms(i,o,n),Ss(i,r,e,n,function(e,n){var i=n.evaluate(o,e);return"font-family"==e&&(i=Cl(t.H,i)),i});var a=Gp(r.display||cn,r.position,r.float,t.M===t.da.root);return["display","position","float"].forEach(function(t){a[t]&&(r[t]=a[t])}),e}function ub(t,e){for(var n=t.w.M,i=[],r=null,o=t.w.va,a=-1;n&&1==n.nodeType;){if(!(h=o&&o.root==n)||2==o.type){var u=(o?o.b:t.j).l(n,!1);i.push(u),r=r||M(n)}h?(n=o.oa,o=o.md):(n=n.parentNode,a++)}for(o=new Xa(n={"font-size":new Oa(new Ie(n=_t(t.b,"em",!a),"px"),0)},t.b),a=i.length-1;0<=a;--a){var s,h=i[a];u=[];for(s in h)wa[s]&&u.push(s);u.sort($n);for(var f=(u=l(u)).next();!f.done;f=u.next()){f=f.value,o.b=f;var c=h[f];c.value!==fn&&(n[f]=c.Md(o))}}for(var p in e)wa[p]||(n[p]=e[p]);return{lang:r,mb:n}}nb.prototype.l=function(t){var e=t.getAttribute("data-adapt-pseudo")||"";if(this.b&&e&&e.match(/after$/)&&(this.style=this.b.l(this.element,!0),this.b=null),t=this.style._pseudos[e]||{},e.match(/^first-/)&&!t["x-first-pseudo"]){var n=1;"first-letter"==e?n=0:(e=e.match(/^first-([0-9]+)-lines$/))&&(n=e[1]-0),t["x-first-pseudo"]=new Oa(new Le(n),0)}return t},nb.prototype.sa=function(t,e){var n=t.getAttribute("data-adapt-pseudo")||"";this.f[n]||(this.f[n]=!0,(n=e.content)&&Hh(n)&&n.fa(new Xh(t,this.g,n,this.h)))},d(ib,Q),ib.prototype.clone=function(){return new ib(this.G,this.b,this.viewport,this.j,this.l,this.da,this.H,this.A,this.J,this.page,this.g,this.F,this.h)};var sb={a:"a",sub:"sub",sup:"sup",table:"table",tr:"tr",td:"td",th:"th",code:"code",body:"div",p:"p",v:"p",date:"p",emphasis:"em",strong:"strong",style:"span",strikethrough:"del"};function hb(t,e){return e=N(e,t.da.url),t.F[e]||e}function lb(t,e){var n=Qn("POLYFILLED_INHERITED_PROPS").reduce(function(t,e){return t.concat(e())},[].concat(ma)).filter(function(t){return e[t]});if(n.length){var i=t.w.h;if(t.w.parent){var r;i=t.w.h={};for(r in t.w.parent.h)i[r]=t.w.parent.h[r]}n.forEach(function(t){var n=e[t];if(n){if(n instanceof Le)i[t]=n.L;else if(n instanceof Te)i[t]=n.name;else if(n instanceof Ie)switch(n.ka){case"dpi":case"dpcm":case"dppx":i[t]=n.L*At[n.ka]}else i[t]=n;delete e[t]}})}}function fb(t,e,n){var i=!0,r=ni("createElementView"),o=t.M,a=t.w.va?t.w.va.b:t.j,u=a.l(o,!1);if(!t.w.va){var s=Is(t.da,o);nw(s,t.w.Sa,0)}var h={};t.w.parent||(s=ub(t,u),u=s.mb,t.w.lang=s.lang);var f=u["float-reference"]&&function(t){switch(t){case"inline":return Gl;case"column":return"column";case"region":return"region";case"page":return"page";default:throw Error("Unknown float-reference: "+t)}}(u["float-reference"].value.toString());if(t.w.parent&&f&&Yl(f)&&(s=ub(t,u),u=s.mb,t.w.lang=s.lang),t.w.b=ab(t,t.w.b,"rtl"===t.w.direction,u,h),a.sa(o,h),lb(t,h),function(t){t.w.lang=M(t.w.M)||t.w.parent&&t.w.parent.lang||t.w.lang}(t),h.direction&&(t.w.direction=h.direction.toString()),(s=h["flow-into"])&&s.toString()!=t.G)return wi(r,!1),r.result();var c=h.display;if(c===En)return wi(r,!1),r.result();var p=!t.w.parent;return t.w.H=c===an,function(t,e,n,i,r,o,a,u){var s=ni("createShadows"),h=r.template;return(h instanceof Oe?ob(t,h.url,2,e,u,null):ii(null)).then(function(h){var f=null;if("http://www.pyroxy.com/ns/shadow"==e.namespaceURI&&"include"==e.localName){var c=e.getAttribute("href"),p=null;c?p=u?u.da:t.da:u&&(c="http://www.w3.org/1999/xhtml"==u.oa.namespaceURI?u.oa.getAttribute("href"):u.oa.getAttributeNS("http://www.w3.org/1999/xlink","href"),p=u.md?u.md.da:t.da),c&&(c=N(c,p.url),f=ob(t,c,3,e,u,h))}f||(f=ii(h));var b=null;f.then(function(n){b=r.display===Fn?ob(t,N("user-agent.xml#table-cell",T),2,e,u,n):ii(n)}),b.then(function(h){var f=rb(i,t.l,t.f,a);if(f){for(var c=[],p=Qp.createElementNS("http://www.pyroxy.com/ns/shadow","root"),b=p,d=l(tb),g=d.next();!g.done;g=d.next()){var v;if(g=g.value){if(!f[g])continue;if(!("footnote-marker"!=g||n&&t.f))continue;if(g.match(/^first-/)&&(!(v=r.display)||v===cn))continue;if(!("before"!==g&&"after"!==g||(v=f[g].content)&&v!==xn&&v!==En))continue;c.push(g),eb(v=Qp.createElementNS("http://www.w3.org/1999/xhtml","span"),g)}else v=Qp.createElementNS("http://www.pyroxy.com/ns/shadow","content");b.appendChild(v),g.match(/^first-/)&&(b=v)}h=c.length?new fh(e,p,null,u,h,2,new nb(e,i,o,a,t.u)):h}wi(s,h)})}),s.result()}(t,o,p,u,h,a,t.b,t.w.va).then(function(s){t.w.Ia=s,s=h.position;var l=h.float,b=h.clear,d=t.w.b?zn:ln,g=t.w.parent?t.w.parent.b?zn:ln:d,v="true"===o.getAttribute("data-vivliostyle-flow-root");t.w.ed=function(t,e,n,i,r,o,a){return r=r||o||ln,!!a||!!n&&n!==En||e===Ue||e===on||t===pn||t===Fn||t===Rn||t==an||(t===Ye||t===mn)&&!!i&&i!==Vn||!!o&&r!==o}(c,s,l,h.overflow,d,g,v),t.w.R=s===An||s===Ue||s===on,!function(t){for(t=t.parent;t;){if(t.ed)return!0;t=t.parent}return!1}(t.w)||l===un||f&&Yl(f)||(b=l=null),d=l===vn||l===Tn||l===Mn||l===Je||l===dn||l===bn||l===We||l===Ke||l===_n||l===un,l&&(delete h.float,l===un&&(t.f?(d=!1,h.display=Ye):h.display=cn)),b&&(b===fn&&t.w.parent&&t.w.parent.l&&(b=Ne(t.w.parent.l)),b===vn||b===Tn||b===Mn||b===Je||b===$e||b===ze||b===Nn)&&(delete h.clear,h.display&&h.display!=cn&&(t.w.l=b.toString()));var w=c===mn&&h["ua-list-item-count"];if((d||h["break-inside"]&&h["break-inside"]!==Xe)&&t.w.j++,c&&c!==cn&&Yp(c)&&t.w.j++,!(b=!d&&!c||Yp(c)))t:switch(c.toString()){case"ruby-base":case"ruby-text":case"ruby-base-container":case"ruby-text-container":b=!0;break t;default:b=!1}t.w.ya=b,t.w.display=c?c.toString():"inline",t.w.Ba=d?l.toString():null,t.w.W=f||Gl,t.w.N=h["float-min-wrap-block"]||null,t.w.ca=h["column-span"],t.w.ya||((b=h["break-after"])&&(t.w.G=b.toString()),(b=h["break-before"])&&(t.w.g=b.toString())),t.w.Z=h["vertical-align"]&&h["vertical-align"].toString()||"baseline",t.w.la=h["caption-side"]&&h["caption-side"].toString()||"top",(b=h["border-collapse"])&&b!==Ne("separate")||(d=h["border-spacing"])&&(d.Rd()?(b=d.values[0],d=d.values[1]):b=d,b.wc()&&(t.w.sa=Be(b,t.b)),d.wc()&&(t.w.ta=Be(d,t.b))),t.w.Y=h["footnote-policy"],(b=h["x-first-pseudo"])&&(t.w.f=new ph(t.w.parent?t.w.parent.f:null,b.L)),t.w.ya||function(t,e,n,i,r){var o=rb(n,t.l,t.f,r);o&&o["after-if-continues"]&&o["after-if-continues"].content&&(t.w.J=new rw(e,new nb(e,n,i,r,t.u)))}(t,o,u,a,t.b),(b=h["white-space"])&&null!==(b=Qs(b.toString()))&&(t.w.qc=b),(b=h["hyphenate-character"])&&b!==Xe&&(t.w.F=b.Uc),b=h["overflow-wrap"]||["word-wrap"],t.w.A=h["word-break"]===qe||b===Qe,function(t,e,n,i,r,o){for(var a=Qn("RESOLVE_FORMATTING_CONTEXT"),u=0;u<a.length;u++){var s=a[u](t,e,n,i,r,o);if(s){t.C=s;break}}}(t.w,e,c,s,l,p),t.w.parent&&t.w.parent.C&&(e=t.w.parent.C.ef(t.w,e)),t.w.ya||(t.w.u=pb(h),function(t,e,n){for(e=e.firstChild;e;e=e.nextSibling)if(1===e.nodeType){var i={},r=n.l(e,!1);if(ab(t,t.w.b,"rtl"===t.w.direction,r,i),pb(i)){if(t.w.C instanceof Tv&&!Eh(t.w,t.w.C))break;n=t.w.parent,t.w.C=new Tv(n&&n.C,t.w.M),_v(t.w.C,t.w.b);break}}}(t,o,a));var m=!1,y=null,E=[],x=o.namespaceURI,S=o.localName;if("http://www.w3.org/1999/xhtml"==x)"html"==S||"body"==S||"script"==S||"link"==S||"meta"==S?S="div":"vide_"==S?S="video":"audi_"==S?S="audio":"object"==S&&(m=!!t.g),o.getAttribute("data-adapt-pseudo")&&u.content&&u.content.value&&u.content.value.url&&(S="img");else if("http://www.idpf.org/2007/ops"==x)S="span",x="http://www.w3.org/1999/xhtml";else if("http://www.gribuser.ru/xml/fictionbook/2.0"==x)x="http://www.w3.org/1999/xhtml","image"==S?(S="div",(s=o.getAttributeNS("http://www.w3.org/1999/xlink","href"))&&"#"==s.charAt(0)&&(s=Os(t.da,s))&&(y=xb(t,x,"img"),s="data:"+(s.getAttribute("content-type")||"image/jpeg")+";base64,"+s.textContent.replace(/[ \t\n\t]/g,""),E.push(Ii(y,s)))):S=sb[S],S||(S=t.w.ya?"span":"div");else if("http://www.daisy.org/z3986/2005/ncx/"==x)if(x="http://www.w3.org/1999/xhtml","ncx"==S||"navPoint"==S)S="div";else if("navLabel"==S){if(S="span",l=o.parentNode){for(s=null,l=l.firstChild;l;l=l.nextSibling)if(1==l.nodeType&&("http://www.daisy.org/z3986/2005/ncx/"==(b=l).namespaceURI&&"content"==b.localName)){s=b.getAttribute("src");break}s&&(S="a",(o=o.ownerDocument.createElementNS(x,"a")).setAttribute("href",s))}}else S="span";else"http://www.pyroxy.com/ns/shadow"==x?(x="http://www.w3.org/1999/xhtml",S=t.w.ya?"span":"div"):m=!!t.g;w?e?S="li":(S="div",c=Ye,h.display=c):"body"==S||"li"==S?S="div":"q"==S?S="span":"a"==S&&(s=h["hyperlink-processing"])&&"normal"!=s.toString()&&(S="span"),h.behavior&&"none"!=h.behavior.toString()&&t.g&&(m=!0),o.dataset&&"true"===o.getAttribute("data-math-typeset")&&(m=!0),(m?t.g(o,t.w.parent?t.w.parent.B:null,h):ii(null)).then(function(a){a?m&&(i="true"==a.getAttribute("data-adapt-process-children")):a=xb(t,x,S),"a"==S&&a.addEventListener("click",t.page.H,!1),y&&(yb(t,t.w,"inner",y),a.appendChild(y)),"iframe"==a.localName&&"http://www.w3.org/1999/xhtml"==a.namespaceURI&&function(t){t.addEventListener("load",function(){t.contentWindow.navigator.epubReadingSystem={name:"adapt",version:"0.1",layoutStyle:"paginated",hasFeature:function(t){switch(t){case"mouse-events":return!0}return!1}}},!1)}(a);var u=t.w.h["image-resolution"],s=[],l=h.width,f=h.height,c=o.getAttribute("width"),p=o.getAttribute("height");l=l===Xe||!l&&!c,f=f===Xe||!f&&!p;if("http://www.gribuser.ru/xml/fictionbook/2.0"!=o.namespaceURI||"td"==S){for(var b=(c=o.attributes).length,d=(p=null,0);d<b;d++){var g=(C=c[d]).namespaceURI,v=C.localName,C=C.nodeValue;if(g){if("http://www.w3.org/2000/xmlns/"==g)continue;"http://www.w3.org/1999/xlink"==g&&"href"==v&&(C=hb(t,C))}else{if(v.match(/^on/))continue;if("style"==v)continue;if(("id"==v||"name"==v)&&e){C=t.h.Pe(C,t.da.url),a.setAttribute(v,C),qs(t.page,a,C);continue}if("src"==v||"href"==v||"poster"==v?(C=hb(t,C),"href"===v&&(C=t.h.kc(C,t.da.url))):"srcset"==v&&(C=C.split(",").map(function(e){return hb(t,e.trim())}).join(",")),"poster"===v&&"video"===S&&"http://www.w3.org/1999/xhtml"===x&&l&&f){var k=new Image,A=Ii(k,C);E.push(A),s.push({Qf:k,element:a,Nf:A})}}"http://www.w3.org/2000/svg"==x&&/^[A-Z\-]+$/.test(v)&&(v=v.toLowerCase()),cb.includes(v.toLowerCase())&&(C=Kp(C,t.da.url,t.h)),g&&(k=qp[g])&&(v=k+":"+v),"src"!=v||g||"img"!=S&&"input"!=S||"http://www.w3.org/1999/xhtml"!=x?"href"==v&&"image"==S&&"http://www.w3.org/2000/svg"==x&&"http://www.w3.org/1999/xlink"==g?t.page.j.push(Ii(a,C)):g?a.setAttributeNS(g,v,C):a.setAttribute(v,C):p=C}p&&(c=Ii(k="input"===S?new Image:a,p),k!==a&&(a.src=p),l||f?(l&&f&&u&&1!==u&&s.push({Qf:k,element:a,Nf:c}),E.push(c)):t.page.j.push(c))}if(delete h.content,(l=h["list-style-image"])&&l instanceof Oe&&(l=l.url,E.push(Ii(new Image,l))),function(t,e){Qn("PREPROCESS_ELEMENT_STYLE").forEach(function(n){n(t.w,e)})}(t,h),mb(t,a,h),!t.w.ya&&(l=null,e?n&&(l=t.w.b?Zp:Jp):l="clone"!==t.w.h["box-decoration-break"]?t.w.b?$p:Wp:t.w.b?Zp:Jp,l))for(var T in l)P(a,T,l[T]);w&&a.setAttribute("value",h["ua-list-item-count"].stringValue()),t.B=a,E.length?Ni(E).then(function(){0<u&&function(t,e,n,i,r){e.forEach(function(e){if("load"===e.Nf.get().get()){var o=e.Qf,a=o.width/n,o=o.height/n;if(e=e.element,0<a&&0<o)if(i["box-sizing"]===Ze&&(i["border-left-style"]!==En&&(a+=Be(i["border-left-width"],t.b)),i["border-right-style"]!==En&&(a+=Be(i["border-right-width"],t.b)),i["border-top-style"]!==En&&(o+=Be(i["border-top-width"],t.b)),i["border-bottom-style"]!==En&&(o+=Be(i["border-bottom-width"],t.b))),1<n){var u=i["max-width"]||En,s=i["max-height"]||En;u===En&&s===En?P(e,"max-width",a+"px"):u!==En&&s===En?P(e,"width",a+"px"):u===En&&s!==En?P(e,"height",o+"px"):"%"!==u.ka?P(e,"max-width",Math.min(a,Be(u,t.b))+"px"):"%"!==s.ka?P(e,"max-height",Math.min(o,Be(s,t.b))+"px"):r?P(e,"height",o+"px"):P(e,"width",a+"px")}else 1>n&&(u=i["min-width"]||Kn,s=i["min-height"]||Kn,u.L||s.L?u.L&&!s.L?P(e,"width",a+"px"):!u.L&&s.L?P(e,"height",o+"px"):"%"!==u.ka?P(e,"min-width",Math.max(a,Be(u,t.b))+"px"):"%"!==s.ka?P(e,"min-height",Math.max(o,Be(s,t.b))+"px"):r?P(e,"height",o+"px"):P(e,"width",a+"px"):P(e,"min-width",a+"px"))}})}(t,s,u,h,t.w.b),wi(r,i)}):mi().then(function(){wi(r,i)})})}),r.result()}var cb="color-profile clip-path cursor filter marker marker-start marker-end marker-mid fill stroke mask".split(" ");function pb(t){var e=t["repeat-on-break"];return e!==En&&(e===Xe&&(e=t.display===Dn?hn:t.display===Pn?sn:En),e&&e!==En)?e.toString():null}function bb(t){var e=ni("createTextNodeView");return function(t){if(t.w.Qa)return ii(!0);var e,n=e=t.M.textContent,i=ni("preprocessTextContent"),r=Qn("PREPROCESS_TEXT_CONTENT"),o=0;return Ei(function(){return o>=r.length?ii(!1):r[o++](t.w,n).ea(function(t){return n=t,ii(!0)})}).then(function(){t.w.Qa=ov(e,n,0),wi(i,!0)}),i.result()}(t).then(function(){var n=t.na||0;n=lv(t.w.Qa).substr(n);t.B=document.createTextNode(n),wi(e,!0)}),e.result()}function db(t,e,n,i){return(t.w=e)?(t.M=e.M,t.na=e.na):(t.M=null,t.na=-1),t.B=null,t.w?function(t,e,n){var i=ni("createNodeView"),r=!0;return 1==t.M.nodeType?e=fb(t,e,n):8==t.M.nodeType?(t.B=null,e=ii(!0)):e=bb(t),e.then(function(e){r=e,(t.w.B=t.B)&&(e=t.w.parent?t.w.parent.B:t.N)&&e.appendChild(t.B),wi(i,r)}),i.result()}(t,n,!!i):ii(!0)}function gb(t){if(null==t.va||"content"!=t.M.localName||"http://www.pyroxy.com/ns/shadow"!=t.M.namespaceURI)return t;var e,n,i=t.Ma,r=t.va,o=t.parent;r.uf?(n=r.uf,e=r.root,2==(r=r.type)&&(e=e.firstChild)):(n=r.md,e=r.oa.firstChild,r=2);var a=t.M.nextSibling;return a?(t.M=a,dh(t)):t.Fa?t=t.Fa:e?t=null:(t=t.parent.modify()).K=!0,e?((i=new bh(e,o,i)).va=n,i.jb=r,i.Fa=t,i):(t.Ma=i,t)}function vb(t,e,n){if(!(e=function(t){var e=t.Ma+1;if(t.K){if(!t.parent)return null;if(3!=t.jb){var n=t.M.nextSibling;if(n)return(t=t.modify()).Ma=e,t.M=n,dh(t),gb(t)}if(t.Fa)return(t=t.Fa.modify()).Ma=e,t;t=t.parent.modify()}else{if(t.Ia&&(n=t.Ia.root,2==t.Ia.type&&(n=n.firstChild),n))return(e=new bh(n,t,e)).va=t.Ia,e.jb=t.Ia.type,gb(e);if(n=t.M.firstChild)return gb(new bh(n,t,e));1!=t.M.nodeType&&(e+=(n=lv(t.Qa)).length-1-t.na),t=t.modify()}return t.Ma=e,t.K=!0,t}(e))||e.K)return ii(e);var i=ni("nextInTree");return db(t,e,!0,n).then(function(n){e.B&&n||((e=e.modify()).K=!0,e.B||(e.ya=!0)),tt(t,{type:"nextInTree",w:e}),wi(i,e)}),i.result()}var wb={"box-decoration-break":!0,"float-min-wrap-block":!0,"float-reference":!0,"flow-into":!0,"flow-linger":!0,"flow-options":!0,"flow-priority":!0,"footnote-policy":!0,page:!0};function mb(t,e,n){(r=n["background-image"])&&function t(e,n){if(n instanceof Pe)for(var i=n.values,r=0;r<i.length;r++)t(e,i[r]);else n instanceof Oe&&(i=n.url,e.page.j.push(Ii(new Image,i)))}(t,r);var i,r=n.position===An;for(i in n){var o;if(!wb[i])(o=(o=n[i]).fa(new Ro(t.da.url,t.h))).wc()&&Tt(o.ka)&&(o=new Ie(Be(o,t.b),"px")),Ys[i]||r&&Ks[i]?t.page.l.push(new Ws(e,i,o)):P(e,i,o.toString())}}function yb(t,e,n,i){if(!e.K){var r=(e.va?e.va.b:t.j).l(t.M,!1);(r=r._pseudos)&&(r=r[n])&&(n={},e.b=ab(t,e.b,"rtl"===e.direction,r,n),Hh(e=n.content)&&(e.fa(new Xh(i,t.b,e,t.u)),delete n.content),mb(t,i,n))}}function Eb(t,e,n){var i=ni("peelOff"),r=e.f,o=e.na,a=e.K;if(0<n)e.B.textContent=e.B.textContent.substr(0,n),o+=n;else if(!a&&e.B&&!o){var u=e.B.parentNode;u&&u.removeChild(e.B)}for(var s=e.Ma+n,h=[];e.f===r;)h.push(e),e=e.parent;var l=h.pop(),f=l.Fa;return Ei(function(){for(;0<h.length;){l=h.pop(),e=new bh(l.M,e,s),h.length||(e.na=o,e.K=a),e.jb=l.jb,e.va=l.va,e.Ia=l.Ia,e.Fa=l.Fa?l.Fa:f,f=null;var n=db(t,e,!1);if(n.Xa())return n}return ii(!1)}).then(function(){wi(i,e)}),i.result()}function xb(t,e,n){return"http://www.w3.org/1999/xhtml"==e?t.D.createElement(n):t.D.createElementNS(e,n)}function Sb(t){t&&yh(t,function(t){var e=t.h["box-decoration-break"];e&&"slice"!==e||(e=t.B,t.b?(P(e,"padding-left","0"),P(e,"border-left","none"),P(e,"border-top-left-radius","0"),P(e,"border-bottom-left-radius","0")):(P(e,"padding-bottom","0"),P(e,"border-bottom","none"),P(e,"border-bottom-left-radius","0"),P(e,"border-bottom-right-radius","0")))})}function Cb(t){this.b=t.h,this.window=t.window}function kb(t,e){var n=e.left,i=e.top;return{left:t.left-n,top:t.top-i,right:t.right-n,bottom:t.bottom-i,width:t.width,height:t.height}}function Ab(t,e){var n=e.getClientRects(),i=t.b.getBoundingClientRect();return Array.from(n).map(function(t){return kb(t,i)},t)}function Tb(t,e){return kb(e.getBoundingClientRect(),t.b.getBoundingClientRect())}function Nb(t,e){return t.window.getComputedStyle(e,null)}function Ib(t,e,n,i,r){this.window=t,this.fontSize=e,this.b=t.document,this.root=n||this.b.body,(e=this.root.firstElementChild)||((e=this.b.createElement("div")).setAttribute("data-vivliostyle-outer-zoom-box",!0),this.root.appendChild(e)),(n=e.firstElementChild)||((n=this.b.createElement("div")).setAttribute("data-vivliostyle-spread-container",!0),e.appendChild(n));var o=e.nextElementSibling;o||((o=this.b.createElement("div")).setAttribute("data-vivliostyle-layout-box",!0),this.root.appendChild(o)),this.g=e,this.f=n,this.h=o,e=Nb(new Cb(this),this.root),this.width=i||parseFloat(e.width)||t.innerWidth,this.height=r||parseFloat(e.height)||t.innerHeight}Ib.prototype.zoom=function(t,e,n){P(this.g,"width",t*n+"px"),P(this.g,"height",e*n+"px"),P(this.f,"width",t+"px"),P(this.f,"height",e+"px"),P(this.f,"transform","scale("+n+")")};var _b="min-content inline size",Lb="fit-content inline size";function jb(t,e,n){function i(n){return Nb(t,e).getPropertyValue(n)}function r(){return P(e,"display","block"),P(e,"position","static"),i(E)}function o(){P(e,"display","inline-block"),P(w,E,"99999999px");var t=i(E);return P(w,E,""),t}function a(){P(e,"display","inline-block"),P(w,E,"0");var t=i(E);return P(w,E,""),t}function u(){var t=r(),e=a(),n=parseFloat(t);return n<=parseFloat(e)?e:(e=o(),n<=parseFloat(e)?t:e)}function s(){throw Error("Getting fill-available block size is not implemented")}var h=e.style.display,l=e.style.position,f=e.style.width,c=e.style.maxWidth,p=e.style.minWidth,b=e.style.height,d=e.style.maxHeight,g=e.style.minHeight,v=e.parentNode,w=e.ownerDocument.createElement("div");P(w,"position",l),v.insertBefore(w,e),w.appendChild(e),P(e,"width","auto"),P(e,"max-width","none"),P(e,"min-width","0"),P(e,"height","auto"),P(e,"max-height","none"),P(e,"min-height","0");var m,y="vertical-rl"===(m=((m=F("writing-mode"))?i(m[0]):null)||i("writing-mode"))||"tb-rl"===m||"vertical-lr"===m||"tb-lr"===m,E=y?"height":"width",x=y?"width":"height",S={};return n.forEach(function(t){var n;switch(t){case"fill-available inline size":n=r();break;case"max-content inline size":n=o();break;case _b:n=a();break;case Lb:n=u();break;case"fill-available block size":n=s();break;case"max-content block size":case"min-content block size":case"fit-content block size":n=i(x);break;case"fill-available width":n=y?s():r();break;case"fill-available height":n=y?r():s();break;case"max-content width":n=y?i(x):o();break;case"max-content height":n=y?o():i(x);break;case"min-content width":n=y?i(x):a();break;case"min-content height":n=y?a():i(x);break;case"fit-content width":n=y?i(x):u();break;case"fit-content height":n=y?u():i(x)}S[t]=parseFloat(n),P(e,"position",l),P(e,"display",h)}),P(e,"width",f),P(e,"max-width",c),P(e,"min-width",p),P(e,"height",b),P(e,"max-height",d),P(e,"min-height",g),v.insertBefore(e,w),v.removeChild(w),S}function Ob(t){var e=(e=t["writing-mode"])&&e.value;return t=(t=t.direction)&&t.value,e===Un||e!==zn&&t!==jn?"ltr":"rtl"}var Rb={a5:{width:new Ie(148,"mm"),height:new Ie(210,"mm")},a4:{width:new Ie(210,"mm"),height:new Ie(297,"mm")},a3:{width:new Ie(297,"mm"),height:new Ie(420,"mm")},b5:{width:new Ie(176,"mm"),height:new Ie(250,"mm")},b4:{width:new Ie(250,"mm"),height:new Ie(353,"mm")},"jis-b5":{width:new Ie(182,"mm"),height:new Ie(257,"mm")},"jis-b4":{width:new Ie(257,"mm"),height:new Ie(364,"mm")},letter:{width:new Ie(8.5,"in"),height:new Ie(11,"in")},legal:{width:new Ie(8.5,"in"),height:new Ie(14,"in")},ledger:{width:new Ie(11,"in"),height:new Ie(17,"in")}},Fb=new Ie(.24,"pt"),Pb=new Ie(3,"mm"),Db=new Ie(10,"mm"),Mb=new Ie(13,"mm");function Bb(t){var e={width:Gn,height:Yn,Xb:Kn,Yb:Kn},n=t.size;if(n&&n.value!==Xe){var i=n.value;i.Rd()?(n=i.values[0],i=i.values[1]):(n=i,i=null),n.wc()?(e.width=n,e.height=i||n):(n=Rb[n.name.toLowerCase()])&&(i&&i===gn?(e.width=n.height,e.height=n.width):(e.width=n.width,e.height=n.height))}return(n=t.marks)&&n.value!==En&&(e.Yb=Mb),(t=t.bleed)&&t.value!==Xe?t.value&&t.value.wc()&&(e.Xb=t.value):n&&(t=!1,(t=n.value.Rd()?n.value.values.some(function(t){return t===tn}):n.value===tn)&&(e.Xb=new Ie(6,"pt"))),e}function Ub(t,e){var n={},i=t.Xb.L*_t(e,t.Xb.ka,!1),r=t.Yb.L*_t(e,t.Yb.ka,!1),o=i+r,a=t.width;return n.gc=a===Gn?e.$.rc?e.$.rc.width*_t(e,"px",!1):(e.$.tb?Math.floor(e.eb/2)-e.$.zc:e.eb)-2*o:a.L*_t(e,a.ka,!1),a=t.height,n.fc=a===Yn?e.$.rc?e.$.rc.height*_t(e,"px",!1):e.Ib-2*o:a.L*_t(e,a.ka,!1),n.Xb=i,n.Yb=r,n.oe=o,n}function zb(t,e,n){return(t=t.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("width",e),t.setAttribute("height",n),t.style.position="absolute",t}function Vb(t,e,n){return(t=t.createElementNS("http://www.w3.org/2000/svg",n||"polyline")).setAttribute("stroke","black"),t.setAttribute("stroke-width",e),t.setAttribute("fill","none"),t}var Xb={jh:"top left",kh:"top right",Wg:"bottom left",Xg:"bottom right"};var Hb={ih:"top",Vg:"bottom",og:"left",pg:"right"};function Gb(t,e,n,i){var r=!1,o=!1;if((t=t.marks)&&((t=t.value).Rd()?t.values.forEach(function(t){t===tn?r=!0:t===en&&(o=!0)}):t===tn?r=!0:t===en&&(o=!0)),r||o){var a=n.I,u=a.ownerDocument,s=e.Xb,h=Be(Fb,i),l=Be(Pb,i),f=Be(Db,i);r&&Object.keys(Xb).forEach(function(t){t=function(t,e,n,i,r,o){(a=i)<=r+2*At.mm&&(a=r+i/2);var a,u=Math.max(i,a),s=r+u+n/2,h=zb(t,s,s);return i=(a=[[0,r+i],[i,r+i],[i,r+i-a]]).map(function(t){return[t[1],t[0]]}),"top right"!==e&&"bottom right"!==e||(a=a.map(function(t){return[r+u-t[0],t[1]]}),i=i.map(function(t){return[r+u-t[0],t[1]]})),"bottom left"!==e&&"bottom right"!==e||(a=a.map(function(t){return[t[0],r+u-t[1]]}),i=i.map(function(t){return[t[0],r+u-t[1]]})),(s=Vb(t,n)).setAttribute("points",a.map(function(t){return t.join(",")}).join(" ")),h.appendChild(s),(t=Vb(t,n)).setAttribute("points",i.map(function(t){return t.join(",")}).join(" ")),h.appendChild(t),e.split(" ").forEach(function(t){h.style[t]=o+"px"}),h}(u,Xb[t],h,f,s,l),a.appendChild(t)}),o&&Object.keys(Hb).forEach(function(t){t=function(t,e,n,i,r){var o,a=2*i;"top"===e||"bottom"===e?(o=a,a=i):o=i;var u,s=zb(t,o,a),h=Vb(t,n);switch(h.setAttribute("points","0,"+a/2+" "+o+","+a/2),s.appendChild(h),(h=Vb(t,n)).setAttribute("points",o/2+",0 "+o/2+","+a),s.appendChild(h),(t=Vb(t,n,"circle")).setAttribute("cx",o/2),t.setAttribute("cy",a/2),t.setAttribute("r",i/4),s.appendChild(t),e){case"top":u="bottom";break;case"bottom":u="top";break;case"left":u="right";break;case"right":u="left"}return Object.keys(Hb).forEach(function(t){(t=Hb[t])===e?s.style[t]=r+"px":t!==u&&(s.style[t]="0",s.style["margin-"+t]="auto")}),s}(u,Hb[t],h,f,l),a.appendChild(t)})}}var Yb,Kb=(Yb={width:!0,height:!0,"block-size":!0,"inline-size":!0,margin:!0,padding:!0,border:!0,outline:!0,"outline-width":!0,"outline-style":!0,"outline-color":!0},"left right top bottom before after start end block-start block-end inline-start inline-end".split(" ").forEach(function(t){Yb["margin-"+t]=!0,Yb["padding-"+t]=!0,Yb["border-"+t+"-width"]=!0,Yb["border-"+t+"-style"]=!0,Yb["border-"+t+"-color"]=!0}),Yb),Wb={"top-left-corner":{order:1,Wa:!0,Ta:!1,Ua:!0,Va:!0,Ca:null},"top-left":{order:2,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ca:"start"},"top-center":{order:3,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ca:"center"},"top-right":{order:4,Wa:!0,Ta:!1,Ua:!1,Va:!1,Ca:"end"},"top-right-corner":{order:5,Wa:!0,Ta:!1,Ua:!1,Va:!0,Ca:null},"right-top":{order:6,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ca:"start"},"right-middle":{order:7,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ca:"center"},"right-bottom":{order:8,Wa:!1,Ta:!1,Ua:!1,Va:!0,Ca:"end"},"bottom-right-corner":{order:9,Wa:!1,Ta:!0,Ua:!1,Va:!0,Ca:null},"bottom-right":{order:10,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ca:"end"},"bottom-center":{order:11,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ca:"center"},"bottom-left":{order:12,Wa:!1,Ta:!0,Ua:!1,Va:!1,Ca:"start"},"bottom-left-corner":{order:13,Wa:!1,Ta:!0,Ua:!0,Va:!1,Ca:null},"left-bottom":{order:14,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ca:"end"},"left-middle":{order:15,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ca:"center"},"left-top":{order:16,Wa:!1,Ta:!1,Ua:!0,Va:!1,Ca:"start"}},$b=Object.keys(Wb).sort(function(t,e){return Wb[t].order-Wb[e].order});function Jb(t,e,n){for(var i in op.call(this,t,null,"vivliostyle-page-rule-master",[],e,null,0),t=Bb(n),new Zb(this.f,this,n,t),this.A={},function(t,e){var n=e._marginBoxes;n&&$b.forEach(function(i){n[i]&&(t.A[i]=new qb(t.f,t,i,e))})}(this,n),this.b.position=new Oa(An,0),this.b.width=new Oa(t.width,0),this.b.height=new Oa(t.height,0),n)Kb[i]||"background-clip"===i||(this.b[i]=n[i])}function Zb(t,e,n,i){for(var r in up.call(this,t,null,null,[],e),this.D=i,this.b["z-index"]=new Oa(new Le(0),0),this.b["flow-from"]=new Oa(Ne("body"),0),this.b.position=new Oa(Ue,0),this.b.overflow=new Oa(Vn,0),Kb)Kb.hasOwnProperty(r)&&(this.b[r]=n[r])}function qb(t,e,n,i){for(var r in up.call(this,t,null,null,[],e),this.u=n,t=i._marginBoxes[this.u],i)e=i[r],n=t[r],(wa[r]||n&&n.value===fn)&&(this.b[r]=e);for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e=t[r])&&e.value!==fn&&(this.b[r]=e)}function Qb(t,e){Pp.call(this,t,e),this.u=null,this.ta={}}function td(t,e,n,i,r){this.I=t,this.A=r,this.j=n,this.u=!sp(i,e[n?"width":"height"],new re(i,0,"px")),this.size=null}function ed(t){return t.size||(t.size=jb(t.A,t.I.element,t.j?["max-content width","min-content width"]:["max-content height","min-content height"])),t.size}function nd(t){this.j=t}function id(t,e,n,i,r,o){td.call(this,t,e,n,i,r),this.l=o}function rd(t,e,n,i,r,o){var a,u=t.f.f,s={},h={},l={};for(a in e){var f=Wb[a];if(f){var c=e[a],p=t.ta[a],b=new td(c,p.style,n,u,o);s[f.Ca]=c,h[f.Ca]=p,l[f.Ca]=b}}t=i.start.evaluate(r),i.end.evaluate(r),e=i.ua.evaluate(r);var d=od(l,e),g=!1,v={};Object.keys(s).forEach(function(t){var e=sp(u,h[t].style[n?"max-width":"max-height"],i.ua);e&&(e=e.evaluate(r),d[t]>e&&(e=l[t]=new id(s[t],h[t].style,n,u,o,e),v[t]=e.f(),g=!0))}),g&&(d=od(l,e),g=!1,["start","center","end"].forEach(function(t){d[t]=v[t]||d[t]}));var w={};Object.keys(s).forEach(function(t){var e=sp(u,h[t].style[n?"min-width":"min-height"],i.ua);e&&(e=e.evaluate(r),d[t]<e&&(e=l[t]=new id(s[t],h[t].style,n,u,o,e),w[t]=e.f(),g=!0))}),g&&(d=od(l,e),["start","center","end"].forEach(function(t){d[t]=w[t]||d[t]}));var m=t+e,y=t+(t+e);["start","center","end"].forEach(function(t){var e=d[t];if(e){var i=s[t],r=0;switch(t){case"start":r=n?i.left:i.top;break;case"center":r=(y-e)/2;break;case"end":r=m-e}n?Ph(i,r,e-jh(i)-Oh(i)):Fh(i,r,e-_h(i)-Lh(i))}})}function od(t,e){var n,i=t.start,r=t.center,o=t.end,a={};r?((n=ad(r,(n=[i,o].filter(function(t){return t})).length?new nd(n):null,e)).yb&&(a.center=n.yb),r=(e-(r=n.yb||r.f()))/2,i&&i.b()&&(a.start=r),o&&o.b()&&(a.end=r)):((i=ad(i,o,e)).yb&&(a.start=i.yb),i.zd&&(a.end=i.zd));return a}function ad(t,e,n){var i={yb:null,zd:null};if(t&&e)if(t.b()&&e.b()){var r=t.g(),o=e.g();0<r&&0<o?((o=r+o)<n?i.yb=n*r/o:(e=(t=t.h())+(e=e.h()))<n?i.yb=t+(n-e)*(r-t)/(o-e):0<e&&(i.yb=n*t/e),0<i.yb&&(i.zd=n-i.yb)):0<r?i.yb=n:0<o&&(i.zd=n)}else t.b()?i.yb=Math.max(n-e.f(),0):e.b()&&(i.zd=Math.max(n-t.f(),0));else t?t.b()&&(i.yb=n):e&&e.b()&&(i.zd=n);return i}function ud(t,e){Mp.call(this,t,e),this.marginLeft=this.marginBottom=this.marginRight=this.marginTop=this.Hc=this.Ic=null}function sd(t,e){var n=t.style,i=t.f.f,r=e.start,o=e.end,a=e.ua,u=t.f.D[a].Aa(i,null),s=sp(i,n[a],u),h=sp(i,n["margin-"+r],u),l=sp(i,n["margin-"+o],u),f=hp(i,n["padding-"+r],u),c=hp(i,n["padding-"+o],u),p=fp(i,n["border-"+r+"-width"],n["border-"+r+"-style"],u),b=fp(i,n["border-"+o+"-width"],n["border-"+o+"-style"],u),d=de(i,u,be(i,be(i,p,f),be(i,b,c)));return s?(d=de(i,d,s),h||l?h?l=de(i,d,h):h=de(i,d,l):l=h=ge(i,d,new le(i,.5))):(h||(h=i.b),l||(l=i.b),s=de(i,d,be(i,h,l))),n[r]=new Me(h),n[o]=new Me(l),n["margin-"+r]=Kn,n["margin-"+o]=Kn,n["padding-"+r]=new Me(f),n["padding-"+o]=new Me(c),n["border-"+r+"-width"]=new Me(p),n["border-"+o+"-width"]=new Me(b),n[a]=new Me(s),n["max-"+a]=new Me(s),{Ff:de(i,u,be(i,h,l)),Yf:h,Xf:l}}function hd(t,e){Mp.call(this,t,e);var n=e.u;this.u=Wb[n],t.ta[n]=this,this.wa=!0}function ld(t,e,n){function i(t){if(d)return d;d={ua:b?b.evaluate(t):null,qb:s?s.evaluate(t):null,rb:h?h.evaluate(t):null};var e=u.evaluate(t),n=0;return[c,l,f,p].forEach(function(e){e&&(n+=e.evaluate(t))}),(null===d.qb||null===d.rb)&&n+d.ua+d.qb+d.rb>e&&(null===d.qb&&(d.qb=0),null===d.rb&&(d.ph=0)),null!==d.ua&&null!==d.qb&&null!==d.rb&&(d.rb=null),null===d.ua&&null!==d.qb&&null!==d.rb?d.ua=e-n-d.qb-d.rb:null!==d.ua&&null===d.qb&&null!==d.rb?d.qb=e-n-d.ua-d.rb:null!==d.ua&&null!==d.qb&&null===d.rb?d.rb=e-n-d.ua-d.qb:null===d.ua?(d.qb=d.rb=0,d.ua=e-n):d.qb=d.rb=(e-n-d.ua)/2,d}var r=t.style;t=t.f.f;var o=e.Be,a=e.Ie;e=e.ua;var u=n["margin"+a.charAt(0).toUpperCase()+a.substring(1)],s=lp(t,r["margin-"+o],u),h=lp(t,r["margin-"+a],u),l=hp(t,r["padding-"+o],u),f=hp(t,r["padding-"+a],u),c=fp(t,r["border-"+o+"-width"],r["border-"+o+"-style"],u),p=fp(t,r["border-"+a+"-width"],r["border-"+a+"-style"],u),b=sp(t,r[e],u),d=null;r[e]=new Me(new ue(t,function(){var t=i(this).ua;return null===t?0:t},e)),r["margin-"+o]=new Me(new ue(t,function(){var t=i(this).qb;return null===t?0:t},"margin-"+o)),r["margin-"+a]=new Me(new ue(t,function(){var t=i(this).rb;return null===t?0:t},"margin-"+a)),"left"===o?r.left=new Me(be(t,n.marginLeft,n.Ic)):"top"===o&&(r.top=new Me(be(t,n.marginTop,n.Hc)))}function fd(t,e,n,i,r){this.f=t,this.l=e,this.h=n,this.b=i,this.g=r,this.j={},n=new zt(t=this.l,e=new Zt(t,new ie(t,e=new oe(t,"page-number"),new le(t,2)),t.b)),t.values["recto-page"]=n,t.values["verso-page"]=e,"ltr"===(this.b.G||Ob(this.g))?(t.values["left-page"]=e,e=new zt(t,e),t.values["right-page"]=e):(n=new zt(t,e),t.values["left-page"]=n,t.values["right-page"]=e)}function cd(t,e){var n,i=[];for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r,o=e[n];r=o instanceof Oa?""+o.value:cd(t,o),i.push(n+r+(o.bb||""))}return i.sort().join("^")}function pd(t,e,n){var i=(n=n.clone({jc:"vivliostyle-page-rule-master"})).b;if(o=e.size){var r=Bb(e),o=o.bb;i.width=Fa(t.b,i.width,new Oa(r.width,o)),i.height=Fa(t.b,i.height,new Oa(r.height,o))}return["counter-reset","counter-increment"].forEach(function(t){i[t]&&(e[t]=i[t])}),(n=n.h(t.h)).l(t.f,t.g),Rp(n,t.b),n}function bd(t){this.b=null,this.h=t}function dd(t){this.b=null,this.h=t}function gd(t){this.b=null,this.h=t}function vd(t){this.b=null,this.h=t}function wd(t){this.b=null,this.h=t}function md(t){this.b=null,this.h=t}function yd(t,e){$a.call(this,t,e,null,null,null)}function Ed(t,e,n,i,r){hs.call(this,t,e,null,n,null,i,!1),this.R=r,this.H=[],this.g="",this.F=[]}function xd(t){var e;e=t.g||t.F.length?[t.g].concat(t.F.sort()):null,t.H.push({qf:e,ba:t.ba}),t.g="",t.F=[]}function Sd(t,e,n,i){Cr.call(this,t,e,!1),this.g=n,this.b=i}function Cd(t){if(1>=t.length)return!1;var e=t[t.length-1].h;return t.slice(0,t.length-1).every(function(t){return e>t.h})}function kd(t,e){t.b?t.width=e:t.height=e}function Ad(t){return t.b?t.width:t.height}function Td(t,e){this.jd=t,this.Qc=e}function Nd(t,e,n){this.b=t,this.F=e,this.A=n,this.f=Ad(t)}function Id(t,e){var n=ni("ColumnBalancer#balanceColumns");t.u(e),Ld(t,e),Bh(t.b);var i=[_d(t,e)];return xi(function(e){t.l(i)?(t.D(i),t.F().then(function(n){Ld(t,n),Bh(t.b),n?(i.push(_d(t,n)),ki(e)):Ai(e)})):Ai(e)}).then(function(){var e=i.reduce(function(t,e){return e.Qc<t.Qc?e:t},i[0]);!function(t,e){var n=t.b.element;e.Db.forEach(function(t){n.appendChild(t.element)}),function(t,e){e.forEach(function(t){this.children.push(t),Tf(t)},t)}(t.A,e.tg)}(t,e.jd),kd(t.b,t.f),wi(n,e.jd)}),n.result()}function _d(t,e){return new Td(e,t.j(e))}function Ld(t,e){var n=function(t){return(t=t.children.splice(0)).forEach(function(t){t.b.forEach(function(t){(t=t.b.element)&&t.parentNode&&t.parentNode.removeChild(t)})}),t}(t.A);e&&(e.tg=n)}function jd(t){var e=t[t.length-1];return!(!e.Qc||(t=t[t.length-2])&&e.Qc>=t.Qc)&&(t=e.jd.Db,(e=Math.max.apply(null,t.map(function(t){return t.h})))>(t=Math.max.apply(null,t.map(function(t){return function(t){var e=nf(t).b;return t.b.length?Math.max.apply(null,t.b.map(function(t){return t=t.b,e?t.width:t.height})):0}(t.l)})))+1)}function Od(t,e){var n=Math.max.apply(null,t[t.length-1].jd.Db.map(function(t){return isNaN(t.hf)?t.h:t.h-t.hf+1}))-1;n<Ad(e)?kd(e,n):kd(e,Ad(e)-1)}function Rd(t,e,n,i){Nd.call(this,n,t,e),this.G=i,this.h=null,this.g=!1}function Fd(t,e){return t.h?Nh(t.h,e):!e}function Pd(t,e,n){Nd.call(this,n,t,e)}d(Jb,op),Jb.prototype.h=function(t){return new Qb(t,this)},d(Zb,up),Zb.prototype.h=function(t){return new ud(t,this)},d(qb,up),qb.prototype.h=function(t){return new hd(t,this)},d(Qb,Pp),Qb.prototype.l=function(t,e){var n,i=this.J;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n))switch(n){case"writing-mode":case"direction":i[n]=e[n]}Pp.prototype.l.call(this,t,e)},Qb.prototype.ye=function(){var t=this.style;t.left=Kn,t["margin-left"]=Kn,t["border-left-width"]=Kn,t["padding-left"]=Kn,t["padding-right"]=Kn,t["border-right-width"]=Kn,t["margin-right"]=Kn,t.right=Kn},Qb.prototype.ze=function(){var t=this.style;t.top=new Ie(-1,"px"),t["margin-top"]=Kn,t["border-top-width"]=Kn,t["padding-top"]=Kn,t["padding-bottom"]=Kn,t["border-bottom-width"]=Kn,t["margin-bottom"]=Kn,t.bottom=Kn},Qb.prototype.ca=function(t,e,n){e=e.G;var i={start:this.u.marginLeft,end:this.u.marginRight,ua:this.u.Ic},r={start:this.u.marginTop,end:this.u.marginBottom,ua:this.u.Hc};rd(this,e.top,!0,i,t,n),rd(this,e.bottom,!0,i,t,n),rd(this,e.left,!1,r,t,n),rd(this,e.right,!1,r,t,n)},td.prototype.b=function(){return this.u},td.prototype.g=function(){var t=ed(this);return this.j?jh(this.I)+t["max-content width"]+Oh(this.I):_h(this.I)+t["max-content height"]+Lh(this.I)},td.prototype.h=function(){var t=ed(this);return this.j?jh(this.I)+t["min-content width"]+Oh(this.I):_h(this.I)+t["min-content height"]+Lh(this.I)},td.prototype.f=function(){return this.j?jh(this.I)+this.I.width+Oh(this.I):_h(this.I)+this.I.height+Lh(this.I)},nd.prototype.b=function(){return this.j.some(function(t){return t.b()})},nd.prototype.g=function(){var t=this.j.map(function(t){return t.g()});return Math.max.apply(null,t)*t.length},nd.prototype.h=function(){var t=this.j.map(function(t){return t.h()});return Math.max.apply(null,t)*t.length},nd.prototype.f=function(){var t=this.j.map(function(t){return t.f()});return Math.max.apply(null,t)*t.length},d(id,td),id.prototype.b=function(){return!1},id.prototype.g=function(){return this.f()},id.prototype.h=function(){return this.f()},id.prototype.f=function(){return this.j?jh(this.I)+this.l+Oh(this.I):_h(this.I)+this.l+Lh(this.I)},Qb.prototype.hc=function(t,e,n,i,r){Qb.mg.hc.call(this,t,e,n,i,r),e.element.setAttribute("data-vivliostyle-page-box",!0)},d(ud,Mp),ud.prototype.l=function(t,e){var n,i=this.J;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(n.match(/^column.*$/)||n.match(/^background-/))&&(i[n]=e[n]);Mp.prototype.l.call(this,t,e),n=this.g,i={Ic:this.Ic,Hc:this.Hc,marginTop:this.marginTop,marginRight:this.marginRight,marginBottom:this.marginBottom,marginLeft:this.marginLeft},n.u=i,(n=n.style).width=new Me(i.Ic),n.height=new Me(i.Hc),n["padding-left"]=new Me(i.marginLeft),n["padding-right"]=new Me(i.marginRight),n["padding-top"]=new Me(i.marginTop),n["padding-bottom"]=new Me(i.marginBottom)},ud.prototype.ye=function(){var t=sd(this,{start:"left",end:"right",ua:"width"});this.Ic=t.Ff,this.marginLeft=t.Yf,this.marginRight=t.Xf},ud.prototype.ze=function(){var t=sd(this,{start:"top",end:"bottom",ua:"height"});this.Hc=t.Ff,this.marginTop=t.Yf,this.marginBottom=t.Xf},ud.prototype.hc=function(t,e,n,i,r){Mp.prototype.hc.call(this,t,e,n,i,r),n.J=e.element},d(hd,Mp),(n=hd.prototype).hc=function(t,e,n,i,r){var o=e.element;P(o,"display","flex");var a=wp(this,t,"vertical-align"),u=null;a===Ne("middle")?u="center":a===Ne("top")?u="flex-start":a===Ne("bottom")&&(u="flex-end"),u&&(P(o,"flex-flow",this.b?"row":"column"),P(o,"justify-content",u)),Mp.prototype.hc.call(this,t,e,n,i,r)},n.Ca=function(t,e){var n=this.style,i=this.f.f,r=t.start,o=t.end,a=(s="left"===r)?e.Ic:e.Hc,u=sp(i,n[t.ua],a),s=s?e.marginLeft:e.marginTop;if("start"===this.u.Ca)n[r]=new Me(s);else if(u){var h=hp(i,n["margin-"+r],a),l=hp(i,n["margin-"+o],a),f=hp(i,n["padding-"+r],a),c=hp(i,n["padding-"+o],a),p=fp(i,n["border-"+r+"-width"],n["border-"+r+"-style"],a);o=fp(i,n["border-"+o+"-width"],n["border-"+o+"-style"],a),u=be(i,u,be(i,be(i,f,c),be(i,be(i,p,o),be(i,h,l))));switch(this.u.Ca){case"center":n[r]=new Me(be(i,s,ve(i,de(i,a,u),new le(i,2))));break;case"end":n[r]=new Me(de(i,be(i,s,a),u))}}},n.ye=function(){var t=this.g.u;this.u.Ua?ld(this,{Be:"right",Ie:"left",ua:"width"},t):this.u.Va?ld(this,{Be:"left",Ie:"right",ua:"width"},t):this.Ca({start:"left",end:"right",ua:"width"},t)},n.ze=function(){var t=this.g.u;this.u.Wa?ld(this,{Be:"bottom",Ie:"top",ua:"height"},t):this.u.Ta?ld(this,{Be:"top",Ie:"bottom",ua:"height"},t):this.Ca({start:"top",end:"bottom",ua:"height"},t)},n.Nd=function(t,e,n,i,r,o,a){Mp.prototype.Nd.call(this,t,e,n,i,r,o,a),t=n.G,n=this.f.u,(i=this.u).Ua||i.Va?i.Wa||i.Ta||(i.Ua?t.left[n]=e:i.Va&&(t.right[n]=e)):i.Wa?t.top[n]=e:i.Ta&&(t.bottom[n]=e)},d(bd,Ja),bd.prototype.apply=function(t){t.Z===this.h&&this.b.apply(t)},bd.prototype.f=function(){return 3},bd.prototype.g=function(t){return this.b&&Ku(t.ld,this.h,this.b),!0},d(dd,Ja),dd.prototype.apply=function(t){1===new oe(this.h,"page-number").evaluate(t.l)&&this.b.apply(t)},dd.prototype.f=function(){return 2},d(gd,Ja),gd.prototype.apply=function(t){new oe(this.h,"left-page").evaluate(t.l)&&this.b.apply(t)},gd.prototype.f=function(){return 1},d(vd,Ja),vd.prototype.apply=function(t){new oe(this.h,"right-page").evaluate(t.l)&&this.b.apply(t)},vd.prototype.f=function(){return 1},d(wd,Ja),wd.prototype.apply=function(t){new oe(this.h,"recto-page").evaluate(t.l)&&this.b.apply(t)},wd.prototype.f=function(){return 1},d(md,Ja),md.prototype.apply=function(t){new oe(this.h,"verso-page").evaluate(t.l)&&this.b.apply(t)},md.prototype.f=function(){return 1},d(yd,$a),yd.prototype.apply=function(t){var e=t.l,n=t.F,i=this.style;if(za(e,n,i,t=this.ba,null,null,null),i=i._marginBoxes){var r;n=Ba(n,"_marginBoxes");for(r in i)if(i.hasOwnProperty(r)){var o=n[r];o||(o={},n[r]=o),za(e,o,i[r],t,null,null,null)}}},d(Ed,hs),(n=Ed.prototype).Sc=function(){this.Pb()},n.Sb=function(t,e){(this.g=e)&&(this.b.push(new bd(e)),this.ba+=65536)},n.nd=function(t,e){switch(e&&Tr(this,"E_INVALID_PAGE_SELECTOR :"+t+"("+e.join("")+")"),this.F.push(":"+t),t.toLowerCase()){case"first":this.b.push(new dd(this.f)),this.ba+=256;break;case"left":this.b.push(new gd(this.f)),this.ba+=1;break;case"right":this.b.push(new vd(this.f)),this.ba+=1;break;case"recto":this.b.push(new wd(this.f)),this.ba+=1;break;case"verso":this.b.push(new md(this.f)),this.ba+=1;break;default:Tr(this,"E_INVALID_PAGE_SELECTOR :"+t)}},n.Pc=function(){xd(this),hs.prototype.Pc.call(this)},n.Ka=function(){xd(this),hs.prototype.Ka.call(this)},n.Ob=function(t,e,n){if("bleed"!==t&&"marks"!==t||this.H.some(function(t){return!t.qf})){hs.prototype.Ob.call(this,t,e,n);var i=this.mb[t],r=this.R;if("bleed"===t||"marks"===t)r[""]||(r[""]={}),Object.keys(r).forEach(function(e){Ma(r[e],t,i)});else if("size"===t){var o=r[""];this.H.forEach(function(e){var n=new Oa(i.value,i.bb+e.ba);e=e.qf?e.qf.join(""):"";var a=r[e];a?(n=(e=a[t])?Fa(null,n,e):n,Ma(a,t,n)):(Ma(a=r[e]={},t,n),o&&["bleed","marks"].forEach(function(t){o[t]&&Ma(a,t,o[t])},this))},this)}}},n.Tf=function(t){Ku(this.l.ld,"*",t)},n.Wf=function(t){return new yd(this.mb,t)},n.Oe=function(t){var e=Ba(this.mb,"_marginBoxes"),n=e[t];n||(n={},e[t]=n),Sr(this.oa,new Sd(this.f,this.oa,this.A,n))},d(Sd,kr),Sd.prototype.Mb=function(t,e,n){ga(this.g,t,e,n,this)},Sd.prototype.gd=function(t,e){Ar(this,"E_INVALID_PROPERTY_VALUE "+t+": "+e.toString())},Sd.prototype.de=function(t,e){Ar(this,"E_INVALID_PROPERTY "+t+": "+e.toString())},Sd.prototype.Ob=function(t,e,n){Ma(this.b,t,new Oa(e,n?yr(this):Er(this)))},Nd.prototype.u=function(){},d(Rd,Nd),Rd.prototype.u=function(t){var e=t.Db.reduce(function(t,e){return t+e.h},0);kd(this.b,e/this.G),this.h=t.position},Rd.prototype.j=function(t){return Fd(this,t.position)?Cd(t=t.Db)?1/0:Math.max.apply(null,t.map(function(t){return t.h})):1/0},Rd.prototype.l=function(t){return 1===t.length||(this.g?jd(t):Fd(this,(t=t[t.length-1]).jd.position)&&!Cd(t.jd.Db)?this.g=!0:Ad(this.b)<this.f)},Rd.prototype.D=function(t){this.g?Od(t,this.b):kd(this.b,Math.min(this.f,Ad(this.b)+.1*this.f))},d(Pd,Nd),Pd.prototype.j=function(t){return t.Db.every(function(t){return!t.h})?1/0:function(t){var e=gv(t);return gv(t.map(function(t){return(t-=e)*t}))}(t=t.Db.filter(function(t){return!t.g}).map(function(t){return t.h}))},Pd.prototype.l=function(t){return jd(t)},Pd.prototype.D=function(t){Od(t,this.b)};var Dd=new Ti(function(){var t=ni("uaStylesheetBase");return va.get().then(function(e){var n=N("user-agent-base.css",T);(e=new hs(null,null,null,null,null,e,!0)).Tc("UA"),ss=e.l,Qr(n,e,null,null).La(t)}),t.result()},"uaStylesheetBaseFetcher");function Md(t,e,n,i,r,o,a,u,s,h){this.F=t,this.f=e,this.b=n,this.g=i,this.D=r,this.l=o,this.H=t.R,this.u=a,this.h=u,this.j=s,this.A=h,this.G=t.l,function(t,e){t.A["has-content"]=e}(this.b,function(t){var e,n,i=this.b;return e=(e=i.b[t])&&(e=e.b[0])?e.qa:null,(n=Gd(this,(n=i.b[t])?n.g:"any"))&&(n=!!(t=i.b[t])&&(0<t.b.length&&t.b[0].qa.f<=this.D)),n&&!!e&&!Yd(this,e)}),function(t,e){t.values["page-number"]=e}(this.b,new ue(this.b,function(){return this.ca+this.b.page},"page-number"))}function Bd(t,e,n,i,r){if(t.j.length){var o=new Nt(0,e,n,i);t=t.j;for(var a={},u=0;u<t.length;u++)za(o,a,t[u],0,null,null,null);u=a.width,t=a.height;var s=a["text-zoom"];if((u&&t||s)&&(a=At.em,(s?s.evaluate(o,"text-zoom"):null)===In&&(s=a/i,i=a,e*=s,n*=s),u&&t&&(u=Be(u.evaluate(o,"width"),o),o=Be(t.evaluate(o,"height"),o),0<u&&0<o)))return{width:r&&r.tb?2*(u+r.zc):u,height:o,fontSize:i}}return{width:e,height:n,fontSize:i}}function Ud(t,e,n,i,r,o,a,u,s,h,l,f){for(var c in Nt.call(this,0,i.width,i.height,i.fontSize),this.style=t,this.da=e,this.lang=e.lang||n,this.viewport=i,this.l={body:!0},this.g=r,this.A=this.b=this.J=this.f=this.F=null,this.D=0,this.Ab=o,this.j=new Sl(this.style.H),this.wa={},this.Z=null,this.h=l,this.Hb=new Ql(null,null,null,null,null,null,null),this.Y={},this.G=f||null,this.kb=a,this.zb=u,this.ca=s,this.ub=h,t.h)(e=t.h[c]["flow-consume"])&&(e.evaluate(this,"flow-consume")==ze?this.l[c]=!0:delete this.l[c]);this.Da={},this.sa=this.la=0}function zd(t){var e=ni("StyleInstance.init"),n=new Vc(t.h,t.da.url),i=new Xc(t.h,t.da.url,t.style.f,t.style.b);t.f=new ul(t.da,t.style.g,t.style.f,t,t.l,t.style.G,n,i),i.h=t.f,function(t,e){t.N=e;for(var n=0;n<t.J.length;n++)Vd(t.N,t.J[n],t.G[t.J[n].b])}(t.f,t),t.J={},t.J[t.da.url]=t.f;var r=function(t){for(var e=0;!t.H&&gl(t,e+=5e3,0)!=Number.POSITIVE_INFINITY;);return t.F}(t.f);for(t.G||(t.G=Ob(r)),t.F=new Fp(t.style.D),n=new Wu(t.style.g,t,n,i),t.F.l(n,r),Rp(t.F,t),t.Z=new fd(n,t.style.b,t.F,t,r),r=[],i=(n=l(t.style.l)).next();!i.done;i=n.next())(!(i=i.value).ia||i.ia.evaluate(t))&&(i=new El(i=yl(i.Ac,t)),r.push(i));(function(t,e,n){for(var i=[],r=(e=l(e)).next();!r.done;r=e.next())(r=r.value).src&&r.b?i.push(Tl(t,r,n)):C.b("E_FONT_FACE_INVALID");return Ni(i)})(t.Ab,r,t.j).La(e);var o=t.style.A;return Object.keys(o).forEach(function(t){var e=Ub(Bb(o[t]),this);this.Da[t]={width:e.gc+2*e.oe,height:e.fc+2*e.oe}},t),e.result()}function Vd(t,e,n){(t=t.b)&&(t.f[e.b]||(t.f[e.b]=n),(n=t.b[e.b])||(n=new kh,t.b[e.b]=n),n.b.push(new Ch(new xh({pa:[{node:e.element,jb:lh,va:null,Ia:null,Fa:null,Sa:0}],na:0,K:!1,Qa:null}),e)))}function Xd(t,e){for(var n=Number.POSITIVE_INFINITY,i=0;i<e.b.length;i++){for(var r=e.b[i].b.f,o=r.pa[0].node,a=r.na,u=r.K,s=0;o.ownerDocument!=t.da.b;)s++,o=r.pa[s].node,u=!1,a=0;(r=_s(t.da,o,a,u))<n&&(n=r)}return n}function Hd(t,e,n){if(!e)return 0;var i,r=Number.POSITIVE_INFINITY;for(i in t.l){var o=e.b[i];if(!(n||o&&o.b.length)&&t.b){(o=t.f).R=i;for(var a=0;null!=o.R&&gl(o,a+=5e3,0)!=Number.POSITIVE_INFINITY;);o=t.b.b[i],e!=t.b&&o&&(o=o.clone(),e.b[i]=o)}o&&((o=Xd(t,o))<r&&(r=o))}return r}function Gd(t,e){switch(e){case"left":case"right":case"recto":case"verso":return new oe(t.style.b,e+"-page").evaluate(t);default:return!0}}function Yd(t,e){if(r=(o=t.A.f)[e.b].f){var n=e.f,i=o[r].b;if(!i.length||n<i[0])return!1;var r,o=K(i.length,function(t){return i[t]>n})-1,a=(o=i[o],Xd(t,r=t.A.b[r]));return!(o<a)&&(a<o||!Gd(t,r.g))}return!1}function Kd(t,e,n){var i=t.b.b[n];if(!i||!Gd(t,i.g))return ii(!0);i.g="any",function(t,e,n){(t=t.b.f[n]).C||(t.C=new zf(null)),e.jf=t.C}(t,e,n),Tc(e),t.l[n]&&0<e.Hb.length&&(e.Ib=!1);var r=ni("layoutColumn");return function(t){var e=t.l,n=gf(e),i=ni("layoutDeferredPageFloats"),r=!1,o=0;return xi(function(i){if(o===n.length)Ai(i);else{var a=n[o++],u=a.ja,s=_f(u),h=s.wf(u,e);h&&Zl(h,u)?ki(i):uf(e,u)||df(e,u)?(bf(e,a),Ai(i)):oc(t,a,s,null,h).then(function(t){t?(t=xf(e.parent))?Ai(i):(xf(e)&&!t&&(r=!0,e.Nc=!1),ki(i)):Ai(i)})}}).then(function(){r&&Ef(e),wi(i,!0)}),i.result()}(e).then(function(){if(xf(e.l))wi(r,!0);else{var o=[],a=[],u=!0;xi(function(r){if(!function(t,e){return ff(t,function(t){return t.g&&t.Kb[0].ja.f===e})}(e.l,n))for(var s={};0<i.b.length-a.length;){for(s.index=0;a.includes(s.index);)s.index++;if(s.selected=i.b[s.index],s.selected.qa.f>t.D||Yd(t,s.selected.qa))break;for(var h=s.index+1;h<i.b.length;h++)if(!a.includes(h)){var l=i.b[h];if(l.qa.f>t.D||Yd(t,l.qa))break;ih(l.qa,s.selected.qa)&&(s.selected=l,s.index=h)}if(s.qa=s.selected.qa,s.Oa=!0,_c(e,s.selected.b,u,i.f).then(function(t){return function(n){if(xf(e.l))Ai(r);else if(u=!1,t.selected.qa.u&&(null===n||t.qa.h)&&o.push(t.index),t.qa.h)a.push(t.index),Ai(r);else{var s,h=!!n||!!e.g;0<vf(e.l).length&&e.zb?n?(s=n.clone()).f=e.zb:s=new xh(e.zb):s=null,e.g&&s?(t.selected.b=s,i.f=e.g,e.g=null):(a.push(t.index),(n||s)&&(t.selected.b=n||s,o.push(t.index)),e.g&&(i.g=Ll(e.g))),h?Ai(r):(e.Ib=!1,t.Oa?t.Oa=!1:ki(r))}}}(s)),s.Oa)return void(s.Oa=!1);s={selected:s.selected,qa:s.qa,index:s.index,Oa:s.Oa}}Ai(r)}).then(function(){if(!xf(e.l)){i.b=i.b.filter(function(t,e){return o.includes(e)||!a.includes(e)}),"column"===i.f&&(i.f=null),Lc(e);var t=function(t){var e=nf(t).b;return t.b.reduce(function(t,n){var i=Vh(n.b);return e?Math.min(t,i.V):Math.max(t,i.P)},e?1/0:0)}(e.l);Ic(e,t)}wi(r,!0)})}}),r.result()}function Wd(t,e,n,i,r,o,a,u,s,h,l,f,c,p,b){var d,g=e.b?e.j&&e.N:e.h&&e.R,v=o.element,w=new Ql(s,"column",null,u,null,null,null),m=t.b.clone(),y=ni("createAndLayoutColumn");return xi(function(e){var y=new Ff([new qc(t.h,t.b.page-1)].concat(function t(e){return(e.parent?t(e.parent):[]).concat(e.D)}(w)));if(1<h){var E=t.viewport.b.createElement("div");P(E,"position","absolute"),v.appendChild(E),(d=new Vf(E,p,t.g,y,w)).Ib=b,d.b=o.b,d.Wb=o.Wb,d.Od=o.Od,o.b?(y=a*(f+l)+o.J,Ph(d,o.H,o.width),Fh(d,y,f)):(y=a*(f+l)+o.H,Fh(d,o.J,o.height),Ph(d,y,f)),d.F=n,d.G=i}else(function(t,e){t.element=e.element,t.left=e.left,t.top=e.top,t.marginLeft=e.marginLeft,t.marginRight=e.marginRight,t.marginTop=e.marginTop,t.marginBottom=e.marginBottom,t.Z=e.Z,t.eb=e.eb,t.ca=e.ca,t.Da=e.Da,t.H=e.H,t.Y=e.Y,t.J=e.J,t.R=e.R,t.width=e.width,t.height=e.height,t.F=e.F,t.G=e.G,t.Vb=e.Vb,t.ub=e.ub,t.h=e.h,t.Od=e.Od,t.Wb=e.Wb,t.b=e.b})(d=new Vf(v,p,t.g,y,w),o);d.ub=g?[]:r.concat(),d.Vb=c,rf(w,d),0<=d.width?Kd(t,d,u).then(function(){xf(w)||mf(w),xf(d.l)&&!xf(s)?(d.l.Nc=!1,t.b=m.clone(),d.element!==v&&v.removeChild(d.element),ki(e)):Ai(e)}):(mf(w),Ai(e))}).then(function(){wi(y,d)}),y.result()}function $d(t,e,n,i,r,o,a,u,s,h){function l(){return f.b=c.clone(),function(t,e,n,i,r,o,a,u,s,h,l,f){var c=ni("layoutFlowColumns"),p=t.b.clone(),b=mp(n,t,"column-gap"),d=1<l?mp(n,t,"column-width"):s.width,g=yp(n,t),v=Lo(wp(n,t,"shape-inside"),0,0,s.width,s.height,t),w=new ib(h,t,t.viewport,t.f,g,t.da,t.j,t.style.u,t,e,t.kb,t.zb,t.ub),m=0,y=null,E=[];return xi(function(e){Wd(t,n,i,r,o,s,m++,h,u,l,b,d,v,w,f).then(function(n){xf(a)?(E=null,Ai(e)):((n.g&&"column"!==n.g||m===l)&&!xf(u)&&mf(u),xf(u)?(m=0,t.b=p.clone(),u.Nc=!1,u.g?(E=null,Ai(e)):ki(e)):(y=n,E[m-1]=y,y.g&&"column"!=y.g&&(m=l,"region"!=y.g&&(t.Y[h]=!0)),m<l?ki(e):Ai(e)))})}).then(function(){wi(c,E)}),c.result()}(f,e,n,i,r,o,a,p,u,s,h,b).ea(function(t){return ii(t?{Db:t,position:f.b}:null)})}var f=t,c=f.b.clone(),p=function(t,e,n,i,r){return new Ql(e,"region",i,r,null,wp(n,t,"writing-mode")||null,t=wp(n,t,"direction")||null)}(f,a,n,u,s),b=!0;return l().ea(function(t){if(!t)return ii(null);if(1>=h)return ii(t.Db);var e=wp(n,f,"column-fill")||He;return(e=function(t,e,n,i,r,o,a){return e===Xe?null:(o=!(!(o=o[o.length-1])||!o.g),!a.b.length||o?new Rd(n,i,r,t):e===Ge?new Pd(n,i,r):null)}(h,e,l,p,u,t.Db,f.b.b[s]))?(b=!1,a.g=!0,p.g=!0,Id(e,t).ea(function(t){return a.g=!1,a.Nc=!1,p.g=!1,f.b=t.position,ii(t.Db)})):ii(t.Db)})}function Jd(t,e,n,i,r,o,a,u){if(function(t){t.H=0,t.G=0}(n),(l=wp(n,t,"enabled"))&&l!==Xn)return ii(!0);var s=ni("layoutContainer"),h=wp(n,t,"wrap-flow")===Xe,l=wp(n,t,"flow-from"),f=t.viewport.b.createElement("div"),c=wp(n,t,"position");P(f,"position",c?c.name:"absolute"),i.insertBefore(f,i.firstChild);var p=new Ih(f);p.b=n.b,p.ub=a,n.hc(t,p,e,t.j,t.g),p.F=r,p.G=o,r+=p.left+p.marginLeft+p.Z,o+=p.top+p.marginTop+p.ca,(n instanceof ud||n instanceof Pp&&!(n instanceof Qb))&&rf(u,p);var b=!1;if(l&&l.Uf())if(t.Y[l.toString()])xf(u)||n.Nd(t,p,e,null,1,t.g,t.j),l=ii(!0);else{var d=ni("layoutContainer.inner"),g=l.toString(),v=mp(n,t,"column-count");$d(t,e,n,r,o,a,u,p,g,v).then(function(i){if(!xf(u)){var r=i[0];r.element===f&&(p=r),p.h=Math.max.apply(null,i.map(function(t){return t.h})),n.Nd(t,p,e,r,v,t.g,t.j),(i=t.b.b[g])&&"region"===i.f&&(i.f=null)}wi(d,!0)}),l=d.result()}else{if((l=wp(n,t,"content"))&&Hh(l)){c="span",l.url&&(c="img");var w=t.viewport.b.createElement(c);l.fa(new Xh(w,t,l,Zc(t.h))),f.appendChild(w),"img"==c&&function(t,e,n,i){for(var r=0;r<jp.length;r++)Ep(t,e,n,jp[r],i)}(n,t,w,t.j),function(t,e,n,i){for(var r=0;r<Lp.length;r++)Ep(t,e,n.element,Lp[r],i)}(n,t,p,t.j)}else n.wa&&(i.removeChild(f),b=!0);b||n.Nd(t,p,e,null,1,t.g,t.j),l=ii(!0)}return l.then(function(){if(xf(u))wi(s,!0);else{if(!n.h||0<Math.floor(p.h)){if(!b&&!h){var l=wp(n,t,"shape-outside");l=zh(p,l,t);a.push(l)}}else if(!n.children.length)return i.removeChild(f),void wi(s,!0);var c=n.children.length-1;Ei(function(){for(;0<=c;){var i=n.children[c--];if((i=Jd(t,e,i,f,r,o,a,u)).Xa())return i.ea(function(){return ii(!xf(u))});if(xf(u))break}return ii(!1)}).then(function(){wi(s,!0)})}}),s.result()}function Zd(t,e,n){var i=e.I===e.h;t.Y={},n?(t.b=n.clone(),pl(t.f,n.g)):(t.b=new Th,pl(t.f,-1)),t.lang&&e.h.setAttribute("lang",t.lang),(n=t.b).page++,It(t,t.style.b),t.A=n.clone();var r=i?{}:function(t){var e={};return qu(t.f,[],"",e),us(t.f),e}(t.Z),o=function(t,e){var n=t.b,i=Hd(t,n);if(i==Number.POSITIVE_INFINITY)return null;for(var r,o=t.F.children,a=0;a<o.length;a++)if("vivliostyle-page-rule-master"!==(r=o[a]).f.jc){var u=1;(s=wp(r,t,"utilization"))&&s.gf()&&(u=s.L);var s=_t(t,"em",!1),h=t.gc()*t.fc();for(s in t.D=gl(t.f,i,Math.ceil(u*h/(s*s))),u=t,s=void 0,n.b)if((h=n.b[s])&&0<h.b.length){var f=h.b[0].qa;if(Xd(u,h)===f.f){t:switch(f=h.g,f){case"left":case"right":case"recto":case"verso":break t;default:f=null}h.g=Ll(_l(f,h.b[0].qa.g))}}for(h in t.A=n.clone(),s=(u=t).b.page,h=void 0,u.b.b)for(var c=(f=u.b.b[h]).b.length-1;0<=c;c--){var p=f.b[c];0>p.qa.wb&&p.qa.f<u.D&&(p.qa.wb=s)}if(It(t,t.style.b),!(u=wp(r,t,"enabled"))||u===Xn){for(i in n=t,C.debug("Location - page",n.b.page),C.debug("  current:",i),C.debug("  lookup:",n.D),i=void 0,n.b.b)for(a=(o=l(n.b.b[i].b)).next();!a.done;a=o.next())C.debug("  Chunk",i+":",a.value.qa.f);return i=t.Z,o=r,r=e,n=o.f,Object.keys(r).length?(o=n,a=cd(i,r),o=o.j+"^"+a,(a=i.j[o])||("background-host"===n.jc?((r=new Jb((n=i).l,n.h.f,r).h(n.h)).l(n.f,n.g),Rp(r,n.b),a=r):a=pd(i,r,n),i.j[o]=a),(r=a.f).f.g=r,r=a):(n.f.g=n,r=o),r}}throw Error("No enabled page masters")}(t,r);if(!o)return ii(null);var a=0;if(!i){!function(t,e){(t.F=e)?t.I.setAttribute("data-vivliostyle-auto-page-width",!0):t.I.removeAttribute("data-vivliostyle-auto-page-width")}(e,o.f.b.width.value===Gn),function(t,e){(t.D=e)?t.I.setAttribute("data-vivliostyle-auto-page-height",!0):t.I.removeAttribute("data-vivliostyle-auto-page-height")}(e,o.f.b.height.value===Yn),t.h.j=e,function(t,e,n){var i,r;if(t.G=Uc(t.b),(a=e["counter-reset"])&&(a=a.evaluate(n))&&(i=Oo(a,!0)),i)for(var o in i){var a=t,u=o,s=i[o];a.b[u]?a.b[u].push(s):a.b[u]=[s]}for(var h in(e=e["counter-increment"])&&(n=e.evaluate(n))&&(r=Oo(n,!1)),r?"page"in r||(r.page=1):r={page:1},r)t.b[h]||(e=h,(n=t).b[e]?n.b[e].push(0):n.b[e]=[0]),(n=t.b[h])[n.length-1]+=r[h]}(t.h,r,t);var u=Ub(Bb(r),t);!function(t,e,n){t.R=e.gc,t.N=e.fc,t.sa=e.gc+2*e.oe,t.la=e.fc+2*e.oe,n.I.style.width=t.sa+"px",n.I.style.height=t.la+"px",n.h.style.left=e.Yb+"px",n.h.style.right=e.Yb+"px",n.h.style.top=e.Yb+"px",n.h.style.bottom=e.Yb+"px",n.h.style.padding=e.Xb+"px",n.h.style.paddingTop=e.Xb+1+"px"}(t,u,e),Gb(r,u,e,t),a=u.Yb+u.Xb}r=wp(o,t,"writing-mode")||ln,u=wp(o,t,"direction")||yn;var s=new Ql(t.Hb,"page",null,null,null,r,u),h=ni("layoutNextPage");return xi(function(n){Jd(t,e,o,e.h,a,a+1,[],s).then(function(){xf(s)||mf(s),xf(s)?(t.b=t.A.clone(),s.Nc=!1,ki(n)):Ai(n)})}).then(function(){if(o.ca(t,e,t.g),!i){var r=new oe(o.f.f,"left-page");e.b=r.evaluate(t)?"left":"right",function(t){var e,n=t.b.page;for(e in t.b.b)for(var i=t.b.b[e],r=i.b.length-1;0<=r;r--){var o=i.b[r];0<=o.qa.wb&&o.qa.wb+o.qa.l-1<=n&&i.b.splice(r,1)}}(t),n=t.b,Object.keys(n.b).forEach(function(e){var i=(e=n.b[e]).f;!i||"page"!==i&&Gd(t,i)||(e.f=null)})}t.b=t.A=null,n.g=t.f.b,function(t,e,n){Object.keys(t.f).forEach(function(t){for(var e=this.f[t],n=0;n<e.length;)this.I.contains(e[n])?n++:e.splice(n,1);e.length||delete this.f[t]},t);for(var i=t.l,r=0;r<i.length;r++){var o=i[r];P(o.target,o.name,o.value.toString())}for(r=Tb(n,t.I),t.g.width=r.width,t.g.height=r.height,r=0;r<e.length;r++)if(n=e[r],o=t.f[n.pd],i=t.f[n.Gg],o&&i&&(o=Js(o,n.action)))for(var a=0;a<i.length;a++)i[a].addEventListener(n.event,o,!1)}(e,t.style.F.N[t.da.url],t.g),function(t,e){for(var n in t.l){var i=e.b[n];if(i&&0<i.b.length)return!1}return!0}(t,n)&&(n=null),wi(h,n)}),h.result()}function qd(t,e,n,i){hs.call(this,t.j,t,e,n,i,t.h,!n),this.g=t,this.F=!1}function Qd(t){var e,n=t.getAttribute("content");if(!n)return"";for(t={};e=n.match(/^,?\s*([-A-Za-z_.][-A-Za-z_0-9.]*)\s*=\s*([-+A-Za-z_0-9.]*)\s*/);)n=n.substr(e[0].length),t[e[1]]=e[2];return n=t.width-0,t=t.height-0,n&&t?"@-epubx-viewport{width:"+n+"px;height:"+t+"px;}":""}function tg(t){xr.call(this),this.h=t,this.j=new Ct(null),this.u=new Ct(this.j),this.G=new ip(this.j),this.J=new qd(this,null,null,null),this.N=0,this.A=[],this.D={},this.l={},this.H=[],this.F={},this.b=this.J}function eg(t,e){return rg(e,t)}function ng(t){gr.call(this,eg,"document"),this.R=t,this.H={},this.u={},this.f={},this.N={},this.l=null,this.b=[],this.J=!1}function ig(t,e,n){!function(t,e,n){t.b.splice(0),e&&e.forEach(t.Y,t),n&&n.forEach(t.Z,t)}(t,e,n);var i=N("user-agent.xml",T),r=ni("OPSDocStore.init");return va.get().then(function(e){t.l=e,Dd.get().then(function(){t.load(i).then(function(){t.J=!0,wi(r,!0)})})}),r.result()}function rg(t,e){var n=ni("OPSDocStore.load"),i=e.url;return Ps(e,t).then(function(e){if(e){if(t.J)for(var r=Qn("PREPROCESS_SINGLE_DOCUMENT"),o=0;o<r.length;o++)try{r[o](e.b)}catch(t){C.b("Error during single document preprocessing:",t)}r=[];var a=e.b.getElementsByTagNameNS("http://www.idpf.org/2007/ops","trigger");for(o=0;o<a.length;o++){var u=(l=a[o]).getAttributeNS("http://www.w3.org/2001/xml-events","observer"),s=l.getAttributeNS("http://www.w3.org/2001/xml-events","event"),h=l.getAttribute("action"),l=l.getAttribute("ref");u&&s&&h&&l&&r.push({Gg:u,event:s,action:h,pd:l})}t.N[i]=r;var f=[];if(f.push({url:N("user-agent-page.css",T),text:null,pb:"UA",Pa:null,media:null}),o=e.l)for(o=o.firstChild;o;o=o.nextSibling)1==o.nodeType&&(a=(r=o).namespaceURI,u=r.localName,"http://www.w3.org/1999/xhtml"==a?"style"==u?(a=r.getAttribute("class"),u=r.getAttribute("media"),s=r.getAttribute("title"),f.push({url:i,text:r.textContent,pb:"Author",Pa:s?a:null,media:u})):"link"==u?(s=r.getAttribute("rel"),a=r.getAttribute("class"),u=r.getAttribute("media"),("stylesheet"==s||"alternate stylesheet"==s&&a)&&(s=N(s=r.getAttribute("href"),i),r=r.getAttribute("title"),f.push({url:s,text:null,Pa:r?a:null,media:u,pb:"Author"}))):"meta"==u&&"viewport"==r.getAttribute("name")&&f.push({url:i,text:Qd(r),pb:"Author",Pa:null,media:null}):"http://www.gribuser.ru/xml/fictionbook/2.0"==a?"stylesheet"==u&&"text/css"==r.getAttribute("type")&&f.push({url:i,text:r.textContent,pb:"Author",Pa:null,media:null}):"http://example.com/sse"==a&&"property"===u&&(a=r.getElementsByTagName("name")[0])&&"stylesheet"===a.textContent&&(r=r.getElementsByTagName("value")[0])&&(s=N(r.textContent,i),f.push({url:s,text:null,Pa:null,media:null,pb:"Author"})));for(o=0;o<t.b.length;o++)f.push(t.b[o]);var c="";for(o=0;o<f.length;o++)c+=f[o].url,c+="^",f[o].text&&(c+=f[o].text),c+="^";var p=t.H[c];p?(t.f[i]=p,wi(n,e)):((o=t.u[c])||(o=new Ti(function(){var e=ni("fetchStylesheet"),n=0,i=new tg(t.l);return Ei(function(){if(n<f.length){var t=f[n++];return i.Tc(t.pb),null!==t.text?qr(t.text,i,t.url,t.Pa,t.media).Ec(!0):Qr(t.url,i,t.Pa,t.media)}return ii(!1)}).then(function(){p=new Md(t,i.j,i.u,i.J.l,i.G,i.A,i.D,i.l,i.H,i.F),t.H[c]=p,delete t.u[c],wi(e,p)}),e.result()},"FetchStylesheet "+i),t.u[c]=o,o.start()),o.get().then(function(r){t.f[i]=r,wi(n,e)}))}else wi(n,null)}),n.result()}function og(t){return String.fromCharCode(t>>>24&255,t>>>16&255,t>>>8&255,255&t)}function ag(t){(i=new B).append(t);var e=55-t.length&63;for(i.append("");0<e;)e--,i.append("\0");i.append("\0\0\0\0"),i.append(og(8*t.length)),t=i.toString();for(var n,i=[1732584193,4023233417,2562383102,271733878,3285377520],r=(e=[],0);r<t.length;r+=64){for(n=0;16>n;n++){var o=t.substr(r+4*n,4);e[n]=(255&o.charCodeAt(0))<<24|(255&o.charCodeAt(1))<<16|(255&o.charCodeAt(2))<<8|255&o.charCodeAt(3)}for(;80>n;n++)o=e[n-3]^e[n-8]^e[n-14]^e[n-16],e[n]=o<<1|o>>>31;o=i[0];var a,u=i[1],s=i[2],h=i[3],l=i[4];for(n=0;80>n;n++)a=20>n?1518500249+(u&s|~u&h):40>n?1859775393+(u^s^h):60>n?2400959708+(u&s|u&h|s&h):3395469782+(u^s^h),a+=(o<<5|o>>>27)+l+e[n],l=h,h=s,s=u<<30|u>>>2,u=o,o=a;i[0]=i[0]+o|0,i[1]=i[1]+u|0,i[2]=i[2]+s|0,i[3]=i[3]+h|0,i[4]=i[4]+l|0}return i}function ug(t,e,n,i,r,o,a,u,s,h){this.b=t,this.url=e,this.lang=n,this.f=i,this.l=r,this.$=gt(o),this.$.tb=!1,this.u=a,this.j=u,this.h=s,this.g=h,this.nb=this.page=null}function sg(t){var e=t.target,n="▸"==e.textContent;e.textContent=n?"▾":"▸";var i=e.parentNode;for(e.setAttribute("aria-expanded",n?"true":"false"),i.setAttribute("aria-expanded",n?"true":"false"),e=i.firstChild;e;)1!=e.nodeType?e=e.nextSibling:"toc-container"==(i=e).getAttribute("data-adapt-class")?(i.setAttribute("aria-hidden",n?"false":"true"),e=i.firstChild):("toc-node"==i.getAttribute("data-adapt-class")&&(i.style.height=n?"auto":"0px",3<=i.children.length&&(i.children[0].tabIndex=n?0:-1),2<=i.children.length&&(i.children[1].tabIndex=n?0:-1)),e=e.nextSibling);t.stopPropagation()}function hg(){var t;ng.call(this,(t=this,function(e){return t.A[e]})),this.g=new gr(Ps,"document"),this.F=new gr(vr,"text"),this.G={},this.la={},this.A={},this.D={}}function lg(t,e,n,i){var r=e+n,o=t.G[r];if(o)return ii(o);var a=ni("loadOPF");return t.g.load(r,void 0,void 0).then(function(n){n?t.g.load(e+"META-INF/encryption.xml",void 0,void 0).then(function(u){(i?t.F.load(e+"?r=list"):ii(null)).then(function(i){(function(t,e,n,i,r){t.h=e;var o=Hs(new Us([e.b]),"package");(s=Gs(o,"unique-identifier")[0])&&(s=Os(e,e.url+"#"+s))&&(t.H=s.textContent.replace(/[ \n\r\t]/g,""));var a={};for(var u in t.l=q(Hs(Hs(o,"manifest"),"item").X,function(n){var i=new fg,r=e.url;if(i.id=n.getAttribute("id"),i.src=N(n.getAttribute("href"),r),i.g=n.getAttribute("media-type"),r=n.getAttribute("properties")){r=r.split(/\s+/);for(var o={},u=0;u<r.length;u++)o[r[u]]=!0;i.l=o}return(n=n.getAttribute("fallback"))&&!mg[i.g]&&(a[i.src]=n),!t.Se&&i.l.nav&&(t.Se=i),!t.ca&&i.l["cover-image"]&&(t.ca=i),i}),t.f=$(t.l,cg),t.D=$(t.l,function(e){return Eg(t,e.src)}),a)for(s=u;s=t.f[a[s]];){if(mg[s.g]){t.Y[u]=s.src;break}s=s.src}t.b=q(Hs(Hs(o,"spine"),"itemref").X,function(e,n){var i=e.getAttribute("idref");return(i=t.f[i])&&(i.h=e,i.O=n),i}),(u=Gs(Hs(o,"spine"),"toc")[0])&&(t.kf=t.f[u]);if(u=Gs(Hs(o,"spine"),"page-progression-direction")[0]){t:switch(u){case"ltr":u="ltr";break t;case"rtl":u="rtl";break t;default:throw Error("unknown PageProgression: "+u)}t.R=u}var s=n?Gs(Hs(Hs(zs(Hs(Hs(new Us([n.b]),"encryption"),"EncryptedData"),Ms()),"CipherData"),"CipherReference"),"URI"):[],h=Hs(Hs(o,"bindings"),"mediaType").X;for(n=0;n<h.length;n++){var f=h[n].getAttribute("handler");(u=h[n].getAttribute("media-type"))&&f&&t.f[f]&&(t.Z[u]=t.f[f].src)}if(t.A=function(t,e){function n(t){if(t&&(t=t.match(/^\s*(([^:]*):)?(\S+)\s*$/))){var e=t[2]?i[t[2]]:"http://idpf.org/epub/vocab/package/#";if(e)return e+t[3]}return null}var i;if(e){for(var r in i={},pg)i[r]=pg[r];for(;r=e.match(/^\s*([A-Z_a-z\u007F-\uFFFF][-.A-Z_a-z0-9\u007F-\uFFFF]*):\s*(\S+)/);)e=e.substr(r[0].length),i[r[1]]=r[2]}else i=pg;var o=1,a=Z(r=Xs(function(t){return Vs(t,function(t,e){for(var n=t.firstChild;n;n=n.nextSibling)1==n.nodeType&&e(n)})}(t),function(t){if("meta"==t.localName){var e=n(t.getAttribute("property"));if(e)return{name:e,value:t.textContent,id:t.getAttribute("id"),order:o++,Ne:t.getAttribute("refines"),lang:null,scheme:n(t.getAttribute("scheme"))}}else if("http://purl.org/dc/elements/1.1/"==t.namespaceURI)return{name:pg.dcterms+t.localName,order:o++,lang:t.getAttribute("xml:lang"),value:t.textContent,id:t.getAttribute("id"),Ne:null,scheme:null};return null}),function(t){return t.Ne});r=function t(e){return function(t,e){var n,i={};for(n in t)i[n]=e(t[n],n);return i}(e,function(e){return q(e,function(e){var n={v:e.value,o:e.order};if(e.qh&&(n.s=e.scheme),e.id||e.lang){var i=a[e.id];(i||e.lang)&&(e.lang&&(e={name:bg,value:e.lang,lang:null,id:null,Ne:e.id,scheme:null,order:e.order},i?i.push(e):i=[e]),i=Z(i,function(t){return t.name}),n.r=t(i))}return n})})}(Z(r,function(t){return t.Ne?null:t.name}));var u=null;return r[bg]&&(u=r[bg][0].v),function t(e){for(var n in e){var i=e[n];i.sort(vg(n,u));for(var r=0;r<i.length;r++){var o=i[r].r;o&&t(o)}}}(r),r}(Hs(o,"metadata"),Gs(o,"prefix")[0]),t.A[bg]&&(t.lang=t.A[bg][0].v),t.A[gg]&&(t.F="pre-paginated"===t.A[gg][0].v),!i){if(0<s.length&&t.H)for(i=function(t){var e=function(t){var e=ag(t);t=[];for(var n=(e=l(e)).next();!n.done;n=e.next())n=n.value,t.push(n>>>24&255,n>>>16&255,n>>>8&255,255&n);return t}(t);return function(t){var n,i,r=ni("deobfuscator");return t.slice?(n=t.slice(0,1040),i=t.slice(1040,t.size)):(n=t.webkitSlice(0,1040),i=t.webkitSlice(1040,t.size-1040)),function(t){var e=ni("readBlob"),n=new FileReader,i=Si(e,n);return n.addEventListener("load",function(){i.sb(n.result)},!1),n.readAsArrayBuffer(t),e.result()}(n).then(function(t){t=new DataView(t);for(var n=0;n<t.byteLength;n++){var o=t.getUint8(n),o=o^e[n%20];t.setUint8(n,o)}wi(r,dr([t,i]))}),r.result()}}(t.H),n=0;n<s.length;n++)t.g.A[t.N+s[n]]=i;return t.F&&xg(t),ii(!0)}if(o=new B,h={},0<s.length&&t.H)for(u="1040:"+function(t){t=ag(t);for(var e=new B,n=0;n<t.length;n++)e.append(og(t[n]));for(t=e.toString(),e=new B,n=0;n<t.length;n++)e.append((256|t.charCodeAt(n)).toString(16).substr(1));return e.toString()}(t.H),n=0;n<s.length;n++)h[s[n]]=u;for(n=0;n<i.length;n++){var c=i[n];if(f=c.n){var p=decodeURI(f),s=t.D[p];u=null,s&&(s.A=0!=c.m,s.u=c.c,s.g&&(u=s.g.replace(/\s+/g,""))),s=h[p],(u||s)&&(o.append(f),o.append(" "),o.append(u||"application/octet-stream"),s&&(o.append(" "),o.append(s)),o.append("\n"))}}return xg(t),br(r,"","POST",o.toString(),"text/plain")})(o=new yg(t,e),n,u,i,e+"?r=manifest").then(function(){t.G[r]=o,t.la[e]=o,wi(a,o)})})}):C.error("Received an empty response for EPUB OPF "+r+". This may be caused by the server not allowing cross origin requests.")}),a.result()}function fg(){this.id=null,this.src="",this.h=this.j=this.g=null,this.O=-1,this.u=0,this.A=null,this.f=this.b=0,this.Bc=this.wb=null,this.l=J}function cg(t){return t.id}d(Ud,Nt),d(qd,hs),(n=qd.prototype).ae=function(){},n.$d=function(t,e,n){t=new op(this.g.u,t,e,n,this.g.G,this.ia,Er(this.oa)),Sr(this.g,new Xp(t.f,this.g,t,this.A))},n.Cc=function(t){t=t.Jc,this.ia&&(t=pe(this.f,this.ia,t)),Sr(this.g,new qd(this.g,t,this,this.G))},n.Xd=function(){Sr(this.g,new ds(this.f,this.oa))},n.Zd=function(){var t={};this.g.A.push({Ac:t,ia:this.ia}),Sr(this.g,new gs(this.f,this.oa,null,t,this.g.h))},n.Yd=function(t){var e=this.g.l[t];e||(e={},this.g.l[t]=e),Sr(this.g,new gs(this.f,this.oa,null,e,this.g.h))},n.ce=function(){var t={};this.g.H.push(t),Sr(this.g,new gs(this.f,this.oa,this.ia,t,this.g.h))},n.rd=function(t){var e=this.g.D;if(t){var n=Ba(e,"_pseudos");(e=n[t])||(e={},n[t]=e)}Sr(this.g,new gs(this.f,this.oa,null,e,this.g.h))},n.be=function(){this.F=!0,this.Pb()},n.Sc=function(){var t=new Ed(this.g.u,this.g,this,this.A,this.g.F);Sr(this.g,t),t.Sc()},n.Ka=function(){if(hs.prototype.Ka.call(this),this.F){this.F=!1;var t,e="R"+this.g.N++,n=Ne(e);t=this.ia?new Ra(n,0,this.ia):new Oa(n,0),Ua(this.mb,"region-id").push(t),this.ac(),e=new qd(this.g,this.ia,this,e),Sr(this.g,e),e.Ka()}},d(tg,xr),tg.prototype.error=function(t){C.b("CSS parser:",t)},d(ng,gr),ng.prototype.Y=function(t){var e=t.url;e&&(e=N(e,A)),this.b.push({url:e,text:t.text,pb:"Author",Pa:null,media:null})},ng.prototype.Z=function(t){var e=t.url;e&&(e=N(e,A)),this.b.push({url:e,text:t.text,pb:"User",Pa:null,media:null})},ug.prototype.Ee=function(t){var e=this.u.Ee(t);return function(t,n,i){var r=i.behavior;if(!r||"toc-node"!=r.toString()&&"toc-container"!=r.toString())return e(t,n,i);(i=t.firstChild)&&1!==i.nodeType&&""===i.textContent.trim()&&t.replaceChild(t.ownerDocument.createComment(i.textContent),i);var o=n.getAttribute("data-adapt-class");if("toc-node"==o){var a=n.firstChild;"▸"!=a.textContent&&(a.textContent="▸",P(a,"cursor","pointer"),a.addEventListener("click",sg,!1),a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),n.setAttribute("aria-expanded","false"),"0px"!==n.style.height&&(a.tabIndex=0))}return(i=n.ownerDocument.createElement("div")).setAttribute("data-adapt-process-children","true"),"toc-node"==r.toString()?((a=n.ownerDocument.createElement("div")).textContent="▹",P(a,"margin","0.2em 0 0 -1em"),P(a,"margin-inline-start","-1em"),P(a,"margin-inline-end","0"),P(a,"display","inline-block"),P(a,"width","1em"),P(a,"text-align","center"),P(a,"vertical-align","top"),P(a,"cursor","default"),P(a,"font-family","Menlo,sans-serif"),i.appendChild(a),P(i,"overflow","hidden"),i.setAttribute("data-adapt-class","toc-node"),i.setAttribute("role","treeitem"),("toc-node"==o||"toc-container"==o)&&(P(i,"height","0px"),(t=t.firstElementChild)&&"a"===t.localName&&(t.tabIndex=-1))):"toc-node"==o?(i.setAttribute("data-adapt-class","toc-container"),i.setAttribute("role","group"),i.setAttribute("aria-hidden","true")):null==o&&i.setAttribute("role","tree"),ii(i)}},ug.prototype.Rc=function(t,e,n,i,r){if(this.page)return ii(this.page);var o=this,a=ni("showTOC"),u=new Zs(t,t);return this.page=u,this.b.load(this.url).then(function(i){var s=o.b.f[i.url],h=Bd(s=new Md(o.b,s.f,s.b,ss.clone(),s.D,s.l,s.u,s.h,s.j,s.A),n,1e5,r);e=new Ib(e.window,h.fontSize,e.root,h.width,h.height);var l=new Ud(s,i,o.lang,e,o.f,o.l,o.Ee(i),o.j,0,o.h,o.g);o.nb=l,l.$=o.$,zd(l).then(function(){Zd(l,u,null).then(function(){!function t(e,n,i){if(i--)for(n=n.firstChild;n;n=n.nextSibling)if(1==n.nodeType){var r=n;"auto"!=D(r,"height","auto")&&(P(r,"height","auto"),t(e,r,i)),"absolute"==D(r,"position","static")&&(P(r,"position","relative"),t(e,r,i))}}(o,t,2),wi(a,u)})})}),a.result()},ug.prototype.Qd=function(){this.page&&(this.page.I.style.visibility="hidden",this.page.I.setAttribute("aria-hidden","true"))},ug.prototype.Oc=function(){return!!this.page&&"visible"===this.page.I.style.visibility},d(hg,ng),hg.prototype.load=function(t){var e=k(t);if(t=this.D[e])return t.Xa()?t:ii(t.get());var n=ni("EPUBDocStore.load");return(t=hg.mg.load.call(this,e,!0,"Failed to fetch a source document from "+e)).then(function(t){t?wi(n,t):C.error("Received an empty response for "+e+". This may be caused by the server not allowing cross origin requests.")}),n.result()};var pg={dcterms:"http://purl.org/dc/terms/",marc:"http://id.loc.gov/vocabulary/",media:"http://www.idpf.org/epub/vocab/overlays/#",rendition:"http://www.idpf.org/vocab/rendition/#",onix:"http://www.editeur.org/ONIX/book/codelists/current.html#",xsd:"http://www.w3.org/2001/XMLSchema#"},bg=pg.dcterms+"language",dg=pg.dcterms+"title",gg=pg.rendition+"layout";function vg(t,e){var n={};return function(i,r){var o,a,u=i.r||n,s=r.r||n;return t==dg&&(o="main"==u["http://idpf.org/epub/vocab/package/#title-type"])!=(a="main"==s["http://idpf.org/epub/vocab/package/#title-type"])?o?-1:1:(o=parseInt(u["http://idpf.org/epub/vocab/package/#display-seq"],10),isNaN(o)&&(o=Number.MAX_VALUE),a=parseInt(s["http://idpf.org/epub/vocab/package/#display-seq"],10),isNaN(a)&&(a=Number.MAX_VALUE),o!=a?o-a:t!=bg&&e&&(o=(u[bg]||u["http://idpf.org/epub/vocab/package/#alternate-script"])==e)!=(a=(s[bg]||s["http://idpf.org/epub/vocab/package/#alternate-script"])==e)?o?-1:1:i.o-r.o)}}function wg(){var t=window.MathJax;return t?t.Hub:null}var mg={"application/xhtml+xml":!0,"image/jpeg":!0,"image/png":!0,"image/svg+xml":!0,"image/gif":!0,"audio/mp3":!0};function yg(t,e){this.g=t,this.D=this.f=this.b=this.l=this.h=null,this.N=e,this.H=null,this.Z={},this.lang=null,this.j=0,this.F=!1,this.J=!0,this.u=null,this.A={},this.ca=this.Se=this.kf=null,this.Y={},this.R=null,this.G=function(t){function e(){}return e.prototype.Pe=function(t,e){return"viv-id-"+G(e+(t?"#"+t:""),":")},e.prototype.kc=function(e,n){if(r=e.match(/^([^#]*)#?(.*)$/)){var i=r[1]||n,r=r[2];if(i&&t.l.some(function(t){return t.src===i}))return"#"+this.Pe(r,i)}return e},e.prototype.Jg=function(t){return"#"===t.charAt(0)&&(t=t.substring(1)),t.indexOf("viv-id-")||(t=t.substring(7)),(t=function(t){var e="string"==typeof(e=":")?e:"\\u",n=new RegExp(G(e)+"[0-9a-fA-F]{4}","g");return t.replace(n,function(t){var n="string"==typeof(n=e)?n:"\\u";return t.indexOf(n)?t:String.fromCharCode(parseInt(t.substring(n.length),16))})}(t).match(/^([^#]*)#?(.*)$/))?[t[1],t[2]]:[]},new e}(this),wg()&&(ya["http://www.w3.org/1998/Math/MathML"]=!0)}function Eg(t,e){return t.N?e.substr(0,t.N.length)==t.N?decodeURI(e.substr(t.N.length)):null:e}function xg(t){for(var e=0,n=l(t.b),i=n.next();!i.done;i=n.next()){i=i.value;var r=t.F?1:Math.ceil(i.u/1024);i.b=e,i.f=r,e+=r}t.j=e,t.u&&t.u(t.j)}function Sg(t,e,n){t.f={},t.D={},t.l=[],t.b=t.l;var i=t.h=new Ns(null,"",(new DOMParser).parseFromString("<spine></spine>","text/xml"));return e.forEach(function(t){var e=new fg;e.O=t.index,e.id="item"+(t.index+1),e.src=t.url,e.wb=t.wb,e.Bc=t.Bc;var n=i.b.createElement("itemref");n.setAttribute("idref",e.id),i.root.appendChild(n),e.h=n,this.f[e.id]=e,this.D[t.url]=e,this.l.push(e)},t),n?function(t,e,n){var i=ni("EPUBDocStore.load");return e=k(e),(t.D[e]=rg(t,{status:200,url:e,contentType:n.contentType,responseText:null,responseXML:n,Wd:null})).La(i),i.result()}(t.g,e[0].url,n):ii(null)}function Cg(t,e){return ri("resolveFragment",function(n){if(e){var i,r=new pt;if(function(t,e){if(!(u=e.match(/^#?epubcfi\((.*)\)$/)))throw Error("E_CFI_NOT_CFI");for(var n=u[1],i=0,r=[];;)switch(n.charAt(i)){case"/":if(i++,!(u=n.substr(i).match(/^(0|[1-9][0-9]*)(\[([-a-zA-Z_0-9.\u007F-\uFFFF]+)(;([^\]]|\^\])*)?\])?/)))throw Error("E_CFI_NUMBER_EXPECTED");i+=u[0].length;var o=parseInt(u[1],10),a=u[3],u=ht(u[4]);r.push(new ft(o,a,_(u.s)));break;case":":if(i++,!(u=n.substr(i).match(/^(0|[1-9][0-9]*)(\[((([^\];,]|\^[\];,])*)(,(([^\];,]|\^[\];,])*))?)(;([^]]|\^\])*)?\])?/)))throw Error("E_CFI_NUMBER_EXPECTED");i+=u[0].length,o=parseInt(u[1],10),(a=u[4])&&(a=st(a));var s=u[7];s&&(s=st(s)),u=ht(u[10]),r.push(new ct(o,a,s,_(u.s)));break;case"!":i++,r.push(new lt);break;case"~":case"@":case"":return void(t.pa=r);default:throw Error("E_CFI_PARSE_ERROR")}}(r,e),t.h){var o=bt(r,t.h.b);if(1!=o.node.nodeType||o.K||!o.pd)return void wi(n,null);var a=o.node,u=a.getAttribute("idref");if("itemref"!=a.localName||!u||!t.f[u])return void wi(n,null);i=t.f[u],r=o.pd}else i=t.b[0];t.g.load(i.src).then(function(t){var e=bt(r,t.b);t=_s(t,e.node,e.offset,e.K),wi(n,{O:i.O,Ea:t,aa:-1})})}else wi(n,null)},function(t,n){C.b(n,"Cannot resolve fragment:",e),wi(t,null)})}function kg(t,e){return{page:t,position:{O:t.O,aa:e,Ea:t.offset}}}function Ag(t,e,n,i,r){this.S=t,this.viewport=e,this.j=n,this.l=r,this.Gb=[],this.g=[],this.$=gt(i),this.h=new Cb(e),this.f=new Kc(t.G),this.vf=!1}function Tg(t,e){var n=t.Gb[e.O];return n?n.Ja[e.aa]:null}function Ng(t,e,n){var i=ni("renderSinglePage"),r=function(t,e,n){var i=e.nb.viewport,r=i.b.createElement("div");r.setAttribute("data-vivliostyle-page-container",!0),r.setAttribute("role","region"),r.style.position="absolute",r.style.top="0",r.style.left="0",Cs||(r.style.visibility="hidden",r.setAttribute("aria-hidden","true")),i.h.appendChild(r);var o=i.b.createElement("div");o.setAttribute("data-vivliostyle-bleed-box",!0),r.appendChild(o);var a=new Zs(r,o);return a.O=e.item.O,a.position=n,a.offset=Hd(e.nb,n),a.offset||(e=t.S.G.Pe("",e.item.src),o.setAttribute("id",e),qs(a,o,e)),i!==t.viewport&&(t=to(null,new sr(mt(t.viewport.width,t.viewport.height,i.width,i.height),null)),a.l.push(new Ws(r,"transform",t))),a}(t,e,n);return Zd(e.nb,r,n).then(function(o){var a=(n=o)?n.page-1:e.ib.length-1;if(function(t,e,n,i){n.I.style.display="none",n.I.style.visibility="visible",n.I.style.position="",n.I.style.top="",n.I.style.left="",n.I.setAttribute("data-vivliostyle-page-side",n.b);var r=e.Ja[i];if(n.u=!e.item.O&&!i,e.Ja[i]=n,t.S.J){if(!i&&0<e.item.O){var o=t.S.b[e.item.O-1];e.item.b=o.b+o.f}e.item.f=e.Ja.length,t.S.j=t.S.b.reduce(function(t,e){return t+e.f},0),t.S.u&&t.S.u(t.S.j)}if(r)e.nb.viewport.f.replaceChild(n.I,r.I),tt(r,{type:"replaced",target:null,currentTarget:null,$f:n});else{if(r=null,0<i)r=e.Ja[i-1].I.nextElementSibling;else for(o=e.item.O+1;o<t.Gb.length;o++){var a=t.Gb[o];if(a&&a.Ja[0]){r=a.Ja[0].I;break}}e.nb.viewport.f.insertBefore(n.I,r)}t.l({width:e.nb.sa,height:e.nb.la},e.nb.Da,e.item.O,e.nb.ca+i)}(t,e,r,a),function(t,e,n){if(0<(o=Object.keys(t.j.f)).length){var i=Uc(t.b);o.forEach(function(t){this.A[t]=i;var r=this.D[t];if(r&&r.aa<n&&(r=this.h[t])){var o,a=this.f[t];for(a||(a=this.f[t]=[]);o=r.shift();)o.qd=!1,a.push(o)}this.D[t]={O:e,aa:n}},t)}for(var r,o=t.G;r=t.u.shift();){r.Je=o,r.O=e,r.aa=n;var a=void 0;r.qd?(a=t.h[r.Dc])||(a=t.h[r.Dc]=[]):(a=t.f[r.Dc])||(a=t.f[r.Dc]=[]),a.every(function(t){return!(r===t||t&&r.Dc===t.Dc&&r.qd===t.qd&&r.O===t.O&&r.aa===t.aa)})&&a.push(r)}t.j=null}(t.f,r.O,a),o=null,n){var u=e.ib[n.page];e.ib[n.page]=n,u&&e.Ja[n.page]&&(Nh(n,u)||(o=Ng(t,e,n)))}o||(o=ii(!0)),o.then(function(){var o=function(t,e){var n=[];Object.keys(e.f).forEach(function(t){(t=this.f[t])&&(n=n.concat(t))},t),n.sort(function(t,e){return t.O-e.O||t.aa-e.aa});var i=[],r=null;return n.forEach(function(t){r&&r.O===t.O&&r.aa===t.aa?r.Vd.push(t):(r={O:t.O,aa:t.aa,Je:t.Je,Vd:[t]},i.push(r))}),i}(t.f,r),u=0;xi(function(e){if(++u>o.length)Ai(e);else{var n=o[u-1];n.Vd=n.Vd.filter(function(t){return!t.qd}),n.Vd.length?Dg(t,n.O).then(function(i){i?(function(t,e){t.F.push(t.b),t.b=Uc(e)}(t.f,n.Je),function(t,e){t.H.push(t.g),t.g=e}(t.f,n.Vd),Ng(t,i,i.ib[n.aa]).then(function(n){var i=t.f;i.b=i.F.pop(),(i=t.f).g=i.H.pop(),(i=n.Ud.position).O===r.O&&i.aa===a&&(r=n.Ud.page),ki(e)})):ki(e)}):ki(e)}}).then(function(){r.I.parentElement||(r=e.Ja[a]),r.A=!n&&e.item.O===t.S.b.length-1,r.A&&function(t,e){var n=t.b.page[0];Array.from(e.root.querySelectorAll("[data-vivliostyle-pages-counter]")).forEach(function(t){var e=t.getAttribute("data-vivliostyle-pages-counter"),i=this.Le.findIndex(function(t){return t.Jc.g===e});t.textContent=this.Le[i].format([n])},t)}(t.f,t.viewport),wi(i,{Ud:kg(r,a),ag:n})})})}),i.result()}function Ig(t,e){var n=t.aa,i=-1;return 0>n?(i=t.Ea,n=(n=K(e.ib.length,function(t){return Hd(e.nb,e.ib[t],!0)>i}))===e.ib.length?e.complete?e.ib.length-1:Number.POSITIVE_INFINITY:n-1):n===Number.POSITIVE_INFINITY&&-1!==t.Ea&&(i=t.Ea),{O:t.O,aa:n,Ea:i}}function _g(t,e,n){var i=ni("findPage");return Dg(t,e.O).then(function(r){if(r){var o,a=null;xi(function(i){var u=Ig(e,r);o=u.aa,(a=r.Ja[o])?Ai(i):r.complete?(o=r.ib.length-1,a=r.Ja[o],Ai(i)):n?Lg(t,u).then(function(t){t&&(a=t.page,o=t.position.aa),Ai(i)}):yi(100).then(function(){ki(i)})}).then(function(){wi(i,kg(a,o))})}else wi(i,null)}),i.result()}function Lg(t,e){var n=ni("renderPage");return Dg(t,e.O).then(function(i){if(i){var r=Ig(e,i),o=r.aa,a=r.Ea,u=i.Ja[o];u?wi(n,kg(u,o)):xi(function(e){if(o<i.ib.length)Ai(e);else if(i.complete)o=i.ib.length-1,Ai(e);else{var n=i.ib[i.ib.length-1];Ng(t,i,n).then(function(t){var r=t.Ud.page;(n=t.ag)?0<=a&&Hd(i.nb,n)>a?(u=r,o=i.ib.length-2,Ai(e)):ki(e):(u=r,o=t.Ud.position.aa,i.complete=!0,Ai(e))})}}).then(function(){u=u||i.Ja[o];var e=i.ib[o];u?wi(n,kg(u,o)):Ng(t,i,e).then(function(t){t.ag||(i.complete=!0),wi(n,t.Ud)})})}else wi(n,null)}),n.result()}function jg(t,e,n){var i=ni("renderPagesUpto");e||(e={O:0,aa:0,Ea:0});var r,o=e.O,a=e.aa,u=0;return n&&(u=o),xi(function(n){Lg(t,{O:u,aa:u===o?a:Number.POSITIVE_INFINITY,Ea:u===o?e.Ea:-1}).then(function(t){r=t,++u>o?Ai(n):ki(n)})}).then(function(){wi(i,r)}),i.result()}function Og(t,e,n){return e="left"===e.b,t="ltr"===t.cc(n),!e&&t||e&&!t}function Rg(t,e,n){var i=ni("navigateToEPage");return function(t,e){return ri("resolveEPage",function(n){if(0>=e)wi(n,{O:0,Ea:0,aa:-1});else if(t.J){var i=t.b.findIndex(function(t){return!t.b&&!t.f||t.b<=e&&t.b+t.f>e});-1==i&&(i=t.b.length-1);var r=t.b[i];r&&r.f||(r=t.b[--i]),wi(n,{O:i,Ea:-1,aa:Math.floor(e-r.b)})}else{var o=K(t.b.length,function(n){return(n=t.b[n]).b+n.f>e});o==t.b.length&&o--;var a=t.b[o];t.g.load(a.src).then(function(t){(e-=a.b)>a.f&&(e=a.f);var i=0;0<e&&(t=Ls(t),(i=Math.round(t*e/a.f))==t&&i--),wi(n,{O:o,Ea:i,aa:-1})})}},function(t,n){C.b(n,"Cannot resolve epage:",e),wi(t,null)})}(t.S,e).then(function(e){e?_g(t,e,n).La(i):wi(i,null)}),i.result()}function Fg(t,e,n,i){C.debug("Navigate to",e);var r=Eg(t.S,k(e));if(!r){if(t.S.h&&e.match(/^#epubcfi\(/))r=Eg(t.S,t.S.h.url);else if("#"===e.charAt(0)){var o=t.S.G.Jg(e);r=t.S.h?Eg(t.S,o[0]):o[0],e=o[0]+(o[1]?"#"+o[1]:"")}if(null==r)return ii(null)}var a=t.S.D[r];if(!a)return t.S.h&&r==Eg(t.S,t.S.h.url)&&0<=(r=e.indexOf("#"))?function(t,e,n){var i=ni("navigateToCFI");return Cg(t.S,e).then(function(e){e?_g(t,e,n).La(i):wi(i,null)}),i.result()}(t,e.substr(r+1),i):ii(null);var u=ni("navigateTo");return Dg(t,a.O).then(function(r){var o=Os(r.da,e);o?_g(t,{O:a.O,aa:-1,Ea:Is(r.da,o)},i).La(u):n.O!==a.O?_g(t,{O:a.O,aa:0,Ea:-1},i).La(u):wi(u,null)}),u.result()}function Pg(t,e,n,i){if(a=wg()){var r=i.ownerDocument,o=r.createElement("span");i.appendChild(o),function t(e,n,i){if(n){if(1===n.nodeType&&"mglyph"===n.tagName)for(var r=l(n.attributes),o=r.next();!o.done;o=r.next())if("src"===(o=o.value).name){var a=N(o.nodeValue,i.url);o.namespaceURI?n.setAttributeNS(o.namespaceURI,o.name,a):n.setAttribute(o.name,a)}n.firstChild&&t(e,n.firstChild,i),n.nextSibling&&t(e,n.nextSibling,i)}}(t,n=r.importNode(n,!0),e),o.appendChild(n),(t=a.queue).Push(["Typeset",a,o]);var a,u=Si(a=ni("makeMathJaxView"));return t.Push(function(){u.sb(o)}),a.result()}return ii(null)}function Dg(t,e){if(e>=t.S.b.length)return ii(null);var n=t.Gb[e];if(n)return ii(n);var i=ni("getPageViewItem");if(o=t.g[e]){var r=Si(i);return o.push(r),i.result()}var o=t.g[e]=[],a=t.S.b[e],u=t.S.g;return u.load(a.src).then(function(r){a.j=r.b.title;var s=u.f[r.url],h=t.Ee(r),l=t.viewport,f=Bd(s,l.width,l.height,l.fontSize,t.$);f.width==l.width&&f.height==l.height&&f.fontSize==l.fontSize||(l=new Ib(l.window,f.fontSize,l.root,f.width,f.height)),f=t.Gb[e-1],null!==a.wb?f=a.wb-1:(!(0<e)||f&&f.complete?f=f?f.nb.ca+f.Ja.length:0:(f=a.b||e,t.S.F||f%2||f++),null!==a.Bc&&(f+=a.Bc)),function(t,e){var n=t.b.page;n&&n.length?n[n.length-1]=e:t.b.page=[e]}(t.f,f);var c=new Ud(s,r,t.S.lang,l,t.h,t.j,h,t.S.Y,f,t.S.G,t.f,t.S.R);c.$=t.$,zd(c).then(function(){n={item:a,da:r,nb:c,ib:[null],Ja:[],complete:!1},t.Gb[e]=n,wi(i,n),o.forEach(function(t){t.sb(n)})})}),i.result()}(n=Ag.prototype).cc=function(t){return this.S.R?this.S.R:(t=this.Gb[t?t.O:0])?t.nb.G:null},n.Nb=function(){return jg(this,{O:this.S.b.length-1,aa:Number.POSITIVE_INFINITY,Ea:-1},!1)},n.wg=function(t,e){return _g(this,{O:0,aa:0,Ea:-1},e)},n.zg=function(t,e){return _g(this,{O:this.S.b.length-1,aa:Number.POSITIVE_INFINITY,Ea:-1},e)},n.nextPage=function(t,e){var n=this,i=this,r=t.O,o=t.aa,a=ni("nextPage");return Dg(i,r).then(function(t){if(t){if(t.complete&&o==t.ib.length-1){if(r>=i.S.b.length-1)return void wi(a,null);r++,o=0;var u=n.Gb[r],s=u&&u.Ja[0];t=t.Ja[t.Ja.length-1],s&&t&&s.b==t.b&&(u.Ja.forEach(function(t){t.I&&t.I.remove()}),n.Gb[r]=null,n.g[r]=null)}else o++;_g(i,{O:r,aa:o,Ea:-1},e).La(a)}else wi(a,null)}),a.result()},n.Me=function(t,e){var n=t.O,i=t.aa;if(i)i--;else{if(!n)return ii(null);n--,i=Number.POSITIVE_INFINITY}return _g(this,{O:n,aa:i,Ea:-1},e)},n.Fg=function(t,e){var n=Tg(this,t);if(!n)return ii(null);var i=Og(this,n,t),r=this.nextPage(t,e);if(i)return r;var o=this;return r.ea(function(t){if(t){if(t.page.b===n.b)return r;var i=o.nextPage(t.position,e);return i.ea(function(t){return t?i:r})}return ii(null)})},n.Ig=function(t,e){var n=Tg(this,t);if(!n)return ii(null);var i=Og(this,n,t),r=this.Me(t,e),o=n.I.previousElementSibling;if(i){var a=this;return r.ea(function(t){return t?t.page.b===n.b||t.page.I!==o?r:a.Me(t.position,e):ii(null)})}return r},n.Ee=function(t){var e=this;return function(n,i){var r;if("object"==n.localName&&"http://www.w3.org/1999/xhtml"==n.namespaceURI){if(r=null,o=n.getAttribute("data")){var o=N(o,t.url);if(!(u=n.getAttribute("media-type"))){var a=Eg(e.S,o);a&&(a=e.S.D[a])&&(u=a.g)}if(u&&(a=e.S.Z[u])){(r=e.viewport.b.createElement("iframe")).style.border="none";o=X(o);var u,s=X(u);for((u=new B).append(a),u.append("?src="),u.append(o),u.append("&type="),u.append(s),a=n.firstChild;a;a=a.nextSibling)1==a.nodeType&&("param"==(s=a).localName&&"http://www.w3.org/1999/xhtml"==s.namespaceURI&&(o=s.getAttribute("name"),s=s.getAttribute("value"),o&&s&&(u.append("&"),u.append(encodeURIComponent(o)),u.append("="),u.append(encodeURIComponent(s)))));r.setAttribute("src",u.toString()),(u=n.getAttribute("width"))&&r.setAttribute("width",u),(u=n.getAttribute("height"))&&r.setAttribute("height",u)}}r||(r=e.viewport.b.createElement("span")).setAttribute("data-adapt-process-children","true"),r=ii(r)}else if("http://www.w3.org/1998/Math/MathML"==n.namespaceURI)r=Pg(e,t,n,i);else if("http://example.com/sse"==n.namespaceURI){switch(r=i?i.ownerDocument:e.viewport.b,u=n.localName){case"t":case"tab":case"ec":case"nt":case"fraction":case"comment":case"mark":u="span";break;case"ruby":case"rp":case"rt":break;default:u="div"}(r=r.createElement(u)).setAttribute("data-adapt-process-children","true"),r=ii(r)}else r=n.dataset&&"true"==n.dataset.mathTypeset?Pg(e,t,n,i):ii(null);return r}},n.Rc=function(t){var e=(i=this.S).Se||i.kf;if(this.vf=t,!e)return ii(null);if(this.b&&this.b.page)return this.b.page.I.style.visibility="visible",this.b.page.I.setAttribute("aria-hidden","false"),ii(this.b.page);var n=ni("showTOC");this.b||(this.b=new ug(i.g,e.src,i.lang,this.h,this.j,this.$,this,i.Y,i.G,this.f)),t=this.viewport;var i=Math.min(350,Math.round(.67*t.width)-16),r=(e=t.height-6,t.b.createElement("div"));return t.root.appendChild(r),r.style.visibility="hidden",r.style.width=i+10+"px",r.style.maxHeight=e+"px",r.setAttribute("data-vivliostyle-toc-box","true"),r.setAttribute("role","navigation"),this.b.Rc(r,t,i,e,this.viewport.fontSize).then(function(t){r.style.visibility="visible",r.setAttribute("aria-hidden","false"),wi(n,t)}),n.result()},n.Qd=function(){this.b&&this.b.Qd()},n.Oc=function(){return!!this.b&&this.b.Oc()};var Mg={eh:"singlePage",fh:"spread",Ug:"autoSpread"};function Bg(t,e,n,i){var r=this;this.window=t,this.ee=e,e.setAttribute("data-vivliostyle-viewer-viewport",!0),Cs&&e.setAttribute("data-vivliostyle-debug",!0),e.setAttribute("data-vivliostyle-viewer-status","loading"),this.Da=n,this.wa=i,t=t.document,this.sa=new kl(t.head,e),this.u="loading",this.J=[],this.S=null,this.ec=this.Ya=!1,this.f=this.j=this.g=this.A=null,this.fontSize=16,this.zoom=1,this.D=!1,this.R="singlePage",this.ca=!1,this.Nb=!0,this.$={fontFamily:"serif",lineHeight:1.25,margin:8,ve:!1,ne:25,ue:!1,Ge:!1,tb:!1,zc:1,$e:{vivliostyle:!0,print:!0},rc:void 0},this.Z=[],this.H=function(){},this.h=function(){},this.Y=function(){r.Ya=!0,r.H()},this.Ke=this.Ke.bind(this),this.F=function(){},this.G=t.getElementById("vivliostyle-page-rules"),this.N=!1,this.l=null,this.la={loadEPUB:this.qg,loadXML:this.rg,configure:this.Ze,moveTo:this.ta,toc:this.Rc},function(t){S(1,function(e){Ug(t,{t:"debug",content:e})}),S(2,function(e){Ug(t,{t:"info",content:e})}),S(3,function(e){Ug(t,{t:"warn",content:e})}),S(4,function(e){Ug(t,{t:"error",content:e})})}(this)}function Ug(t,e){e.i=t.Da,t.wa(e)}function zg(t,e){t.u!==e&&(t.u=e,t.ee.setAttribute("data-vivliostyle-viewer-status",e),Ug(t,{t:"readystatechange"}))}function Vg(t,e){return ev(t),(e?Cg(t.S,e).ea(function(e){return t.f=e,ii(!0)}):ii(!0)).ea(function(){return xv.b("beforeRender"),nv(t)})}function Xg(t,e){var n,i=parseFloat(e),r=/[a-z]+$/;if("string"==typeof e&&(n=e.match(r))){if("em"===(r=n[0])||"rem"===r)return i*t.fontSize;if("ex"===r)return i*At.ex*t.fontSize/At.em;if(r=At[r])return i*r}return i}function Hg(t,e){var n=[];t.g&&n.push(t.g),t.j&&(n.push(t.j.left),n.push(t.j.right)),n.forEach(function(t){t&&e(t)})}function Gg(t){Hg(t,function(e){e.removeEventListener("hyperlink",t.F,!1),e.removeEventListener("replaced",t.Ke,!1)})}function Yg(t){Gg(t),Hg(t,function(t){P(t.I,"display","none"),t.I.setAttribute("aria-hidden","true")}),t.g=null,t.j=null}function Kg(t,e){e.addEventListener("hyperlink",t.F,!1),e.addEventListener("replaced",t.Ke,!1),P(e.I,"visibility","visible"),P(e.I,"display","block"),e.I.setAttribute("aria-hidden","false")}function Wg(t){var e=ni("reportPosition");return function(t,e,n){var i=t.b[e],r=ni("getCFI");return t.g.load(i.src).then(function(t){var e=js(t,n),o=null;e&&(t=_s(t,e,0,!1),dt(o=new pt,e,n-t),i.h&&dt(o,i.h,0),o=o.toString()),wi(r,o)}),r.result()}(t.S,t.f.O,t.f.Ea).then(function(n){var i=t.g;(t.ca&&0<i.j.length?Ni(i.j):ii(!0)).then(function(){(function(t,e,n){var i=ni("sendLocationNotification"),r={t:"nav",first:e.u,last:e.A,metadata:t.S.A,itemTitle:t.S.b[e.O].j};return function(t,e){var n=t.b[e.O];if(t.J)return ii(n.b+e.aa);if(0>=e.Ea)return ii(n.b);var i=ni("getEPage");return t.g.load(n.src).then(function(t){t=Ls(t),wi(i,n.b+Math.min(t,e.Ea)*n.f/t)}),i.result()}(t.S,t.f).then(function(e){r.epage=e,r.epageCount=t.S.j,n&&(r.cfi=n),Ug(t,r),wi(i,!0)}),i.result()})(t,i,n).La(e)})}),e.result()}function $g(t){var e=t.ee;if(t.A){var n=t.A;return e.style.marginLeft=n.marginLeft+"px",e.style.marginRight=n.marginRight+"px",e.style.marginTop=n.marginTop+"px",e.style.marginBottom=n.marginBottom+"px",new Ib(t.window,t.fontSize,e,n.width,n.height)}return new Ib(t.window,t.fontSize,e)}function Jg(t,e,n){return t.ec=!1,Gg(t),t.$.tb?function(t,e,n){var i=ni("getCurrentSpread"),r=Tg(t,e);if(!r)return ii({left:null,right:null});var o="left"===r.b;return(Og(t,r,e)?t.Me(e,n):t.nextPage(e,n)).then(function(n){var r=Tg(t,e);(n=n&&n.page)&&n.b===r.b&&(n=null),wi(i,o?{left:r,right:n}:{left:n,right:r})}),i.result()}(t.b,t.f,n).ea(function(n){return Yg(t),t.j=n,n.left&&(Kg(t,n.left),n.right?n.left.I.removeAttribute("data-vivliostyle-unpaired-page"):n.left.I.setAttribute("data-vivliostyle-unpaired-page",!0)),n.right&&(Kg(t,n.right),n.left?n.right.I.removeAttribute("data-vivliostyle-unpaired-page"):n.right.I.setAttribute("data-vivliostyle-unpaired-page",!0)),n=Zg(t,n),t.viewport.zoom(n.width,n.height,t.D?Qg(t,n):t.zoom),t.g=e,ii(null)}):(function(t,e){Yg(t),t.g=e,Kg(t,e)}(t,e),t.viewport.zoom(e.g.width,e.g.height,t.D?Qg(t,e.g):t.zoom),t.g=e,ii(null))}function Zg(t,e){var n=0,i=0;return e.left&&(n+=e.left.g.width,i=e.left.g.height),e.right&&(n+=e.right.g.width,i=Math.max(i,e.right.g.height)),e.left&&e.right&&(n+=2*t.$.zc),{width:n,height:i}}(n=Bg.prototype).qg=function(t){xv.f("beforeRender"),zg(this,"loading");var e=t.url,n=t.fragment,i=!!t.zipmeta,r=t.authorStyleSheet,o=t.userStyleSheet;this.viewport=null;var a=ni("loadEPUB"),u=this;return u.Ze(t).then(function(){var t=new hg;ig(t,r,o).then(function(){var r=N(e,u.window.location.href);u.J=[r],function(t,e,n){var i=ni("loadEPUBDoc");"/"!==e.substring(e.length-1)&&(e+="/"),n&&t.F.fetch(e+"?r=list"),t.g.fetch(e+"META-INF/encryption.xml");var r=e+"META-INF/container.xml";return t.g.load(r,!0,"Failed to fetch EPUB container.xml from "+r).then(function(o){if(o){for(var a=(o=l(o=Gs(Hs(Hs(Hs(new Us([o.b]),"container"),"rootfiles"),"rootfile"),"full-path"))).next();!a.done;a=o.next())if(a=a.value)return void lg(t,e,a,n).La(i);wi(i,null)}else C.error("Received an empty response for EPUB container.xml "+r+". This may be caused by the server not allowing cross origin requests.")}),i.result()}(t,r,i).then(function(t){u.S=t,Vg(u,n).then(function(){wi(a,!0)})})})}),a.result()},n.rg=function(t){xv.f("beforeRender"),zg(this,"loading");var e=t.url,n=t.document,i=t.fragment,r=t.authorStyleSheet,o=t.userStyleSheet;this.viewport=null;var a=ni("loadXML"),u=this;return u.Ze(t).then(function(){var t=new hg;ig(t,r,o).then(function(){var r=e.map(function(t,e){return{url:N(t.url,u.window.location.href),index:e,wb:t.wb,Bc:t.Bc}});u.J=r.map(function(t){return t.url}),u.S=new yg(t,""),Sg(u.S,r,n).then(function(){Vg(u,i).then(function(){wi(a,!0)})})})}),a.result()},n.Ze=function(t){if("boolean"==typeof t.autoresize&&(t.autoresize?(this.A=null,this.window.addEventListener("resize",this.Y,!1),this.Ya=!0):this.window.removeEventListener("resize",this.Y,!1)),"number"==typeof t.fontSize){var e=t.fontSize;5<=e&&72>=e&&this.fontSize!=e&&(this.fontSize=e,this.Ya=!0)}return"object"==typeof t.viewport&&t.viewport&&(200<=(e={marginLeft:Xg(this,(e=t.viewport)["margin-left"])||0,marginRight:Xg(this,e["margin-right"])||0,marginTop:Xg(this,e["margin-top"])||0,marginBottom:Xg(this,e["margin-bottom"])||0,width:Xg(this,e.width)||0,height:Xg(this,e.height)||0}).width||200<=e.height)&&(this.window.removeEventListener("resize",this.Y,!1),this.A=e,this.Ya=!0),"boolean"==typeof t.hyphenate&&(this.$.ve=t.hyphenate,this.Ya=!0),"boolean"==typeof t.horizontal&&(this.$.ue=t.horizontal,this.Ya=!0),"boolean"==typeof t.nightMode&&(this.$.Ge=t.nightMode,this.Ya=!0),"number"==typeof t.lineHeight&&(this.$.lineHeight=t.lineHeight,this.Ya=!0),"number"==typeof t.columnWidth&&(this.$.ne=t.columnWidth,this.Ya=!0),"string"==typeof t.fontFamily&&(this.$.fontFamily=t.fontFamily,this.Ya=!0),"boolean"==typeof t.load&&(this.ca=t.load),"boolean"==typeof t.renderAllPages&&(this.Nb=t.renderAllPages),"string"==typeof t.userAgentRootURL&&(A=t.userAgentRootURL.replace(/resources\/?$/,""),T=t.userAgentRootURL),"string"==typeof t.rootURL&&(A=t.rootURL,T=A+"resources/"),"string"==typeof t.pageViewMode&&t.pageViewMode!==this.R&&(this.R=t.pageViewMode,this.Ya=!0),"number"==typeof t.pageBorder&&t.pageBorder!==this.$.zc&&(this.viewport=null,this.$.zc=t.pageBorder,this.Ya=!0),"number"==typeof t.zoom&&t.zoom!==this.zoom&&(this.zoom=t.zoom,this.ec=!0),"boolean"==typeof t.fitToScreen&&t.fitToScreen!==this.D&&(this.D=t.fitToScreen,this.ec=!0),"object"==typeof t.defaultPaperSize&&"number"==typeof t.defaultPaperSize.width&&"number"==typeof t.defaultPaperSize.height&&(this.viewport=null,this.$.rc=t.defaultPaperSize,this.Ya=!0),function(t,e){Qn("CONFIGURATION").forEach(function(n){n=n(e),t.Ya=n.Ya||t.Ya,t.ec=n.ec||t.ec})}(this,t),ii(!0)},n.Ke=function(t){var e=this.g,n=this.j,i=t.target;n?n.left!==i&&n.right!==i||Jg(this,t.$f):e===t.target&&Jg(this,t.$f)},n.Kg=function(t,e,n,i){this.Z[i]=t,function(t,e){if(!t.N&&t.G){var n="";Object.keys(e).forEach(function(t){n+="@page "+t+"{margin:0;size:",t=e[t],n+=t.width+"px "+t.height+"px;}"}),t.G.textContent=n,t.N=!0}}(this,e)};var qg={Zg:"fit inside viewport"};function Qg(t,e){return Math.min(t.viewport.width/e.width,t.viewport.height/e.height)}function tv(){this.name="RenderingCanceledError",this.message="Page rendering has been canceled",this.stack=Error().stack}function ev(t){if(t.l){var e=t.l;if(pi(e,new tv),e!==ti&&e.b){e.b.g=!0;var n=new li(e);e.l="interrupt",e.b=n,e.f.sb(n)}}t.l=null}function nv(t){if(t.Ya=!1,t.ec=!1,function(t){var e,n=$g(t);t:switch(t.R){case"singlePage":e=!1;break t;case"spread":e=!0;break t;default:e=1.45<=n.width/n.height&&800<n.width}var i=t.$.tb!==e;if(t.$.tb=e,t.ee.setAttribute("data-vivliostyle-spread-view",e),t.A||!t.viewport||t.viewport.fontSize!=t.fontSize)return!1;if(!i&&n.width==t.viewport.width&&n.height==t.viewport.height||!i&&n.width==t.viewport.width&&n.height!=t.viewport.height&&/Android|iPhone|iPad|iPod/.test(navigator.userAgent))return!0;if(e=t.b&&function(t){return t.Gb.some(function(t){return t&&0<t.Ja.length})}(t.b)){t:{for(i=(e=l(t.b.Gb)).next();!i.done;i=e.next())if(i=i.value)for(var r=(i=l(i.Ja)).next();!r.done;r=i.next())if((r=r.value).F&&r.D){e=!0;break t}e=!1}e=!e}return!!e&&(t.viewport.width=n.width,t.viewport.height=n.height,t.ec=!0)}(t))return ii(!0);zg(t,"loading"),ev(t);var e=hi(ti.f,function(){return ri("resize",function(n){t.l=e,xv.f("render (resize)"),function(t){var e=!1,n=!1;if(t.b){e=t.b.Oc(),n=t.b.vf,t.b.Qd();for(var i=t.b,r=l(i.Gb),o=r.next();!o.done;o=r.next())(o=o.value)&&o.Ja.splice(0);for(i=i.viewport.root;i.lastChild;)i.removeChild(i.lastChild)}t.G&&(t.G.textContent="",t.N=!1),t.viewport=$g(t),P((i=t.viewport).g,"width",""),P(i.g,"height",""),P(i.f,"width",""),P(i.f,"height",""),P(i.f,"transform",""),t.b=new Ag(t.S,t.viewport,t.sa,t.$,t.Kg.bind(t)),e&&t.h({a:"toc",v:"show",autohide:n})}(t),t.f&&(t.f.aa=-1),function(t,e){t.J=e||t.F}(t.S,t.Nb),jg(t.b,t.f,!t.Nb).then(function(i){t.f=i.position,Jg(t,i.page,!0).then(function(){zg(t,"interactive"),function(t,e){if(t.u=e,t.J)return t.F&&!t.j&&xg(t),ii(!0);var n=0,i=0,r=ni("estimatePageCount");return xi(function(e){if(i===t.b.length)Ai(e);else{var r=t.b[i++];r.b=n,t.g.load(r.src).then(function(i){var o=1800,a=i.lang||t.lang;a&&a.match(/^(ja|ko|zh)/)&&(o/=3),r.f=Math.ceil(Ls(i)/o),n+=r.f,t.j=n,t.u&&t.u(t.j),ki(e)})}}).La(r),r.result()}(t.S,function(e){e={t:"nav",epageCount:e,first:t.g.u,last:t.g.A,metadata:t.S.A,itemTitle:t.S.b[t.f.O].j},(t.g.u||!t.f.aa&&t.S.b[t.f.O].b)&&(e.epage=t.S.b[t.f.O].b),Ug(t,e)}).then(function(){Wg(t).then(function(i){(t.Nb?t.b.Nb():ii(null)).then(function(){t.l===e&&(t.l=null),xv.b("render (resize)"),t.Nb&&zg(t,"complete"),Ug(t,{t:"loaded"}),wi(n,i)})})})})})},function(t,e){if(!(e instanceof tv))throw e;xv.b("render (resize)"),C.debug(e.message)})});return ii(!0)}function iv(t){return"string"==typeof t?JSON.parse(t):t}function rv(t,e){var n=iv(e),i=null;!function(t){var e,n=hi;ti?e=ti.f:(e=ei)||(e=new ui(new ai)),n(e,t,void 0)}(function(){var e=ni("commandLoop"),r=ti.f;return t.F=function(e){var n="#"===e.href.charAt(0)||t.J.some(function(t){return e.href.substr(0,t.length)==t});if(n){e.preventDefault();var i={t:"hyperlink",href:e.href,internal:n};hi(r,function(){return Ug(t,i),ii(!0)})}},xi(function(e){if(t.Ya)nv(t).then(function(){ki(e)});else if(t.ec)t.g&&Jg(t,t.g).then(function(){ki(e)});else if(n){var r=n;n=null,function(t,e){var n=e.a||"";return ri("runCommand",function(i){var r=t.la[n];r?r.call(t,e).then(function(){Ug(t,{t:"done",a:n}),wi(i,!0)}):(C.error("No such action:",n),wi(i,!0))},function(t,e){C.error(e,"Error during action:",n),wi(t,!0)})}(t,r).then(function(){ki(e)})}else r=ni("waitForCommand"),i=Si(r,self),r.result().then(function(){ki(e)})}).La(e),e.result()}),t.H=function(){var t=i;t&&(i=null,t.sb())},t.h=function(e){return!n&&(n=iv(e),t.H(),!0)},t.window.adapt_command=t.h}function ov(t,e,n){if(t==e)return t?[[0,t]]:[];(0>n||t.length<n)&&(n=null);var i=uv(t,e),r=t.substring(0,i),o=(i=sv(t=t.substring(i),e=e.substring(i)),t.substring(t.length-i));return t=function(t,e){var n;if(!t)return[[1,e]];if(!e)return[[-1,t]];n=t.length>e.length?t:e;var i=t.length>e.length?e:t;if(-1!=(r=n.indexOf(i)))return n=[[1,n.substring(0,r)],[0,i],[1,n.substring(r+i.length)]],t.length>e.length&&(n[0][0]=n[2][0]=-1),n;if(1==i.length)return[[-1,t],[1,e]];if(o=function(t,e){function n(t,e,n){for(var i,r,o,a,u=t.substring(n,n+Math.floor(t.length/4)),s=-1,h="";-1!=(s=e.indexOf(u,s+1));){var l=uv(t.substring(n),e.substring(s)),f=sv(t.substring(0,n),e.substring(0,s));h.length<f+l&&(h=e.substring(s-f,s)+e.substring(s,s+l),i=t.substring(0,n-f),r=t.substring(n+l),o=e.substring(0,s-f),a=e.substring(s+l))}return 2*h.length>=t.length?[i,r,o,a,h]:null}var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(4>i.length||2*r.length<i.length)return null;var o,a,u=n(i,r,Math.ceil(i.length/4)),i=n(i,r,Math.ceil(i.length/2));if(!u&&!i)return null;o=i?u&&u[4].length>i[4].length?u:i:u;return t.length>e.length?(u=o[0],i=o[1],r=o[2],a=o[3]):(r=o[0],a=o[1],u=o[2],i=o[3]),[u,i,r,a,o[4]]}(t,e))return i=o[1],r=o[3],n=o[4],o=ov(o[0],o[2]),i=ov(i,r),o.concat([[0,n]],i);t:{n=t.length;for(var i=e.length,r=Math.ceil((n+i)/2),o=2*r,a=Array(o),u=Array(o),s=0;s<o;s++)a[s]=-1,u[s]=-1;a[r+1]=0,u[r+1]=0;for(var s=n-i,h=!!(s%2),l=0,f=0,c=0,p=0,b=0;b<r;b++){for(var d=-b+l;d<=b-f;d+=2){for(var g,v=r+d,w=(g=d==-b||d!=b&&a[v-1]<a[v+1]?a[v+1]:a[v-1]+1)-d;g<n&&w<i&&t.charAt(g)==e.charAt(w);)g++,w++;if(a[v]=g,g>n)f+=2;else if(w>i)l+=2;else if(h&&(0<=(v=r+s-d)&&v<o&&-1!=u[v])){var m=n-u[v];if(g>=m){n=av(t,e,g,w);break t}}}for(d=-b+c;d<=b-p;d+=2){for(v=r+d,m=d==-b||d!=b&&u[v-1]<u[v+1]?u[v+1]:u[v-1]+1,g=m-d;m<n&&g<i&&t.charAt(n-m-1)==e.charAt(i-g-1);)m++,g++;if(u[v]=m,m>n)p+=2;else if(g>i)c+=2;else if(!h&&(0<=(v=r+s-d)&&v<o&&-1!=a[v]&&(g=a[v],w=r+g-v,g>=(m=n-m)))){n=av(t,e,g,w);break t}}}n=[[-1,t],[1,e]]}return n}(t=t.substring(0,t.length-i),e=e.substring(0,e.length-i)),r&&t.unshift([0,r]),o&&t.push([0,o]),function t(e){e.push([0,""]);for(var n,i=0,r=0,o=0,a="",u="";i<e.length;)switch(e[i][0]){case 1:o++,u+=e[i][1],i++;break;case-1:r++,a+=e[i][1],i++;break;case 0:1<r+o?(r&&o&&((n=uv(u,a))&&(0<i-r-o&&0==e[i-r-o-1][0]?e[i-r-o-1][1]+=u.substring(0,n):(e.splice(0,0,[0,u.substring(0,n)]),i++),u=u.substring(n),a=a.substring(n)),(n=sv(u,a))&&(e[i][1]=u.substring(u.length-n)+e[i][1],u=u.substring(0,u.length-n),a=a.substring(0,a.length-n))),r?o?e.splice(i-r-o,r+o,[-1,a],[1,u]):e.splice(i-r,r+o,[-1,a]):e.splice(i-o,r+o,[1,u]),i=i-r-o+(r?1:0)+(o?1:0)+1):i&&0==e[i-1][0]?(e[i-1][1]+=e[i][1],e.splice(i,1)):i++,r=o=0,u=a=""}""===e[e.length-1][1]&&e.pop();r=!1;for(i=1;i<e.length-1;)0==e[i-1][0]&&0==e[i+1][0]&&(e[i][1].substring(e[i][1].length-e[i-1][1].length)==e[i-1][1]?(e[i][1]=e[i-1][1]+e[i][1].substring(0,e[i][1].length-e[i-1][1].length),e[i+1][1]=e[i-1][1]+e[i+1][1],e.splice(i-1,1),r=!0):e[i][1].substring(0,e[i+1][1].length)==e[i+1][1]&&(e[i-1][1]+=e[i+1][1],e[i][1]=e[i][1].substring(e[i+1][1].length)+e[i+1][1],e.splice(i+1,1),r=!0)),i++;r&&t(e)}(t),null!=n&&(t=function(t,e){var n;t:{var i=t;if(0!==e){var r=0;for(n=0;n<i.length;n++){var o=i[n];if(-1===o[0]||0===o[0]){var a=r+o[1].length;if(e===a){n=[n+1,i];break t}if(e<a){i=i.slice(),a=e-r,r=[o[0],o[1].slice(0,a)],o=[o[0],o[1].slice(a)],i.splice(n,1,r,o),n=[n+1,i];break t}r=a}}throw Error("cursor_pos is out of bounds!")}n=[0,i]}return i=n[1],n=n[0],r=i[n],o=i[n+1],null==r||0!==r[0]?t:null!=o&&r[1]+o[1]===o[1]+r[1]?(i.splice(n,2,o,r),hv(i,n,2)):null!=o&&0===o[1].indexOf(r[1])?(i.splice(n,2,[o[0],r[1]],[0,r[1]]),0<(r=o[1].slice(r[1].length)).length&&i.splice(n+2,0,[o[0],r]),hv(i,n,3)):t}(t,n)),function(t){function e(t){return 55296<=t.charCodeAt(t.length-1)&&56319>=t.charCodeAt(t.length-1)}function n(t){return 56320<=t.charCodeAt(0)&&57343>=t.charCodeAt(0)}for(var i=!1,r=2;r<t.length;r+=1)0===t[r-2][0]&&e(t[r-2][1])&&-1===t[r-1][0]&&n(t[r-1][1])&&1===t[r][0]&&n(t[r][1])&&(i=!0,t[r-1][1]=t[r-2][1].slice(-1)+t[r-1][1],t[r][1]=t[r-2][1].slice(-1)+t[r][1],t[r-2][1]=t[r-2][1].slice(0,-1));if(!i)return t;for(i=[],r=0;r<t.length;r+=1)0<t[r][1].length&&i.push(t[r]);return i}(t)}function av(t,e,n,i){var r=t.substring(n),o=e.substring(i);return t=ov(t.substring(0,n),e.substring(0,i)),r=ov(r,o),t.concat(r)}function uv(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function sv(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function hv(t,e,n){for(n=e+n-1;0<=n&&n>=e-1;n--)if(n+1<t.length){var i=t[n],r=t[n+1];i[0]===r[1]&&t.splice(n,2,[i[0],i[1]+r[1]])}return t}function lv(t){return t.reduce(function(t,e){return e[0]===ov.b?t:t+e[1]},"")}function fv(t,e,n){var i=0,r=0;return t.some(function(t){for(var o=0;o<t[1].length;o++){switch(t[0]*n){case ov.f:i++;break;case ov.b:i--,r++;break;case ov.g:r++}if(r>e)return!0}return!1}),Math.max(Math.min(e,r-1)+i,0)}function cv(t,e,n,i,r){Kl.call(this,t,e,"block-end",null,n,r),this.g=i}function pv(t,e,n,i){Jl.call(this,t,"block-end",e,n,i)}function bv(t){this.f=t}function dv(){}function gv(t){return t.reduce(function(t,e){return t+e},0)/t.length}function vv(t,e){this.g(t,"end",e)}function wv(t,e){this.g(t,"start",e)}function mv(t,e,n){n||(n=this.j.now());var i,r=this.h[t];for(r||(r=this.h[t]=[]),t=r.length-1;0<=t&&(!(i=r[t])||i[e]);t--)i=null;i||(i={},r.push(i)),i[e]=n}function yv(){}function Ev(t){this.j=t,this.h={},this.registerEndTiming=this.b=this.registerStartTiming=this.f=this.g=yv}d(tv,Error),Bg.prototype.cc=function(){return this.b?this.b.cc(this.f):null},Bg.prototype.ta=function(t){var e=this;if("complete"!==this.u&&"next"!==t.where&&zg(this,"loading"),"string"==typeof t.where){switch(t.where){case"next":t=this.$.tb?this.b.Fg:this.b.nextPage;break;case"previous":t=this.$.tb?this.b.Ig:this.b.Me;break;case"last":t=this.b.zg;break;case"first":t=this.b.wg;break;default:return ii(!0)}if(t){var n=t;t=function(){return n.call(e.b,e.f,!e.Nb)}}}else if("number"==typeof t.epage){var i=t.epage;t=function(){return Rg(e.b,i,!e.Nb)}}else{if("string"!=typeof t.url)return ii(!0);var r=t.url;t=function(){return Fg(e.b,r,e.f,!e.Nb)}}var o=ni("moveTo");return t.call(e.b).then(function(t){var n;if(t){e.f=t.position;var i=ni("moveTo.showCurrent");n=i.result(),Jg(e,t.page,!e.Nb).then(function(){Wg(e).La(i)})}else n=ii(!0);n.then(function(t){"loading"===e.u&&zg(e,"interactive"),wi(o,t)})}),o.result()},Bg.prototype.Rc=function(t){var e=!!t.autohide;t=t.v;var n=this.b.Oc(),i=e!=this.b.vf&&"hide"!=t;if(n){if("show"==t&&!i)return ii(!0)}else if("hide"==t)return ii(!0);if(n&&"show"!=t)return this.b.Qd(),ii(!0);var r=this,o=ni("showTOC");return this.b.Rc(e).then(function(t){t&&(i&&(t.Lb={}),e&&t.addEventListener("hyperlink",function(){r.b.Qd()},!1),t.addEventListener("hyperlink",r.F,!1)),wi(o,!0)}),o.result()},ov.f=1,ov.b=-1,ov.g=0,d(cv,Kl),cv.prototype.cf=function(t){return!(t instanceof cv)},d(pv,Jl),pv.prototype.Ha=function(){return 1/0},pv.prototype.f=function(t){return t instanceof cv||this.Ha()<t.Ha()},bv.prototype.b=function(t){return!uh(t=mh(t),this.f.b)},(n=dv.prototype).Ef=function(t){return"footnote"===t.Ba},n.Df=function(t){return t instanceof cv},n.Kf=function(t,e){var n="region",i=of(e,n);return yf(of(e,"page"),i)&&(n="page"),n=new cv(i=mh(t),n,e.h,t.Y,t.N),e.je(n),ii(n)},n.Lf=function(t,e,n,i){return new pv(t[0].ja.W,t,n,i)},n.wf=function(t,e){return of(e,t.W).b.filter(function(t){return t instanceof pv})[0]||null},n.Af=function(t,e,n){t.Zf=!0,t.te=!1;var i=t.element,r=n.j;e=e.b;var o=n.j.w&&"rtl"===n.j.w.direction,a={},u=r.A._pseudos;if(e=ab(r,e,o,r.A,a),u&&u.before){var s={},h=xb(r,"http://www.w3.org/1999/xhtml","span");eb(h,"before"),i.appendChild(h),ab(r,e,o,u.before,s),delete s.content,mb(r,h,s)}delete a.content,mb(r,i,a),t.b=e,Mc(t,i),(r=Nb(n.f,i))&&(t.marginLeft=ec(r.marginLeft),t.Z=ec(r.borderLeftWidth),t.H=ec(r.paddingLeft),t.marginTop=ec(r.marginTop),t.ca=ec(r.borderTopWidth),t.J=ec(r.paddingTop),t.marginRight=ec(r.marginRight),t.eb=ec(r.borderRightWidth),t.Y=ec(r.paddingRight),t.marginBottom=ec(r.marginBottom),t.Da=ec(r.borderBottomWidth),t.R=ec(r.paddingBottom)),(n=Nb(n.f,i))&&(t.width=ec(n.width),t.height=ec(n.height))},n.ng=function(t,e){switch(t.g){case wn:!function t(e,n,i){i===e.W?e.D.push(n):t(tf(e,i),n,i)}(e,new bv(t),t.W)}},If.push(new dv),Ev.prototype.l=function(){var t=this.h,e="";Object.keys(t).forEach(function(n){for(var i=t[n],r=i.length,o=0;o<r;o++){var a=i[o];e+=n,1<r&&(e+="("+o+")"),e+=" => start: "+a.start+", end: "+a.end+", duration: "+(a.end-a.start)+"\n"}}),C.g(e)},Ev.prototype.u=function(){this.registerEndTiming=this.b=this.registerStartTiming=this.f=this.g=yv},Ev.prototype.A=function(){this.g=mv,this.registerStartTiming=this.f=wv,this.registerEndTiming=this.b=vv};var xv,Sv={now:Date.now},Cv=xv=new Ev(window&&window.performance||Sv);function kv(t){return(t=t.C)&&t instanceof Tv?t:null}function Av(t,e){t&&function(t,e){for(var n=t;n;n=n.parent){var i=n.C;i&&i instanceof Tv&&!Eh(n,i)&&e(i,n)}}(t.K?t.parent:t,function(t,n){t instanceof Ew||e.A.push(new Hv(n))})}function Tv(t,e){this.parent=t,this.j=e,this.b=null}function Nv(t,e){var n=Iv(t,e);return n?n.B:null}function Iv(t,e){do{if(!Eh(e,t)&&e.M===t.j)return e}while(e=e.parent);return null}function _v(t,e){t.b||Lv.some(function(e){return e.root===t.j&&(t.b=e.elements,!0)})||(t.b=new jv(e,t.j),Lv.push({root:t.j,elements:t.b}))}mv.call(Cv,"load_vivliostyle","start",void 0),b("vivliostyle.profile.profiler",Cv),Ev.prototype.printTimings=Ev.prototype.l,Ev.prototype.disable=Ev.prototype.u,Ev.prototype.enable=Ev.prototype.A,Tv.prototype.Ve=function(){return"Repetitive elements owner formatting context (vivliostyle.repetitiveelements.RepetitiveElementsOwnerFormattingContext)"},Tv.prototype.ef=function(t,e){return e},Tv.prototype.Xe=function(){},Tv.prototype.We=function(){};var Lv=[];function jv(t,e){this.N=t,this.uc=this.vc=this.u=this.D=this.l=this.A=null,this.G=this.H=0,this.xc=this.yc=!1,this.dd=this.pe=!0,this.j=!1,this.Z=e,this.J=this.g=null,this.R=[],this.Y=[]}function Ov(t,e){t.vc||(t.vc=sh(e),t.A=e.M,t.D=e.B)}function Rv(t,e){t.uc||(t.uc=sh(e),t.l=e.M,t.u=e.B)}function Fv(t,e,n,i,r){var o=n.B,a=n.B.ownerDocument.createElement("div");o.appendChild(a);var u=new Pl(r,a,n),s=u.za.g;return u.za.g=null,t.h=!0,Dl(u,new xh(e)).ea(function(){if(t.h=!1,o.removeChild(a),o)for(;a.firstChild;){var e=a.firstChild;a.removeChild(e),e.setAttribute("data-adapt-spec","1"),i?o.insertBefore(e,i):o.appendChild(e)}return u.za.g=s,ii(!0)})}function Pv(t,e){return Dv(e,t.Y,function(){return Mv(t.J,e,!1)})}function Dv(t,e,n){var i=e.filter(function(e){return e.w.M===t.M&&e.w.K===t.K});return 0<i.length?i[0].result:(n=n(t),e.push({w:t,result:n}),n)}function Mv(t,e,n){for(var i=[];t;t=t.parentNode){if(e.M===t)return e.K;i.push(t)}for(t=e.M;t;t=t.parentNode){var r=i.indexOf(t);if(0<=r)return!!n&&!r;for(r=t;r;r=r.previousElementSibling)if(i.includes(r))return!0}return e.K}function Bv(t){return!!(!t.xc&&t.pe&&t.uc||!t.yc&&t.dd&&t.vc)}function Uv(t){this.C=t}function zv(t){this.C=t}function Vv(t){this.C=t}function Xv(t){this.C=t}function Hv(t){this.w=Iv(t.C,t)}function Gv(t){Ml.call(this),this.C=t}function Yv(t){this.C=t}function Kv(){}function Wv(t){for(var e=[],n=t;n;n=n.Jd)n.A.forEach(function(n){if(n instanceof Hv){var i=n.w.C.b;e.push(i)}n instanceof aw&&(i=new uw(n.w,n.f),e.push(i)),n instanceof Ww&&Jw(n,t).forEach(function(t){e.push(t)})});return e}jv.prototype.b=function(t){var e=0;return t&&!this.f(t)?e:((!this.xc||t&&Pv(this,t))&&(e+=this.G),this.yc||(e+=this.H),e)},jv.prototype.F=function(t){var e=0;return t&&!this.f(t)?e:(t&&Pv(this,t)&&(e+=this.G),this.dd||(e+=this.H),e)},jv.prototype.f=function(t){var e=this;return Dv(t,this.R,function(){return Mv(e.Z,t,!0)})},Uv.prototype.b=function(){},Uv.prototype.f=function(t){return!!t},Uv.prototype.g=function(t,e,n,i){return(t=this.C.b)&&!t.j&&(t.D&&(t.H=Bc(t.D,n,t.N),t.D=null),t.u&&(t.G=Bc(t.u,n,t.N),t.u=null),t.j=!0),i},zv.prototype.b=function(){},zv.prototype.f=function(){return!0},zv.prototype.g=function(t,e,n,i){return i},d(Vv,Uv),Vv.prototype.b=function(t,e){Uv.prototype.b.call(this,t,e);var n=ni("BlockLayoutProcessor.doInitialLayout");return Rl(new Ol(new Yv(t.C),e.j),t).La(n),n.result()},Vv.prototype.f=function(){return!1},d(Xv,zv),Xv.prototype.b=function(t,e){return Eh(t,this.C)||t.K||e.A.unshift(new Hv(t)),function(t,e){var n=t.C,i=ni("doLayout");return sw(vb(e.j,t,!1),e).then(function(t){var r=t;xi(function(t){for(var i={};r;){if(i.Oa=!0,kc(e,r,!1).then(function(i){return function(o){r=o,xf(e.l)?Ai(t):e.g?Ai(t):r&&e.u&&r&&r.xa?Ai(t):r&&r.K&&r.M==n.j?Ai(t):i.Oa?i.Oa=!1:ki(t)}}(i)),i.Oa)return void(i.Oa=!1);i={Oa:i.Oa}}Ai(t)}).then(function(){wi(i,r)})}),i.result()}(t,e)},(n=Hv.prototype).ie=function(t,e){var n=this.w.C.b;return!(n&&!jc(this.w.B)&&Bv(n))||!(e&&!t||t&&t.xa)},n.kd=function(){var t=this.w.C.b;return!(!t||!Bv(t))&&(!t.xc&&t.pe&&t.uc?t.xc=!0:!t.yc&&t.dd&&t.vc&&(t.yc=!0),!0)},n.$c=function(t,e,n,i){(n=this.w.C.b)&&t&&i.u&&(!e||Pv(n,e))&&(n.xc=!1,n.pe=!1)},n.Na=function(t,e){var n=this.w.C,i=this.w.C.b;if(!i)return ii(!0);var r=this.w;return function(t,e,n){var i=t.b;return i&&(t=Iv(t,e)).B?!i.vc||i.yc?ii(!0):Fv(i,i.vc,t,t.B.firstChild,n):ii(!0)}(n,r,e).ea(function(){return function(t,e,n){var i=t.b;return i&&!i.xc&&(t=Iv(t,e)).B?!i.uc||i.xc?ii(!0):Fv(i,i.uc,t,null,n):ii(!0)}(n,r,e).ea(function(){return i.yc=i.xc=!1,i.pe=!0,i.dd=!0,ii(!0)})})},n.qe=function(t){return t instanceof Hv&&this.w.C===t.w.C},n.se=function(){return 10},d(Gv,Ml),Gv.prototype.pf=function(t){var e=this.C.b;return Eh(t,this.C)||e.j?(Eh(t,this.C)||t.K||!e||(e.yc=!1,e.dd=!1),new Xv(this.C)):new Vv(this.C)},d(Yv,Fl),Yv.prototype.yd=function(t){var e=this.C,n=t.w,i=e.b;if(n.parent&&e.j===n.parent.M){switch(n.u){case"header":if(!i.vc)return Ov(i,n),ii(!0);n.u="none";break;case"footer":if(!i.uc)return Rv(i,n),ii(!0);n.u="none"}i.g||(i.g=n.M)}return Fl.prototype.yd.call(this,t)},Yv.prototype.oc=function(t){var e=this.C,n=t.w;return n.M===e.j&&(e.b.J=t.hd&&t.hd.M,t.Rb=!0),"header"===n.u||"footer"===n.u?ii(!0):Fl.prototype.oc.call(this,t)},d(Kv,Fc),Kv.prototype.he=function(t,e,n){if(Xf(e,t))return Cc(e,t);var i=t.C;return Nv(i,t)?(n&&Av(t.parent,e),Eh(t,i)?Fc.prototype.he.call(this,t,e,n):Bl(new Gv(i),t,e)):Jf(e,t)},Kv.prototype.Ye=function(t){var e=kv(t).b;return!!e&&(e.h||e.A!==t.M&&e.l!==t.M||t.B.parentNode.removeChild(t.B),!1)},Kv.prototype.Na=function(t,e,n,i){return Fc.prototype.Na.call(this,t,e,n,i)},Kv.prototype.Bd=function(t,e,n,i){Fc.prototype.Bd(t,e,n,i)};var $v=new Kv;function Jv(t,e){if(!t||!t.J||t.K||Xf(e,t))return ii(t);var n=t.J;return ow(n,e,t).ea(function(i){var r=t.B;r.appendChild(i);var o=Bc(i,e,t.b);return r.removeChild(i),e.A.push(new aw(t,n,o)),ii(t)})}function Zv(t,e,n){this.b=t,this.f=e,this.Jb=n}function qv(t){this.b=t}function Qv(t){this.b=t}function tw(t,e,n){ew(n,function(n){xs(t,n,e)})}function ew(t,e){var n=t._viewConditionalStyles;n&&n.forEach(function(t){t.Bg.matches()&&e(t.Lg)})}function nw(t,e,n){var i=iw;(!i[t]||i[t].bb<=n)&&(i[t]={Sa:e,bb:n})}qn("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Tv&&!(t instanceof Ew)?$v:null}),Zv.prototype.matches=function(){var t=iw[this.b];return!!t&&null!=t.Sa&&fu(t.Sa,this.f,this.Jb)},qv.prototype.matches=function(){return this.b.some(function(t){return t.matches()})},Qv.prototype.matches=function(){return this.b.every(function(t){return t.matches()})};var iw={};function rw(t,e){this.b=e,this.M=t}function ow(t,e,n){var i=n.B.ownerDocument.createElement("div"),r=new Pl(e,i,n),o=r.za.g;return r.za.g=null,Dl(r,function(t){var e=Qp.createElementNS("http://www.w3.org/1999/xhtml","div");return eb(e,"after-if-continues"),t=new fh(t.M,e,null,null,null,3,t.b),new xh({pa:[{node:e,jb:t.type,va:t,Ia:null,Fa:null}],na:0,K:!1,Qa:null})}(t)).ea(function(){t.b.f["after-if-continues"]=!1,r.za.g=o;var e=i.firstChild;return P(e,"display","block"),ii(e)})}function aw(t,e,n){this.w=t,this.b=e,this.f=n}function uw(t,e){this.w=t,this.g=e}function sw(t,e){return t.ea(function(t){return Jv(t,e)})}function hw(t,e,n){var i=t.w,r=i.display,o=i.parent?i.parent.display:null,a=!1;if("inline-table"===o&&!(i.C instanceof Ew))for(var u=i.parent;u;u=u.parent)if(u.C instanceof Ew){a=u.C===e;break}return a||"table-row"===r&&!lw(o)&&"table"!==o&&"inline-table"!==o||"table-cell"===r&&"table-row"!==o&&!lw(o)&&"table"!==o&&"inline-table"!==o||i.C instanceof Ew&&i.C!==e?Jf(n,i).ea(function(e){return t.w=e,ii(!0)}):null}function lw(t){return"table-row-group"===t||"table-header-group"===t||"table-footer-group"===t}function fw(t,e){this.rowIndex=t,this.M=e,this.b=[]}function cw(t,e,n){this.rowIndex=t,this.Ra=e,this.g=n,this.f=n.colSpan||1,this.rowSpan=n.rowSpan||1,this.height=0,this.b=null}function pw(t,e,n){this.rowIndex=t,this.Ra=e,this.Zb=n}function bw(t,e,n){this.g=t,this.b=n,this.ic=new Pl(t,e,n),this.f=!1}function dw(t,e){this.B=t,this.b=e}function gw(t,e,n,i){Bf.call(this,t,e,n,i),this.C=t.C,this.rowIndex=this.l=null}function vw(t){return t.l||(t.l=function(t){return kw(t.C,null!=t.rowIndex?t.rowIndex:t.rowIndex=Sw(t.C,t.position.M)).map(t.C.Pd,t.C)}(t).map(function(t){return t.bc()})),t.l}function ww(t,e,n){this.rowIndex=t,this.j=e,this.C=n,this.h=null}function mw(t){return t.h||(t.h=yw(t).map(function(t){return t.bc()})),t.h}function yw(t){return Cw(t.C,t.rowIndex).map(t.C.Pd,t.C)}function Ew(t,e){Tv.call(this,t,e),this.F=e,this.u=!1,this.G=-1,this.N=0,this.H=[],this.J=this.A=null,this.R=0,this.g=[],this.l=[],this.f=[],this.D=null,this.h=[],this.b=null}function xw(t,e){var n=t.l[e];return n||(n=t.l[e]=[]),n}function Sw(t,e){return t.g.findIndex(function(t){return e===t.M})}function Cw(t,e){return xw(t,e).reduce(function(t,e){return e.Zb!==t[t.length-1]?t.concat(e.Zb):t},[])}function kw(t,e){return Cw(t,e).filter(function(t){return t.rowIndex+t.rowSpan-1>e})}function Aw(t){return 0>t.G&&(t.G=Math.max.apply(null,t.g.map(function(t){return t.b.reduce(function(t,e){return t+e.f},0)}))),t.G}function Tw(t,e){t.A.forEach(function(t){t instanceof Hv&&e.push(t.w.C.b),t instanceof Ww&&Jw(t,null).forEach(function(t){e.push(t)})})}function Nw(t){this.f=t}function Iw(t,e,n){var i=0;return t.f.forEach(function(t){t=Df(e,t),i=Math.max(i,n(t))}),i}function _w(t,e){this.C=t,this.h=e,this.rowIndex=-1,this.Ra=0,this.g=!1,this.f=[]}function Lw(t,e){var n=e.w;n&&n.B&&!bc(n)&&t.f.push(n.clone())}function jw(t,e){0<t.f.length&&lc(t.h,e.w,t.f),t.f=[]}function Ow(t,e){this.dc=!0,this.C=t,this.f=e,this.l=!1,this.b=-1,this.g=0,this.u=e.u,e.u=!1}(n=aw.prototype).ie=function(t,e){return!(e&&!t||t&&t.xa)},n.kd=function(){return!1},n.$c=function(){},n.Na=function(t,e){var n=this;return new uw(this.w,this.f).f(t)?ow(this.b,e,this.w).ea(function(t){return n.w.B.appendChild(t),ii(!0)}):ii(!0)},n.qe=function(t){return t instanceof aw&&this.b==t.b},n.se=function(){return 9},uw.prototype.b=function(t){return this.f(t)?this.g:0},uw.prototype.F=function(t){return this.b(t)},uw.prototype.f=function(t){if(!t)return!1;var e=t.va?t.va.oa:t.M;if(e===this.w.M)return!!t.K;for(t=e.parentNode;t;t=t.parentNode)if(t===this.w.M)return!0;return!1},bw.prototype.bc=function(){var t=this.b.B,e=this.b.Z;"middle"!==e&&"bottom"!==e||P(t,"vertical-align","top");var n=this.ic.bc(!0);return P(t,"vertical-align",e),n},d(gw,Bf),gw.prototype.f=function(t,e){var n=Bf.prototype.f.call(this,t,e);return e<this.b()?null:vw(this).every(function(t){return!!t.w})?n:null},gw.prototype.b=function(){var t=Bf.prototype.b.call(this);return vw(this).forEach(function(e){t+=e.Cb.b()}),t},d(ww,Pf),ww.prototype.f=function(t,e){if(e<this.b())return null;var n=yw(this),i=mw(this),r=i.every(function(t){return!!t.w})&&i.some(function(t,e){var i=n[e].ic,r=t.w,o=i.sf[0];return!(o.B===r.B&&o.K===r.K&&o.na===r.na||uh(mh(r),i.za.zb))});return this.j.xa=i.some(function(t){return t.w&&t.w.xa}),r?this.j:null},ww.prototype.b=function(){var t=this.C,e=0;return function(t){return Math.min.apply(null,t.b.map(function(t){return t.height}))}(t.g[this.rowIndex])>t.N/2||(e+=10),mw(this).forEach(function(t){e+=t.Cb.b()}),e},d(Ew,Tv),(n=Ew.prototype).Ve=function(){return"Table formatting context (vivliostyle.table.TableFormattingContext)"},n.ef=function(t,e){if(!e)return e;switch(t.display){case"table-row":return!this.h.length;case"table-cell":return!this.h.some(function(e){return e.Fd.pa[0].node===t.M});default:return e}},n.Pd=function(t){return this.f[t.rowIndex]&&this.f[t.rowIndex][t.Ra]},n.Xe=function(){return[].concat(this.h)},n.We=function(t){this.h=t},Nw.prototype.b=function(t){return Iw(this,t,function(t){return t.current})},Nw.prototype.F=function(t){return Iw(this,t,function(t){return t.Fe})},d(_w,Fl),(n=_w.prototype).yd=function(t){var e=this.C;if(n=hw(t,e,this.h))return n;jw(this,t);var n=t.w,i=e.b;switch(n.display){case"table":e.R=n.sa;break;case"table-caption":e.H.push(new dw(n.B,n.la));break;case"table-header-group":return i.vc||(this.b=!0,Ov(i,n)),ii(!0);case"table-footer-group":return i.uc||(this.b=!0,Rv(i,n)),ii(!0);case"table-row":this.b||(this.g=!0,this.rowIndex++,this.Ra=0,e.g[this.rowIndex]=new fw(this.rowIndex,n.M),i.g||(i.g=n.M))}return Fl.prototype.yd.call(this,t)},n.oc=function(t){var e=this.C,n=t.w,i=n.display,r=this.h.f;if(jw(this,t),n.M===e.F)i=Nb(r,Nv(e,n)),e.N=parseFloat(i[e.u?"height":"width"]),e.b.J=t.hd&&t.hd.M,t.Rb=!0;else switch(i){case"table-header-group":case"table-footer-group":if(this.b)return this.b=!1,ii(!0);break;case"table-row":this.b||(e.D=n.B,this.g=!1);break;case"table-cell":if(!this.b){this.g||(this.rowIndex++,this.Ra=0,this.g=!0),i=this.rowIndex,n=new cw(this.rowIndex,this.Ra,n.B),(r=e.g[i])||(e.g[i]=new fw(i,null),r=e.g[i]),r.b.push(n);r=i+n.rowSpan;for(var o=xw(e,i),a=0;o[a];)a++;for(;i<r;i++){o=xw(e,i);for(var u=a;u<a+n.f;u++){var s=o[u]=new pw(i,u,n);n.b||(n.b=s)}}this.Ra++}}return Fl.prototype.oc.call(this,t)},n.tf=function(t){Lw(this,t)},n.Cf=function(t){Lw(this,t)},n.jg=function(t){Lw(this,t)},n.Bf=function(t){Lw(this,t)},d(Ow,Fl);var Rw={"table-caption":!0,"table-column-group":!0,"table-column":!0};function Fw(t,e,n,i){var r=e.rowIndex,o=e.Ra,a=n.B;if(1<e.f){P(a,"box-sizing","border-box");for(var u=t.C.J,s=0,h=0;h<e.f;h++)s+=u[e.b.Ra+h];s+=t.C.R*(e.f-1),P(a,t.C.u?"height":"width",s+"px")}return e=a.ownerDocument.createElement("div"),a.appendChild(e),n=new bw(t.f,e,n),(a=(t=t.C).f[r])||(a=t.f[r]=[]),a[o]=n,1===i.f.pa.length&&i.f.K&&(n.f=!0),Dl(n.ic,i).Ec(!0)}function Pw(t,e){if(t.j||t.h)return ii(!0);var n=e.w,i=t.C;return 0>t.b?t.b=Sw(i,n.M):t.b++,t.g=0,t.l=!0,function(t,e){var n=t.C,i=function(t){var e=t.C.h;if(!e.length)return[];var n=[],i=0;do{var r=e[i],o=r.Zb.rowIndex;if(o<t.b){var a=n[o];a||(a=n[o]=[]),a.push(r),e.splice(i,1)}else i++}while(i<e.length);return n}(t),r=i.reduce(function(t){return t+1},0);if(0===r)return ii(!0);var o=t.f.j,a=e.w;a.B.parentNode.removeChild(a.B);var u=ni("layoutRowSpanningCellsFromPreviousFragment"),s=ii(!0),h=0,l=[];return i.forEach(function(t){var e=this;s=s.ea(function(){var i=hh(t[0].Fd.pa[1],a.parent);return db(o,i,!1).ea(function(){function a(t){for(;s<t;){if(!l.includes(s)){var e=i.B.ownerDocument.createElement("td");P(e,"padding","0"),i.B.appendChild(e)}s++}}var u=ii(!0),s=0;return t.forEach(function(t){var e=this;u=u.ea(function(){var n=t.Zb;a(n.b.Ra);var u=t.Fd,f=hh(u.pa[0],i);return f.na=u.na,f.K=u.K,f.Sa=u.pa[0].Sa+1,db(o,f,!1).ea(function(){for(var i=t.Gf,o=0;o<n.f;o++)l.push(s+o);return s+=n.f,Fw(e,n,f,i).ea(function(){return f.B.rowSpan=n.rowIndex+n.rowSpan-e.b+r-h,ii(!0)})})})},e),u.ea(function(){return a(Aw(n)),h++,ii(!0)})})})},t),s.then(function(){db(o,a,!0,e.Cd).then(function(){wi(u,!0)})}),u.result()}(t,e).ea(function(){return function(t){t.C.g[t.b].b.forEach(function(e){var n=t.C.h[e.Ra];n&&n.Zb.b.Ra==e.b.Ra&&(e=n.Fd.pa[0],nw(n=Is(t.f.j.da,e.node),e.Sa+1,1))})}(t),Ec(t.f,e.hd,null,!0,e.ad)&&!kw(i,t.b-1).length&&(t.f.u=t.u,n.xa=!0,e.Rb=!0),ii(!0)})}Ow.prototype.kg=function(t){if(e=hw(t,this.C,this.f))return e;var e=t.w,n=this.C.b,i=e.display;return"table-header-group"===i&&n&&n.A===e.M?(this.j=!0,ii(!0)):"table-footer-group"===i&&n&&n.l===e.M?(this.h=!0,ii(!0)):"table-row"===i?Pw(this,t):"table-cell"===i?function(t,e){if(t.j||t.h)return ii(!0);var n=e.w;t.l||(0>t.b?t.b=0:t.b++,t.g=0,t.l=!0);var i=t.C.g[t.b].b[t.g],r=vh(n).modify();r.K=!0,e.w=r;var o=ni("startTableCell");return function(t,e){var n=t.C.h[0];return!!n&&n.Zb.b.Ra===e}(t,i.b.Ra)?(r=t.C.h.shift(),n.Sa=r.Fd.pa[0].Sa+1,r=ii(r.Gf)):r=$f(t.f,n,e.Cd).ea(function(t){return t.B&&n.B.removeChild(t.B),ii(new xh(sh(t)))}),r.then(function(r){Fw(t,i,n,r).then(function(){t.oc(e),t.g++,wi(o,!0)})}),o.result()}(this,t):ii(!0)},Ow.prototype.Mf=function(t){return"table-row"===(t=t.w).display&&(this.l=!1,this.j||this.h||((t=vh(t).modify()).K=!1,this.f.N.push(new ww(this.b,t,this.C)))),ii(!0)},Ow.prototype.oc=function(t){var e=t.w,n=this.C.b,i=e.display;if("table-header-group"===i?n&&!n.h&&n.A===e.M?(this.j=!1,e.B.parentNode.removeChild(e.B)):P(e.B,"display","table-row-group"):"table-footer-group"===i&&(n&&!n.h&&n.l===e.M?(this.h=!1,e.B.parentNode.removeChild(e.B)):P(e.B,"display","table-row-group")),i&&Rw[i])e.B.parentNode.removeChild(e.B);else{if(e.M!==this.C.F)return Fl.prototype.oc.call(this,t);e.xa=yc(this.f,e,null),this.f.u=this.u,t.Rb=!0}return ii(!0)};var Dw=[];function Mw(){}function Bw(t){var e=[];for(t=t.firstElementChild;t;)"colgroup"===t.localName&&e.push(t),t=t.nextElementSibling;return e}function Uw(t,e,n){var i=t.u,r=t.D;if(r){t.D=null;var o=r.ownerDocument.createDocumentFragment(),a=Aw(t);if(0<a){var u=t.J=function(t,e,n,i){for(var r=t.ownerDocument,o=r.createElement("tr"),a=[],u=0;u<e;u++){var s=r.createElement("td");o.appendChild(s),a.push(s)}return t.parentNode.insertBefore(o,t.nextSibling),e=a.map(function(t){return t=Tb(i,t),n?t.height:t.width}),t.parentNode.removeChild(o),e}(r,a,i,n.f);(function(t,e,n,i){if(t.length<n){var r=i.ownerDocument.createElement("colgroup");for(e.push(r),e=t.length;e<n;e++){var o=i.ownerDocument.createElement("col");r.appendChild(o),t.push(o)}}})(r=function(t){var e=[];return t.forEach(function(t){var n=t.span;t.removeAttribute("span");for(var i=t.firstElementChild;i;){if("col"===i.localName){var r=i.span;for(i.removeAttribute("span"),n-=r;1<r--;){var o=i.cloneNode(!0);t.insertBefore(o,i),e.push(o)}e.push(i)}i=i.nextElementSibling}for(;0<n--;)i=t.ownerDocument.createElement("col"),t.appendChild(i),e.push(i)}),e}(n=Bw(e)),n,a,e),r.forEach(function(t,e){P(t,i?"height":"width",u[e]+"px")}),n.forEach(function(t){o.appendChild(t.cloneNode(!0))})}t.A=o}}function zw(t,e,n){var i=e.C;i.u=e.b,_v(i,e.b);var r=function(t){var e=Dw.findIndex(function(e){return e.root===t});return(e=Dw[e])?e.Ng:null}(e.M);!function(t){var e=Dw.findIndex(function(e){return e.root===t});0<=e&&Dw.splice(e,1)}(e.M);var o=ni("TableLayoutProcessor.doInitialLayout"),a=vh(e);return Rl(new Ol(new _w(e.C,n),n.j),e).then(function(t){var u=t.B,s=Tb(n.f,u);s=(s=n.b?s.left:s.bottom)+(n.b?-1:1)*Df(e,Wv(n)).current;Hf(n,s)||r&&r.sg?(Uw(i,u,n),function(t,e){t.g.forEach(function(t){t.b.forEach(function(t){var n=Tb(e,t.g);t.g=null,t.height=this.u?n.width:n.height},this)},t)}(i,n.f),wi(o,null)):(n.N.push(new Gw(a)),wi(o,t))}.bind(t)),o.result()}function Vw(t,e){if(t.A&&e){var n=Bw(e);n&&n.forEach(function(t){e.removeChild(t)})}}function Xw(t,e){Ml.call(this),this.g=e,this.b=t}function Hw(t,e){this.C=t,this.h=e}function Gw(t){Bf.call(this,t,null,t.xa,0)}function Yw(t){this.b=t}function Kw(t){this.C=t}function Ww(t){Hv.call(this,t),this.b=[]}function $w(t,e){return function(t,e){var n=Number.MAX_VALUE;t&&"table-row"===t.display&&(n=Sw(e,t.M)+1);for(var n=Math.min(e.f.length,n),i=[],r=0;r<n;r++)e.f[r]&&e.f[r].forEach(function(t){t&&i.push({xg:t,Cb:t.bc().w})});return i}(t,e).map(function(t){return{Hd:t.xg.ic.za.A,Cb:t.Cb}})}function Jw(t,e){var n=t.w.C,i=function(t,e){if(!e)return null;var n=null,i=0;t:for(;i<t.f.length;i++)if(t.f[i])for(var r=0;r<t.f[i].length;r++)if(t.f[i][r]&&e===t.f[i][r].ic.za){n=t.g[i].b[r];break t}if(!n)return null;for(;i<t.l.length;i++)for(;r<t.l[i].length;r++){var o=t.l[i][r];if(o.Zb===n)return{rowIndex:o.rowIndex,Ra:o.Ra}}return null}(n,e);return i?function(t,e){var n=[];return t.l.reduce(function(i,r,o){return o>=e.rowIndex?i:!(r=t.Pd(r[e.Ra].Zb))||n.includes(r)?i:(Tw(r.ic.za,i),n.push(r),i)},[])}(n,i):function(t){var e=[];return t.g.forEach(function(n){n.b.forEach(function(n,i){e[i]||(e[i]={If:[],elements:[]});var r=e[i],o=t.Pd(n);o&&!r.If.includes(o)&&(Tw(o.ic.za,r.elements),r.If.push(o))})}),[new Nw(e.map(function(t){return t.elements}))]}(n)}(n=Mw.prototype).he=function(t,e,n){var i=t.C;return Nv(i,t)?(n&&Av(t.parent,e),Bl(new Xw(i,this),t,e)):Jf(e,t)},n.Jf=function(t,e,n,i){return new gw(t,e,n,i)},n.Ye=function(){return!1},n.zf=function(){return!1},n.Na=function(t,e,n,i){var r=e.C;if("table-row"===e.display){var o,a=Sw(r,e.M);if(r.h=[],(o=e.K?kw(r,a):Cw(r,a)).length){var u=ni("TableLayoutProcessor.finishBreak"),s=0;return xi(function(t){if(s===o.length)Ai(t);else{var e=o[s++],n=r.Pd(e),i=n.bc().w,u=n.b,h=mh(u),l=new xh(mh(i));r.h.push({Fd:h,Gf:l,Zb:e}),u=u.B,Sb(n.b),a<e.rowIndex+e.rowSpan-1&&(u.rowSpan=a-e.rowIndex+1),n.f?ki(t):n.ic.Na(i,!1,!0).then(function(){var e=r.b;if(e){var o=r.u,a=n.g,u=n.ic.za.element,s=n.b.B,h=Tb(a.f,s);s=ic(a,s);o?P(u,"max-width",(e=h.right-a.la-e.b(i)-s.right)+"px"):P(u,"max-height",(e=a.la-e.b(i)-h.top-s.top)+"px"),P(u,"overflow","hidden")}ki(t)})}}).then(function(){Ac(t,e,!1),Sb(e),r.f=[],wi(u,!0)}),u.result()}}return r.f=[],Pc.Na(t,e,n,i)},n.Bd=function(t,e,n,i){Fc.prototype.Bd(t,e,n,i)},d(Xw,Ml),Xw.prototype.pf=function(t){var e=this.b.b;return e&&e.j?(t.M===this.b.F&&!t.K&&e&&(e.yc=!1,e.dd=!1),new Kw(this.b)):new Hw(this.b,this.g)},Xw.prototype.Gd=function(t){Ml.prototype.Gd.call(this,t),Vw(this.b,Nv(this.b,t))},Xw.prototype.ge=function(t,e){Ml.prototype.ge.call(this,t,e),this.b.f=[]},d(Hw,Uv),Hw.prototype.b=function(t,e){return Uv.prototype.b.call(this,t,e),zw(this.h,t,e)},d(Gw,Bf),Gw.prototype.b=function(){if(!this.h)throw Error("EdgeBreakPosition.prototype.updateEdge not called");return(this.j?3:0)+(this.position.parent?this.position.parent.j:0)},Gw.prototype.u=function(t){t.A.push(new Yw(this.position.M))},(n=Yw.prototype).ie=function(){return!1},n.kd=function(){return!0},n.$c=function(t,e){Dw.push({root:e.M,Ng:{sg:!0}})},n.Na=function(){return ii(!0)},n.qe=function(t){return t instanceof Yw&&t.b===this.b},n.se=function(){return 0},d(Kw,zv),Kw.prototype.b=function(t,e){var n=this.C.b;if(n&&!Pv(n,t)){var i=new Ww(t);e.A.some(function(t){return i.qe(t)})||e.A.unshift(i)}return function(t,e){var n=t.C,i=Nv(n,t),r=i.firstChild;return function(t,e,n){var i=t.H;i.forEach(function(t,r){t&&(e.insertBefore(t.B,n),"top"===t.b&&(i[r]=null))})}(n,i,r),n.A&&!Bw(i).length&&i.insertBefore(n.A.cloneNode(!0),r),n=new Ol(n=new Ow(n,e),e.j),i=ni("TableFormattingContext.doLayout"),Rl(n,t).La(i),i.result()}(t,e)},d(Ww,Hv),(n=Ww.prototype).ie=function(t,e,n){var i=this.w.C.b;return!(i&&!n.Jd&&!jc(this.w.B)&&Bv(i))||!(e&&!t||t&&t.xa)},n.kd=function(t){return!!$w(t,this.w.C).some(function(e){return e.Hd.some(function(e){return e.kd(t)})})||Hv.prototype.kd.call(this,t)},n.$c=function(t,e,n,i){var r=this.w.C;this.b=$w(e,r),this.b.forEach(function(e){e.Hd.forEach(function(r){r.$c(t,e.Cb,n,i)})}),t||(Vw(r,Nv(r,this.w)),function(t){if(t&&"table-row"===t.display&&t.B)for(;t.B.previousElementSibling;){var e=t.B.previousElementSibling;e.parentNode&&e.parentNode.removeChild(e)}}(n)),Hv.prototype.$c.call(this,t,e,n,i)},n.Na=function(t,e){var n=this,i=ni("finishBreak"),r=this.b.reduce(function(t,e){return t.concat(e.Hd.map(function(t){return{ug:t,Cb:e.Cb}}))},[]),o=0;return Ei(function(){if(o<r.length){var t=r[o++];return t.ug.Na(t.Cb,e).Ec(!0)}return ii(!1)}).then(function(){wi(i,!0)}),i.result().ea(function(){return Hv.prototype.Na.call(n,t,e)})},n.qe=function(t){return t instanceof Ww&&this.w.C===t.w.C};var Zw=new Mw;function qw(t){function e(t){return"number"==typeof t?t:null}function n(t){return"string"==typeof t?{url:t,wb:null,Bc:null}:{url:t.url,wb:e(t.startPage),Bc:e(t.skipPagesBefore)}}return Array.isArray(t)?t.map(n):t?[n(t)]:null}function Qw(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];switch(n){case"autoResize":e.autoresize=i;break;case"pageBorderWidth":e.pageBorder=i;break;default:e[n]=i}}),e}function tm(t,e){Cs=t.debug,this.g=!1,this.h=t,this.fb=new Bg(t.window||window,t.viewportElement,"main",this.vg.bind(this)),this.f={autoResize:!0,fontSize:16,pageBorderWidth:1,renderAllPages:!0,pageViewMode:"autoSpread",zoom:1,fitToScreen:!1,defaultPaperSize:void 0},e&&this.ig(e),this.b=new Q,Object.defineProperty(this,"readyState",{get:function(){return this.fb.u}})}function em(t,e,n,i,r){function o(t){if(t)return t.map(function(t){return{url:t.url||null,text:t.text||null}})}var a=o((i=i||{}).authorStyleSheet),u=o(i.userStyleSheet);r&&Object.assign(t.f,r),e=Object.assign({a:e?"loadXML":"loadEPUB",userAgentRootURL:t.h.userAgentRootURL,url:qw(e)||n,document:i.documentObject,fragment:i.fragment,authorStyleSheet:a,userStyleSheet:u},Qw(t.f)),t.g?t.fb.h(e):(t.g=!0,rv(t.fb,e))}qn("RESOLVE_FORMATTING_CONTEXT",function(t,e,n){return e&&n===On?new Ew((e=t.parent)?e.C:null,t.M):null}),qn("RESOLVE_LAYOUT_PROCESSOR",function(t){return t instanceof Ew?Zw:null}),Array.from||(Array.from=function(t,e,n){e&&n&&(e=e.bind(n)),n=[];for(var i=t.length,r=0;r<i;r++)n[r]=e?e(t[r],r):t[r];return n}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t,e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var n,i=Object(this),r=i.length>>>0,o=0;o<r;o++)if(n=i[o],t.call(e,n,o,i))return o;return-1},enumerable:!1,configurable:!1,writable:!1}),Object.assign||(Object.assign=function(t,e){return e?(Object.keys(e).forEach(function(n){t[n]=e[n]}),t):t}),(n=tm.prototype).ig=function(t){var e=Object.assign({a:"configure"},Qw(t));this.fb.h(e),Object.assign(this.f,t)},n.vg=function(t){var e={type:t.t};Object.keys(t).forEach(function(n){"t"!==n&&(e[n]=t[n])}),tt(this.b,e)},n.Og=function(t,e){this.b.addEventListener(t,e,!1)},n.Rg=function(t,e){this.b.removeEventListener(t,e,!1)},n.Ag=function(t,e,n){t||tt(this.b,{type:"error",content:"No URL specified"}),em(this,t,null,e,n)},n.Pg=function(t,e,n){t||tt(this.b,{type:"error",content:"No URL specified"}),em(this,null,t,e,n)},n.cc=function(){return this.fb.cc()},n.Dg=function(t,e){if("epage"===t)this.fb.h({a:"moveTo",epage:e});else{var n;t:switch(t){case"left":n="ltr"===this.cc()?"previous":"next";break t;case"right":n="ltr"===this.cc()?"next":"previous";break t;default:n=t}this.fb.h({a:"moveTo",where:n})}},n.Cg=function(t){this.fb.h({a:"moveTo",url:t})},n.Oc=function(){return this.fb.b&&this.fb.b.S&&(this.fb.b.S.Se||this.fb.b.S.kf)?!!this.fb.b.Oc():null},n.Rc=function(t,e){this.fb.h({a:"toc",v:null==t?"toggle":t?"show":"hide",autohide:e})},n.Qg=function(t){t:{var e=this.fb;if(!e.g)throw Error("no page exists.");switch(t){case"fit inside viewport":t=Qg(e,e.$.tb?Zg(e,e.j):e.g.g);break t;default:throw Error("unknown zoom type: "+t)}}return t},n.yg=function(){return this.fb.Z},b("vivliostyle.viewer.Viewer",tm),tm.prototype.setOptions=tm.prototype.ig,tm.prototype.addListener=tm.prototype.Og,tm.prototype.removeListener=tm.prototype.Rg,tm.prototype.loadDocument=tm.prototype.Ag,tm.prototype.loadEPUB=tm.prototype.Pg,tm.prototype.getCurrentPageProgression=tm.prototype.cc,tm.prototype.navigateToPage=tm.prototype.Dg,tm.prototype.navigateToInternalUrl=tm.prototype.Cg,tm.prototype.isTOCVisible=tm.prototype.Oc,tm.prototype.showTOC=tm.prototype.Rc,tm.prototype.queryZoomFactor=tm.prototype.Qg,tm.prototype.getPageSizes=tm.prototype.yg,b("vivliostyle.viewer.ZoomType",qg),qg.FIT_INSIDE_VIEWPORT="fit inside viewport",b("vivliostyle.viewer.PageViewMode",Mg),Mg.SINGLE_PAGE="singlePage",Mg.SPREAD="spread",Mg.AUTO_SPREAD="autoSpread",mv.call(xv,"load_vivliostyle","end",void 0);var nm=16,im="ltr";function rm(t){window.adapt_command(t)}function om(){rm({a:"moveTo",where:"ltr"===im?"previous":"next"})}function am(){rm({a:"moveTo",where:"ltr"===im?"next":"previous"})}function um(t){var e=t.key,n=t.keyIdentifier,i=t.location;"End"===e||"End"===n?(rm({a:"moveTo",where:"last"}),t.preventDefault()):"Home"===e||"Home"===n?(rm({a:"moveTo",where:"first"}),t.preventDefault()):"ArrowUp"===e||"Up"===e||"Up"===n?(rm({a:"moveTo",where:"previous"}),t.preventDefault()):"ArrowDown"===e||"Down"===e||"Down"===n?(rm({a:"moveTo",where:"next"}),t.preventDefault()):"ArrowRight"===e||"Right"===e||"Right"===n?(am(),t.preventDefault()):"ArrowLeft"===e||"Left"===e||"Left"===n?(om(),t.preventDefault()):"0"===e||"U+0030"===n?(rm({a:"configure",fontSize:Math.round(nm)}),t.preventDefault()):"t"===e||"U+0054"===n?(rm({a:"toc",v:"toggle",autohide:!0}),t.preventDefault()):"+"===e||"Add"===e||"U+002B"===n||"U+00BB"===n||"U+004B"===n&&i===KeyboardEvent.b?(nm*=1.2,rm({a:"configure",fontSize:Math.round(nm)}),t.preventDefault()):("-"===e||"Subtract"===e||"U+002D"===n||"U+00BD"===n||"U+004D"===n&&i===KeyboardEvent.b)&&(nm/=1.2,rm({a:"configure",fontSize:Math.round(nm)}),t.preventDefault())}function sm(t){switch(t.t){case"loaded":t=t.viewer;var e=im=t.cc();t.ee.setAttribute("data-vivliostyle-page-progression",e),t.ee.setAttribute("data-vivliostyle-spread-view",t.$.tb),window.addEventListener("keydown",um,!1),document.body.setAttribute("data-vivliostyle-viewer-status","complete"),(t=document.getElementById("vivliostyle-page-navigation-left")).addEventListener("click",om,!1),(e=document.getElementById("vivliostyle-page-navigation-right")).addEventListener("click",am,!1),[t,e].forEach(function(t){t.setAttribute("data-vivliostyle-ui-state","attention"),window.setTimeout(function(){t.removeAttribute("data-vivliostyle-ui-state")},1e3)});break;case"nav":(t=t.cfi)&&location.replace(function(t,e){var n=new RegExp("#(.*&)?"+G("f")+"=([^#&]*)"),i=t.match(n);return i?(n=i[2].length,i=i.index+i[0].length-n,t.substr(0,i)+e+t.substr(i+n)):t.match(/#/)?t+"&f="+e:t+"#f="+e}(location.href,X(t||"")));break;case"hyperlink":t.internal&&rm({a:"moveTo",url:t.href})}}return b("vivliostyle.viewerapp.main",function(t){var e,n=t&&t.fragment||I("f"),i=t&&t.epubURL||I("b"),r=t&&t.xmlURL||I("x"),o=t&&t.defaultPageWidth||I("w"),a=t&&t.defaultPageHeight||I("h"),u=t&&t.defaultPageSize||I("size"),s=t&&t.orientation||I("orientation"),h=I("spread"),l=(h=t&&t.spreadView||!!h&&"false"!=h,t&&t.viewportElement||document.body);if(t={a:i?"loadEPUB":"loadXML",url:i||r,autoresize:!0,fragment:n,renderAllPages:!0,userAgentRootURL:t&&t.uaRoot||null,document:t&&t.document||null,userStyleSheet:t&&t.userStyleSheet||null,spreadView:h,pageBorder:1},o&&a)e=o+" "+a;else{switch(u){case"A5":o="148mm",a="210mm";break;case"A4":o="210mm",a="297mm";break;case"A3":o="297mm",a="420mm";break;case"B5":o="176mm",a="250mm";break;case"B4":o="250mm",a="353mm";break;case"letter":o="8.5in",a="11in";break;case"legal":o="8.5in",a="14in";break;case"ledger":o="11in",a="17in"}o&&a&&(e=u,"landscape"===s&&(e=e?e+" landscape":null,u=o,o=a,a=u))}o&&a&&(t.viewport={width:o,height:a},(u=document.createElement("style")).textContent="@page { size: "+e+"; margin: 0; }",document.head.appendChild(u)),rv(new Bg(window,l,"main",sm),t)}),e.vivliostyle}.bind(window),e.exports=i({})}(e={exports:{}},e.exports),e.exports),i=function(t,e){var n=e.title;void 0===n&&(n="");var i=e.resourcesUrl;void 0===i&&(i="resources/");var r=e.printCallback;void 0===r&&(r=function(t){return t.print()});var o=e.hideIframe;void 0===o&&(o=!0);var a=e.removeIframe;void 0===a&&(a=!0),this.htmlDoc=t,this.title=n,this.resourcesUrl=i,this.printCallback=r,this.hideIframe=o,this.removeIframe=a};i.prototype.init=function(){this.iframe=document.createElement("iframe"),this.hideIframe&&(this.iframe.style.width=0,this.iframe.style.height=0,this.iframe.style.borderWidth=0),this.window=window,this.window.printInstance=this,this.iframe.srcdoc="<!DOCTYPE html>\n        <html data-vivliostyle-paginated=\"true\">\n            <head>\n                <meta charset='utf-8'/>\n                <meta name='viewport' content='width=device-width, initial-scale=1.0'/>\n                <link rel=\"stylesheet\" href=\""+this.resourcesUrl+'vivliostyle-viewport-screen.css" media="screen"/>\n                <link rel="stylesheet" href="'+this.resourcesUrl+"vivliostyle-viewport.css\"/>\n                <style>\n                    html[data-vivliostyle-paginated] {\n                        width: 100%;\n                        height: 100%;\n                    }\n                    html[data-vivliostyle-paginated] body,\n                    html[data-vivliostyle-paginated] [data-vivliostyle-viewer-viewport] {\n                        width: 100% !important;\n                        height: 100% !important;\n                    }\n                    html[data-vivliostyle-paginated],\n                    html[data-vivliostyle-paginated] body {\n                        margin: 0;\n                        padding: 0;\n                    }\n                </style>\n                <style id='vivliostyle-page-rules'></style>\n            </head>\n            <body onload='parent.printInstance.runInIframe(window)'>\n                <div id=\"vivliostyle-viewer-viewport\"></div>\n            </body>\n        </html>",document.body.appendChild(this.iframe)},i.prototype.runInIframe=function(t){var e=this;return this.iframeWin=t,this.preparePrint().then(function(){return e.browserPrint()}).then(function(){return e.cleanUp()})},i.prototype.preparePrint=function(){this.iframeWin.document.title=this.title;var t=new Blob([this.htmlDoc],{type:"text/html"}),e=URL.createObjectURL(t),i=new n.viewer.Viewer({viewportElement:this.iframeWin.document.body.firstElementChild,window:this.iframeWin,userAgentRootURL:""+this.resourcesUrl});return new Promise(function(t){i.addListener("readystatechange",function(){"complete"===i.readyState&&t()}),i.loadDocument({url:e})})},i.prototype.browserPrint=function(){this.printCallback(this.iframeWin)},i.prototype.cleanUp=function(){delete this.window.printInstance,this.removeIframe&&this.iframe.parentElement.removeChild(this.iframe)},document.getElementById("print").addEventListener("click",function(){var t=document.getElementById("html").value;!function(t,e){new i(t,e).init()}("\n        <!doctype html>\n        <html>\n            <head><style>"+document.getElementById("css").value+"</style><head>\n            <body>"+t+"</body>\n        </html>",{title:"Vivliostyle-print demo",resourcesUrl:"/demo/resources/",printCallback:function(t){t.document.querySelectorAll("[data-vivliostyle-page-container]").length;t.print()},hideIframe:!0,removeIframe:!0})})}();
//# sourceMappingURL=bundle.js.map
